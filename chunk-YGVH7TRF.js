import{$ as wc,$a as Pc,$b as zp,A as li,Aa as Sc,B as up,Ba as Ip,Bb as Bp,C as vc,Ca as lt,Db as jp,Ea as bc,Eb as qp,F as St,Fa as Cc,G as Qn,Ga as nr,H as Jt,Ha as rr,Hc as em,Ia as Ep,J as Ic,Ja as wp,Jc as vi,K as Jn,Ka as Tp,Kc as tm,L as lp,La as Ap,Lc as oo,M as Yn,Ma as Rp,N as Yt,Na as Sp,Nb as pi,O as Ec,Oa as bp,P as hp,Pa as wn,Q as dp,R as fp,S as Ke,Sa as Cp,T as pp,U as ge,Ua as fi,V as ue,Wa as Qe,X as K,Xa as Pp,Y as Xn,Ya as Dp,Yb as eo,Z as mp,Zb as $p,_ as ee,_a as Np,_b as to,a as L,aa as J,ab as Op,ac as Lc,b as Se,ba as U,bb as kp,bc as mi,c as np,ca as _e,cb as Dc,cc as gi,d as Kt,da as gp,dc as Gp,e as v,ea as hi,eb as Lp,ec as no,f as rp,fa as di,fb as xp,g as ip,ga as Zn,gb as Nc,gc as ro,h as Kn,ha as er,i as pc,ib as Mp,ic as Wp,j as mc,ja as je,jb as Vp,jc as Hp,k as We,ka as _p,kc as io,l as Xe,la as En,m as sp,ma as Ze,n as op,na as Xs,o as Qt,p as gc,pc as Kp,q as _c,qc as xc,r as yc,ra as Tc,rb as Up,rc as Qp,s as Oe,sa as yp,sc as Jp,t as F,ta as it,tc as qe,u as ui,ua as Zs,uc as Yp,v as ap,va as tr,vc as _i,w as cp,wa as ye,wb as Fp,wc as Xp,x as re,xa as Ac,xc as Zp,y as Ys,ya as Rc,yb as Oc,yc as yi,z as He,za as vp,zb as kc,zc as so}from"./chunk-KJXMVPC6.js";var Ei=class{},uo=class{},ht=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Vc=class{encodeKey(e){return nm(e)}encodeValue(e){return nm(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function dI(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(c),t.set(o,u)}),t}var fI=/%(\d[a-f0-9])/gi,pI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nm(n){return encodeURIComponent(n).replace(fI,(e,t)=>pI[t]??e)}function ao(n){return`${n}`}var Zt=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=dI(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ao):[ao(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ao(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ao(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Uc=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function mI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rm(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function im(n){return typeof Blob<"u"&&n instanceof Blob}function sm(n){return typeof FormData<"u"&&n instanceof FormData}function gI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ii=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(mI(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ht,this.context??=new Uc,!this.params)this.params=new Zt,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rm(this.body)||im(this.body)||sm(this.body)||gI(this.body)?this.body:this.body instanceof Zt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||sm(this.body)?null:im(this.body)?this.body.type||null:rm(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Zt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,d=e.headers||this.headers,f=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((w,b)=>w.set(b,e.setHeaders[b]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((w,b)=>w.set(b,e.setParams[b]),f)),new n(t,r,o,{params:f,headers:d,context:g,reportProgress:u,responseType:i,withCredentials:c,transferCache:s})}},en=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(en||{}),wi=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new ht,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},lo=class n extends wi{constructor(e={}){super(e),this.type=en.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tn=class n extends wi{constructor(e={}){super(e),this.type=en.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Xt=class extends wi{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gm=200,_I=204;function Mc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var yI=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ii)s=t;else{let u;i.headers instanceof ht?u=i.headers:u=new ht(i.headers);let d;i.params&&(i.params instanceof Zt?d=i.params:d=new Zt({fromObject:i.params})),s=new Ii(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=F(s).pipe(Jt(u=>this.handler.handle(u)));if(t instanceof Ii||i.observe==="events")return o;let c=o.pipe(St(u=>u instanceof Tn));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(re(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(re(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(re(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(re(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Zt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Mc(i,r))}post(t,r,i={}){return this.request("POST",t,Mc(i,r))}put(t,r,i={}){return this.request("PUT",t,Mc(i,r))}static{this.\u0275fac=function(r){return new(r||n)(J(Ei))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),vI=/^\)\]\}',?\n/,II="X-Request-URL";function om(n){if(n.url)return n.url;let e=II.toLocaleLowerCase();return n.headers.get(e)}var EI=(()=>{class n{constructor(){this.fetchImpl=U(Fc,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=U(ye)}handle(t){return new Kn(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Bc,s=>r.error(new Xt({error:s}))),()=>i.abort()})}doRequest(t,r,i){return v(this,null,function*(){let s=this.createRequestInit(t),o;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,L({signal:r},s)));wI(b),i.next({type:en.Sent}),o=yield b}catch(b){i.error(new Xt({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let c=new ht(o.headers),u=o.statusText,d=om(o)??t.urlWithParams,f=o.status,g=null;if(t.reportProgress&&i.next(new lo({headers:c,status:f,statusText:u,url:d})),o.body){let b=o.headers.get("content-length"),P=[],D=o.body.getReader(),C=0,B,G,x=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){let{done:se,value:Q}=yield D.read();if(se)break;if(P.push(Q),C+=Q.length,t.reportProgress){G=t.responseType==="text"?(G??"")+(B??=new TextDecoder).decode(Q,{stream:!0}):void 0;let E=()=>i.next({type:en.DownloadProgress,total:b?+b:void 0,loaded:C,partialText:G});x?x.run(E):E()}}}));let q=this.concatChunks(P,C);try{let se=o.headers.get("Content-Type")??"";g=this.parseBody(t,q,se)}catch(se){i.error(new Xt({error:se,headers:new ht(o.headers),status:o.status,statusText:o.statusText,url:om(o)??t.urlWithParams}));return}}f===0&&(f=g?gm:0),f>=200&&f<300?(i.next(new Tn({body:g,headers:c,status:f,statusText:u,url:d})),i.complete()):i.error(new Xt({error:g,headers:c,status:f,statusText:u,url:d}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(vI,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Fc=class{};function Bc(){}function wI(n){n.then(Bc,Bc)}function TI(n,e){return e(n)}function AI(n,e,t){return(r,i)=>Ze(t,()=>e(r,s=>n(s,i)))}var _m=new ee(""),ym=new ee(""),RI=new ee("",{providedIn:"root",factory:()=>!0});var am=(()=>{class n extends Ei{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=U(Zs),this.contributeToStability=U(RI)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(_m),...this.injector.get(ym,[])]));this.chain=r.reduceRight((i,s)=>AI(i,s,this.injector),TI)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Yn(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(J(uo),J(En))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();var SI=/^\)\]\}',?\n/;function bI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var cm=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ue(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Oe(r.\u0275loadImpl()):F(null)).pipe(Ke(()=>new Kn(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,C)=>o.setRequestHeader(D,C.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let D=t.detectContentTypeHeader();D!==null&&o.setRequestHeader("Content-Type",D)}if(t.responseType){let D=t.responseType.toLowerCase();o.responseType=D!=="json"?D:"text"}let c=t.serializeBody(),u=null,d=()=>{if(u!==null)return u;let D=o.statusText||"OK",C=new ht(o.getAllResponseHeaders()),B=bI(o)||t.url;return u=new lo({headers:C,status:o.status,statusText:D,url:B}),u},f=()=>{let{headers:D,status:C,statusText:B,url:G}=d(),x=null;C!==_I&&(x=typeof o.response>"u"?o.responseText:o.response),C===0&&(C=x?gm:0);let q=C>=200&&C<300;if(t.responseType==="json"&&typeof x=="string"){let se=x;x=x.replace(SI,"");try{x=x!==""?JSON.parse(x):null}catch(Q){x=se,q&&(q=!1,x={error:Q,text:x})}}q?(s.next(new Tn({body:x,headers:D,status:C,statusText:B,url:G||void 0})),s.complete()):s.error(new Xt({error:x,headers:D,status:C,statusText:B,url:G||void 0}))},g=D=>{let{url:C}=d(),B=new Xt({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:C||void 0});s.error(B)},w=!1,b=D=>{w||(s.next(d()),w=!0);let C={type:en.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(C.total=D.total),t.responseType==="text"&&o.responseText&&(C.partialText=o.responseText),s.next(C)},P=D=>{let C={type:en.UploadProgress,loaded:D.loaded};D.lengthComputable&&(C.total=D.total),s.next(C)};return o.addEventListener("load",f),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",b),c!==null&&o.upload&&o.upload.addEventListener("progress",P)),o.send(c),s.next({type:en.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",f),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",b),c!==null&&o.upload&&o.upload.removeEventListener("progress",P)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(J(oo))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),vm=new ee(""),CI="XSRF-TOKEN",PI=new ee("",{providedIn:"root",factory:()=>CI}),DI="X-XSRF-TOKEN",NI=new ee("",{providedIn:"root",factory:()=>DI}),ho=class{},OI=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=so(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(J(qe),J(lt),J(PI))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function kI(n,e){let t=n.url.toLowerCase();if(!U(vm)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=U(ho).getToken(),i=U(NI);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function DC(...n){let e=[yI,cm,am,{provide:Ei,useExisting:am},{provide:uo,useFactory:()=>U(EI,{optional:!0})??U(cm)},{provide:_m,useValue:kI,multi:!0},{provide:vm,useValue:!0},{provide:ho,useClass:OI}];for(let t of n)e.push(...t.\u0275providers);return je(e)}var LI=new ee(""),um="b",lm="h",hm="s",dm="st",fm="u",pm="rt",co=new ee(""),xI=["GET","HEAD"];function MI(n,e){let b=U(co),{isCacheActive:t}=b,r=np(b,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!xI.includes(s)||!r.includeRequestsWithAuthHeaders&&VI(n)||r.filter?.(n)===!1)return e(n);let o=U(Cc),c=U(LI,{optional:!0}),u=vi(U(lt));if(c&&!u)throw new ue(2803,!1);let d=u&&c?jI(n.url,c):n.url,f=FI(n,d),g=o.get(f,null),w=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(w=i.includeHeaders),g){let{[um]:P,[pm]:D,[lm]:C,[hm]:B,[dm]:G,[fm]:x}=g,q=P;switch(D){case"arraybuffer":q=new TextEncoder().encode(P).buffer;break;case"blob":q=new Blob([P]);break}let se=new ht(C);return F(new Tn({body:q,headers:se,status:B,statusText:G,url:x}))}return e(n).pipe(ge(P=>{P instanceof Tn&&u&&o.set(f,{[um]:P.body,[lm]:UI(P.headers,w),[hm]:P.status,[dm]:P.statusText,[fm]:d,[pm]:n.responseType})}))}function VI(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function UI(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function mm(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function FI(n,e){let{params:t,method:r,responseType:i}=n,s=mm(t),o=n.serializeBody();o instanceof URLSearchParams?o=mm(o):typeof o!="string"&&(o="");let c=[r,i,e,o,s].join("|"),u=BI(c);return u}function BI(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Im(n){return[{provide:co,useFactory:()=>(kp("NgHttpTransferCache"),L({isCacheActive:!0},n))},{provide:ym,useValue:MI,multi:!0,deps:[Cc,co]},{provide:mi,multi:!0,useFactory:()=>{let e=U(gi),t=U(co);return()=>{Gp(e).then(()=>{t.isCacheActive=!1})}}}]}function jI(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var $c=class extends Jp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zc=class n extends $c{static makeCurrent(){Qp(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=$I();return t==null?null:zI(t)}resetBaseElement(){Ti=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return so(document.cookie,e)}},Ti=null;function $I(){return Ti=Ti||document.querySelector("base"),Ti?Ti.getAttribute("href"):null}function zI(n){return new URL(n,document.baseURI).pathname}var GI=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Gc=new ee(""),Am=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(J(Gc),J(ye))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),po=class{constructor(e){this._doc=e}},jc="ng-app-id",Rm=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vi(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${jc}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(jc),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(jc,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(J(qe),J(Sc),J(bc,8),J(lt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),qc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Kc=/%COMP%/g,Sm="%COMP%",WI=`_nghost-${Sm}`,HI=`_ngcontent-${Sm}`,KI=!0,QI=new ee("",{providedIn:"root",factory:()=>KI});function JI(n){return HI.replace(Kc,n)}function YI(n){return WI.replace(Kc,n)}function bm(n,e){return e.map(t=>t.replace(Kc,n))}var Em=(()=>{class n{constructor(t,r,i,s,o,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=vi(c),this.defaultRenderer=new Ai(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hi.ShadowDom&&(r=Se(L({},r),{encapsulation:hi.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof mo?i.applyToHost(t):i instanceof Ri&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case hi.Emulated:s=new mo(u,d,r,this.appId,f,o,c,g);break;case hi.ShadowDom:return new Wc(u,d,t,r,o,c,this.nonce,g);default:s=new Ri(u,d,r,f,o,c,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(J(Am),J(Rm),J(Sc),J(QI),J(qe),J(lt),J(ye),J(bc))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Ai=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wm(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wm(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=qc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=qc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fi.DashCase|fi.Important)?e.style.setProperty(t,r,i&fi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=xc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function wm(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Wc=class extends Ai{constructor(e,t,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=bm(i.id,i.styles);for(let f of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ri=class extends Ai{constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?bm(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},mo=class extends Ri{constructor(e,t,r,i,s,o,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,c,u,d),this.contentAttr=JI(d),this.hostAttr=YI(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},XI=(()=>{class n extends po{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(J(qe))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Tm=["alt","control","meta","shift"],ZI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},tE=(()=>{class n extends po{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Tm.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=ZI[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Tm.forEach(o=>{if(o!==i){let c=eE[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(J(qe))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function eP(n,e){return Wp(L({rootComponent:n},nE(e)))}function nE(n){return{appProviders:[...aE,...n?.providers??[]],platformProviders:oE}}function rE(){zc.makeCurrent()}function iE(){return new Ac}function sE(){return vp(document),document}var oE=[{provide:lt,useValue:em},{provide:Ip,useValue:rE,multi:!0},{provide:qe,useFactory:sE,deps:[]}];var aE=[{provide:_p,useValue:"root"},{provide:Ac,useFactory:iE,deps:[]},{provide:Gc,useClass:XI,multi:!0,deps:[qe,ye,lt]},{provide:Gc,useClass:tE,multi:!0,deps:[qe]},Em,Rm,Am,{provide:Np,useExisting:Em},{provide:oo,useClass:GI,deps:[]},[]];var Cm=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(J(qe))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var cE=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=J(uE),i},providedIn:"root"})}}return n})(),uE=(()=>{class n extends cE{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case wn.NONE:return r;case wn.HTML:return rr(r,"HTML")?nr(r):bp(this._doc,String(r)).toString();case wn.STYLE:return rr(r,"Style")?nr(r):r;case wn.SCRIPT:if(rr(r,"Script"))return nr(r);throw new ue(5200,!1);case wn.URL:return rr(r,"URL")?nr(r):Sp(String(r));case wn.RESOURCE_URL:if(rr(r,"ResourceURL"))return nr(r);throw new ue(5201,!1);default:throw new ue(5202,!1)}}bypassSecurityTrustHtml(t){return Ep(t)}bypassSecurityTrustStyle(t){return wp(t)}bypassSecurityTrustScript(t){return Tp(t)}bypassSecurityTrustUrl(t){return Ap(t)}bypassSecurityTrustResourceUrl(t){return Rp(t)}static{this.\u0275fac=function(r){return new(r||n)(J(qe))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hc=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Hc||{});function tP(...n){let e=[],t=new Set,r=t.has(Hc.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return je([[],Hp(),t.has(Hc.NoHttpTransferCache)||r?[]:Im({}),e])}var W="primary",Bi=Symbol("RouteTitle"),Zc=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ur(n){return new Zc(n)}function hE(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function dE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dt(n[t],e[t]))return!1;return!0}function dt(n,e){let t=n?eu(n):void 0,r=e?eu(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Bm(n[i],e[i]))return!1;return!0}function eu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Bm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function jm(n){return n.length>0?n[n.length-1]:null}function rn(n){return ap(n)?n:zp(n)?Oe(Promise.resolve(n)):F(n)}var fE={exact:$m,subset:zm},qm={exact:pE,subset:mE,ignored:()=>!0};function Pm(n,e,t){return fE[t.paths](n.root,e.root,t.matrixParams)&&qm[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function pE(n,e){return dt(n,e)}function $m(n,e,t){if(!Rn(n.segments,e.segments)||!yo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!$m(n.children[r],e.children[r],t))return!1;return!0}function mE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Bm(n[t],e[t]))}function zm(n,e,t){return Gm(n,e,e.segments,t)}function Gm(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rn(i,t)||e.hasChildren()||!yo(i,t,r))}else if(n.segments.length===t.length){if(!Rn(n.segments,t)||!yo(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!zm(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Rn(n.segments,i)||!yo(n.segments,i,r)||!n.children[W]?!1:Gm(n.children[W],e,s,r)}}function yo(n,e,t){return e.every((r,i)=>qm[t](n[i].parameters,r.parameters))}var Ct=class{constructor(e=new oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ur(this.queryParams),this._queryParamMap}toString(){return yE.serialize(this)}},oe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vo(this)}},An=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ur(this.parameters),this._parameterMap}toString(){return Hm(this)}};function gE(n,e){return Rn(n,e)&&n.every((t,r)=>dt(t.parameters,e[r].parameters))}function Rn(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _E(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===W&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==W&&(t=t.concat(e(i,r)))}),t}var ji=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new lr,providedIn:"root"})}}return n})(),lr=class{parse(e){let t=new nu(e);return new Ct(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Si(e.root,!0)}`,r=EE(e.queryParams),i=typeof e.fragment=="string"?`#${vE(e.fragment)}`:"";return`${t}${r}${i}`}},yE=new lr;function vo(n){return n.segments.map(e=>Hm(e)).join("/")}function Si(n,e){if(!n.hasChildren())return vo(n);if(e){let t=n.children[W]?Si(n.children[W],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==W&&r.push(`${i}:${Si(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_E(n,(r,i)=>i===W?[Si(n.children[W],!1)]:[`${i}:${Si(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[W]!=null?`${vo(n)}/${t[0]}`:`${vo(n)}/(${t.join("//")})`}}function Wm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function go(n){return Wm(n).replace(/%3B/gi,";")}function vE(n){return encodeURI(n)}function tu(n){return Wm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Io(n){return decodeURIComponent(n)}function Dm(n){return Io(n.replace(/\+/g,"%20"))}function Hm(n){return`${tu(n.path)}${IE(n.parameters)}`}function IE(n){return Object.entries(n).map(([e,t])=>`;${tu(e)}=${tu(t)}`).join("")}function EE(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${go(t)}=${go(i)}`).join("&"):`${go(t)}=${go(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var wE=/^[^\/()?;#]+/;function Qc(n){let e=n.match(wE);return e?e[0]:""}var TE=/^[^\/()?;=#]+/;function AE(n){let e=n.match(TE);return e?e[0]:""}var RE=/^[^=?&#]+/;function SE(n){let e=n.match(RE);return e?e[0]:""}var bE=/^[^&#]+/;function CE(n){let e=n.match(bE);return e?e[0]:""}var nu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new oe([],{}):new oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[W]=new oe(e,t)),r}parseSegment(){let e=Qc(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new An(Io(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=AE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Qc(this.remaining);i&&(r=i,this.capture(r))}e[Io(t)]=Io(r)}parseQueryParam(e){let t=SE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=CE(this.remaining);o&&(r=o,this.capture(r))}let i=Dm(t),s=Dm(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ue(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=W);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[W]:new oe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}};function Km(n){return n.segments.length>0?new oe([],{[W]:n}):n}function Qm(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Qm(i);if(r===W&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new oe(n.segments,e);return PE(t)}function PE(n){if(n.numberOfChildren===1&&n.children[W]){let e=n.children[W];return new oe(n.segments.concat(e.segments),e.children)}return n}function Sn(n){return n instanceof Ct}function DE(n,e,t=null,r=null){let i=Jm(n);return Ym(i,e,t,r)}function Jm(n){let e;function t(s){let o={};for(let u of s.children){let d=t(u);o[u.outlet]=d}let c=new oe(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=Km(r);return e??i}function Ym(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jc(i,i,i,t,r);let s=NE(e);if(s.toRoot())return Jc(i,i,new oe([],{}),t,r);let o=OE(s,i,n),c=o.processChildren?Pi(o.segmentGroup,o.index,s.commands):Zm(o.segmentGroup,o.index,s.commands);return Jc(i,o.segmentGroup,c,t,r)}function Eo(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Oi(n){return typeof n=="object"&&n!=null&&n.outlets}function Jc(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=Xm(n,e,t);let c=Km(Qm(o));return new Ct(c,s,i)}function Xm(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Xm(s,e,t)}),new oe(n.segments,r)}var wo=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Eo(r[0]))throw new ue(4003,!1);let i=r.find(Oi);if(i&&i!==jm(r))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NE(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wo(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new wo(t,e,r)}var or=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function OE(n,e,t){if(n.isAbsolute)return new or(e,!0,0);if(!t)return new or(e,!1,NaN);if(t.parent===null)return new or(t,!0,0);let r=Eo(n.commands[0])?0:1,i=t.segments.length-1+r;return kE(t,i,n.numberOfDoubleDots)}function kE(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ue(4005,!1);i=r.segments.length}return new or(r,!1,i-s)}function LE(n){return Oi(n[0])?n[0].outlets:{[W]:n}}function Zm(n,e,t){if(n??=new oe([],{}),n.segments.length===0&&n.hasChildren())return Pi(n,e,t);let r=xE(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new oe(n.segments.slice(0,r.pathIndex),{});return s.children[W]=new oe(n.segments.slice(r.pathIndex),n.children),Pi(s,0,i)}else return r.match&&i.length===0?new oe(n.segments,{}):r.match&&!n.hasChildren()?ru(n,e,t):r.match?Pi(n,0,i):ru(n,e,t)}function Pi(n,e,t){if(t.length===0)return new oe(n.segments,{});{let r=LE(t),i={};if(Object.keys(r).some(s=>s!==W)&&n.children[W]&&n.numberOfChildren===1&&n.children[W].segments.length===0){let s=Pi(n.children[W],e,t);return new oe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Zm(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new oe(n.segments,i)}}function xE(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Oi(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!Om(u,d,o))return s;r+=2}else{if(!Om(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ru(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Oi(s)){let u=ME(s.outlets);return new oe(r,u)}if(i===0&&Eo(t[0])){let u=n.segments[e];r.push(new An(u.path,Nm(t[0]))),i++;continue}let o=Oi(s)?s.outlets[W]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Eo(c)?(r.push(new An(o,Nm(c))),i+=2):(r.push(new An(o,{})),i++)}return new oe(r,{})}function ME(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ru(new oe([],{}),0,r))}),e}function Nm(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Om(n,e,t){return n==t.path&&dt(e,t.parameters)}var Di="imperative",we=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(we||{}),et=class{constructor(e,t){this.id=e,this.url=t}},hr=class extends et{constructor(e,t,r="imperative",i=null){super(e,t),this.type=we.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ot=class extends et{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=we.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ye=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ye||{}),To=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(To||{}),bt=class extends et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=we.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},tn=class extends et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=we.NavigationSkipped}},ki=class extends et{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=we.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ao=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=we.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iu=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=we.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},su=class extends et{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=we.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ou=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},au=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cu=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},uu=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lu=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hu=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},du=class{constructor(e){this.snapshot=e,this.type=we.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fu=class{constructor(e){this.snapshot=e,this.type=we.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ro=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=we.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Li=class{},dr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function VE(n,e){return n.providers&&!n._injector&&(n._injector=Nc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function st(n){return n.outlet||W}function UE(n,e){let t=n.filter(r=>st(r)===e);return t.push(...n.filter(r=>st(r)!==e)),t}function qi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var pu=class{get injector(){return qi(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new $i(this.rootInjector),this.attachRef=null}},$i=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pu(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(J(En))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),So=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=mu(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=mu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=gu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gu(e,this._root).map(t=>t.value)}};function mu(n,e){if(n===e.value)return e;for(let t of e.children){let r=mu(n,t);if(r)return r}return null}function gu(n,e){if(n===e.value)return[e];for(let t of e.children){let r=gu(n,t);if(r.length)return r.unshift(e),r}return[]}var Je=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function sr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bo=class extends So{constructor(e,t){super(e),this.snapshot=t,Ru(this,e)}toString(){return this.snapshot.toString()}};function eg(n){let e=FE(n),t=new Xe([new An("",{})]),r=new Xe({}),i=new Xe({}),s=new Xe({}),o=new Xe(""),c=new nn(t,r,s,o,i,W,n,e.root);return c.snapshot=e.root,new bo(new Je(c,[]),e)}function FE(n){let e={},t={},r={},i="",s=new ar([],e,r,i,t,W,n,null,{});return new Po("",new Je(s,[]))}var nn=class{constructor(e,t,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(d=>d[Bi]))??F(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>ur(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>ur(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Co(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&ng(i)&&(r.resolve[Bi]=i.title),r}var ar=class{get title(){return this.data?.[Bi]}constructor(e,t,r,i,s,o,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ur(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ur(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Po=class extends So{constructor(e,t){super(t),this.url=e,Ru(this,t)}toString(){return tg(this._root)}};function Ru(n,e){e.value._routerState=n,e.children.forEach(t=>Ru(n,t))}function tg(n){let e=n.children.length>0?` { ${n.children.map(tg).join(", ")} } `:"";return`${n.value}${e}`}function Yc(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),dt(e.params,t.params)||n.paramsSubject.next(t.params),dE(e.url,t.url)||n.urlSubject.next(t.url),dt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _u(n,e){let t=dt(n.params,e.params)&&gE(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||_u(n.parent,e.parent))}function ng(n){return typeof n.title=="string"||n.title===null}var BE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new tr,this.deactivateEvents=new tr,this.attachEvents=new tr,this.detachEvents=new tr,this.parentContexts=U($i),this.location=U(Op),this.changeDetector=U(ro),this.inputBinder=U(ko,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new yu(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=er({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xs]})}}return n})(),yu=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===nn?this.route:e===$i?this.childContexts:this.parent.get(e,t)}},ko=new ee(""),km=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ys([r.queryParams,r.params,r.data]).pipe(Ke(([s,o,c],u)=>(c=L(L(L({},s),o),c),u===0?F(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=Kp(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function jE(n,e,t){let r=xi(n,e._root,t?t._root:void 0);return new bo(r,e)}function xi(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=qE(n,e,t);return new Je(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>xi(n,c)),o}}let r=$E(e.value),i=e.children.map(s=>xi(n,s));return new Je(r,i)}}function qE(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xi(n,r,i);return xi(n,r)})}function $E(n){return new nn(new Xe(n.url),new Xe(n.params),new Xe(n.queryParams),new Xe(n.fragment),new Xe(n.data),n.outlet,n.component,n)}var Mi=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},rg="ngNavigationCancelingError";function Do(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Sn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ig(!1,Ye.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function ig(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[rg]=!0,t.cancellationCode=e,t}function zE(n){return sg(n)&&Sn(n.url)}function sg(n){return!!n&&n[rg]}var GE=(n,e,t,r)=>re(i=>(new vu(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),vu=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=sr(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=sr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=sr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=sr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hu(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Yc(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Yc(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},No=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},cr=class{constructor(e,t){this.component=e,this.route=t}};function WE(n,e,t){let r=n._root,i=e?e._root:null;return bi(r,i,t,[r.value])}function HE(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function pr(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!mp(n)?n:e.get(n):r}function bi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=sr(e);return n.children.forEach(o=>{KE(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ni(c,t.getContext(o),i)),i}function KE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=QE(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new No(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?bi(n,e,c?c.children:null,r,i):bi(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new cr(c.outlet.component,o))}else o&&Ni(e,c,i),i.canActivateChecks.push(new No(r)),s.component?bi(n,null,c?c.children:null,r,i):bi(n,null,t,r,i);return i}function QE(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rn(n.url,e.url)||!dt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_u(n,e)||!dt(n.queryParams,e.queryParams);case"paramsChange":default:return!_u(n,e)}}function Ni(n,e,t){let r=sr(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ni(o,e.children.getContext(s),t):Ni(o,null,t):Ni(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new cr(e.outlet.component,i)):t.canDeactivateChecks.push(new cr(null,i)):t.canDeactivateChecks.push(new cr(null,i))}function zi(n){return typeof n=="function"}function JE(n){return typeof n=="boolean"}function YE(n){return n&&zi(n.canLoad)}function XE(n){return n&&zi(n.canActivate)}function ZE(n){return n&&zi(n.canActivateChild)}function ew(n){return n&&zi(n.canDeactivate)}function tw(n){return n&&zi(n.canMatch)}function og(n){return n instanceof cp||n?.name==="EmptyError"}var _o=Symbol("INITIAL_VALUE");function fr(){return Ke(n=>Ys(n.map(e=>e.pipe(Jn(1),fp(_o)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===_o)return _o;if(t===!1||nw(t))return t}return!0}),St(e=>e!==_o),Jn(1)))}function nw(n){return Sn(n)||n instanceof Mi}function rw(n,e){return He(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?F(Se(L({},t),{guardsResult:!0})):iw(o,r,i,n).pipe(He(c=>c&&JE(c)?sw(r,s,n,e):F(c)),re(c=>Se(L({},t),{guardsResult:c})))})}function iw(n,e,t,r){return Oe(n).pipe(He(i=>lw(i.component,i.route,t,e,r)),Yt(i=>i!==!0,!0))}function sw(n,e,t,r){return Oe(e).pipe(Jt(i=>up(aw(i.route.parent,r),ow(i.route,r),uw(n,i.path,t),cw(n,i.route,t))),Yt(i=>i!==!0,!0))}function ow(n,e){return n!==null&&e&&e(new du(n)),F(!0)}function aw(n,e){return n!==null&&e&&e(new lu(n)),F(!0)}function cw(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>vc(()=>{let o=qi(e)??t,c=pr(s,o),u=XE(c)?c.canActivate(e,n):Ze(o,()=>c(e,n));return rn(u).pipe(Yt())}));return F(i).pipe(fr())}function uw(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>HE(o)).filter(o=>o!==null).map(o=>vc(()=>{let c=o.guards.map(u=>{let d=qi(o.node)??t,f=pr(u,d),g=ZE(f)?f.canActivateChild(r,n):Ze(d,()=>f(r,n));return rn(g).pipe(Yt())});return F(c).pipe(fr())}));return F(s).pipe(fr())}function lw(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(c=>{let u=qi(e)??i,d=pr(c,u),f=ew(d)?d.canDeactivate(n,e,t,r):Ze(u,()=>d(n,e,t,r));return rn(f).pipe(Yt())});return F(o).pipe(fr())}function hw(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let c=pr(o,n),u=YE(c)?c.canLoad(e,t):Ze(n,()=>c(e,t));return rn(u)});return F(s).pipe(fr(),ag(r))}function ag(n){return ip(ge(e=>{if(typeof e!="boolean")throw Do(n,e)}),re(e=>e===!0))}function dw(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let c=pr(o,n),u=tw(c)?c.canMatch(e,t):Ze(n,()=>c(e,t));return rn(u)});return F(s).pipe(fr(),ag(r))}var Vi=class{constructor(e){this.segmentGroup=e||null}},Ui=class extends Error{constructor(e){super(),this.urlTree=e}};function ir(n){return ui(new Vi(n))}function fw(n){return ui(new ue(4e3,!1))}function pw(n){return ui(ig(!1,Ye.GuardRejected))}var Iu=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[W])return fw(`${e.redirectTo}`);i=i.children[W]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:f,url:g,outlet:w,params:b,data:P,title:D}=i,C=Ze(s,()=>c({params:b,data:P,queryParams:u,fragment:d,routeConfig:f,url:g,outlet:w,title:D}));if(C instanceof Ct)throw new Ui(C);t=C}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ui(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ct(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new oe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ue(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Eu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mw(n,e,t,r,i){let s=cg(n,e,t);return s.matched?(r=VE(e,r),dw(r,e,t,i).pipe(re(o=>o===!0?s:L({},Eu)))):F(s)}function cg(n,e,t){if(e.path==="**")return gw(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Eu):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hE)(t,n,e);if(!i)return L({},Eu);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function gw(n){return{matched:!0,parameters:n.length>0?jm(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Lm(n,e,t,r){return t.length>0&&vw(n,t,r)?{segmentGroup:new oe(e,yw(r,new oe(t,n.children))),slicedSegments:[]}:t.length===0&&Iw(n,t,r)?{segmentGroup:new oe(n.segments,_w(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new oe(n.segments,n.children),slicedSegments:t}}function _w(n,e,t,r){let i={};for(let s of t)if(Lo(n,e,s)&&!r[st(s)]){let o=new oe([],{});i[st(s)]=o}return L(L({},r),i)}function yw(n,e){let t={};t[W]=e;for(let r of n)if(r.path===""&&st(r)!==W){let i=new oe([],{});t[st(r)]=i}return t}function vw(n,e,t){return t.some(r=>Lo(n,e,r)&&st(r)!==W)}function Iw(n,e,t){return t.some(r=>Lo(n,e,r))}function Lo(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Ew(n,e,t){return e.length===0&&!n.children[t]}var wu=class{};function ww(n,e,t,r,i,s,o="emptyOnly"){return new Tu(n,e,t,r,i,o,s).recognize()}var Tw=31,Tu=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Iu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ue(4002,`'${e.segmentGroup}'`)}recognize(){let e=Lm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new Je(r,t),s=new Po("",i),o=DE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ar([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),W,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,W,t).pipe(re(r=>({children:r,rootSnapshot:t})),Qn(r=>{if(r instanceof Ui)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Vi?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(re(o=>o instanceof Je?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Oe(s).pipe(Jt(o=>{let c=r.children[o],u=UE(t,o);return this.processSegmentGroup(e,u,c,o,i)}),dp((o,c)=>(o.push(...c),o)),Ic(null),hp(),He(o=>{if(o===null)return ir(r);let c=ug(o);return Aw(c),F(c)}))}processSegment(e,t,r,i,s,o,c){return Oe(t).pipe(Jt(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,c).pipe(Qn(d=>{if(d instanceof Vi)return F(null);throw d}))),Yt(u=>!!u),Qn(u=>{if(og(u))return Ew(r,i,s)?F(new wu):ir(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,u){return st(r)!==o&&(o===W||!Lo(i,s,r))?ir(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):ir(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:u,parameters:d,consumedSegments:f,positionalParamSegments:g,remainingSegments:w}=cg(t,i,s);if(!u)return ir(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Tw&&(this.allowRedirects=!1));let b=new ar(s,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,xm(i),st(i),i.component??i._loadedComponent??null,i,Mm(i)),P=Co(b,c,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data);let D=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,g,b,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(He(C=>this.processSegment(e,r,t,C.concat(w),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=mw(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Ke(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ke(({routes:d})=>{let f=r._loadedInjector??e,{parameters:g,consumedSegments:w,remainingSegments:b}=u,P=new ar(w,g,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,xm(r),st(r),r.component??r._loadedComponent??null,r,Mm(r)),D=Co(P,o,this.paramsInheritanceStrategy);P.params=Object.freeze(D.params),P.data=Object.freeze(D.data);let{segmentGroup:C,slicedSegments:B}=Lm(t,w,b,d);if(B.length===0&&C.hasChildren())return this.processChildren(f,d,C,P).pipe(re(x=>new Je(P,x)));if(d.length===0&&B.length===0)return F(new Je(P,[]));let G=st(r)===s;return this.processSegment(f,d,C,B,G?W:s,!0,P).pipe(re(x=>new Je(P,x instanceof Je?[x]:[])))}))):ir(t)))}getChildConfig(e,t,r){return t.children?F({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?F({routes:t._loadedRoutes,injector:t._loadedInjector}):hw(e,t,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,t).pipe(ge(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):pw(t))):F({routes:[],injector:e})}};function Aw(n){n.sort((e,t)=>e.value.outlet===W?-1:t.value.outlet===W?1:e.value.outlet.localeCompare(t.value.outlet))}function Rw(n){let e=n.value.routeConfig;return e&&e.path===""}function ug(n){let e=[],t=new Set;for(let r of n){if(!Rw(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ug(r.children);e.push(new Je(r.value,i))}return e.filter(r=>!t.has(r))}function xm(n){return n.data||{}}function Mm(n){return n.resolve||{}}function Sw(n,e,t,r,i,s){return He(o=>ww(n,e,t,r,o.extractedUrl,i,s).pipe(re(({state:c,tree:u})=>Se(L({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function bw(n,e){return He(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return F(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of lg(u))o.add(d);let c=0;return Oe(o).pipe(Jt(u=>s.has(u)?Cw(u,r,n,e):(u.data=Co(u,u.parent,n).resolve,F(void 0))),ge(()=>c++),Ec(1),He(u=>c===o.size?F(t):Qt))})}function lg(n){let e=n.children.map(t=>lg(t)).flat();return[n,...e]}function Cw(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!ng(i)&&(s[Bi]=i.title),Pw(s,n,e,r).pipe(re(o=>(n._resolvedData=o,n.data=Co(n,n.parent,t).resolve,null)))}function Pw(n,e,t,r){let i=eu(n);if(i.length===0)return F({});let s={};return Oe(i).pipe(He(o=>Dw(n[o],e,t,r).pipe(Yt(),ge(c=>{if(c instanceof Mi)throw Do(new lr,c);s[o]=c}))),Ec(1),lp(s),Qn(o=>og(o)?Qt:ui(o)))}function Dw(n,e,t,r){let i=qi(e)??r,s=pr(n,i),o=s.resolve?s.resolve(e,t):Ze(i,()=>s(e,t));return rn(o)}function Xc(n){return Ke(e=>{let t=n(e);return t?Oe(t).pipe(re(()=>e)):F(e)})}var hg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===W);return r}getResolvedTitleForRoute(t){return t.data[Bi]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>U(Nw),providedIn:"root"})}}return n})(),Nw=(()=>{class n extends hg{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(J(Cm))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gi=new ee("",{providedIn:"root",factory:()=>({})}),Ow=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=di({type:n,selectors:[["ng-component"]],standalone:!0,features:[pi],decls:1,vars:0,template:function(r,i){r&1&&Up(0,"router-outlet")},dependencies:[BE],encapsulation:2})}}return n})();function Su(n){let e=n.children&&n.children.map(Su),t=e?Se(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==W&&(t.component=Ow),t}var Fi=new ee(""),bu=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(no)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=rn(t.loadComponent()).pipe(re(dg),ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Yn(()=>{this.componentLoaders.delete(t)})),i=new mc(r,()=>new We).pipe(pc());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=kw(r,this.compiler,t,this.onLoadEndListener).pipe(Yn(()=>{this.childrenLoaders.delete(r)})),o=new mc(s,()=>new We).pipe(pc());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kw(n,e,t,r){return rn(n.loadChildren()).pipe(re(dg),He(i=>i instanceof xp||Array.isArray(i)?F(i):Oe(e.compileModuleAsync(i))),re(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(Fi,[],{optional:!0,self:!0}).flat()),{routes:o.map(Su),injector:s}}))}function Lw(n){return n&&typeof n=="object"&&"default"in n}function dg(n){return Lw(n)?n.default:n}var Cu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>U(xw),providedIn:"root"})}}return n})(),xw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fg=new ee(""),pg=new ee("");function Mw(n,e,t){let r=n.get(pg),i=n.get(qe);return n.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),Vw(n))),{onViewTransitionCreated:u}=r;return u&&Ze(n,()=>u({transition:c,from:e,to:t})),o})}function Vw(n){return new Promise(e=>{Mp({read:()=>setTimeout(e)},{injector:n})})}var Uw=new ee(""),Pu=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new We,this.transitionAbortSubject=new We,this.configLoader=U(bu),this.environmentInjector=U(En),this.urlSerializer=U(ji),this.rootContexts=U($i),this.location=U(yi),this.inputBindingEnabled=U(ko,{optional:!0})!==null,this.titleStrategy=U(hg),this.options=U(Gi,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Cu),this.createViewTransition=U(fg,{optional:!0}),this.navigationErrorHandler=U(Uw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let t=i=>this.events.next(new cu(i)),r=i=>this.events.next(new uu(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Se(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Xe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Di,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(s=>s.id!==0),re(s=>Se(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ke(s=>{let o=!1,c=!1;return F(s).pipe(Ke(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ye.SupersededByNewNavigation),Qt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Se(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new tn(u.id,this.urlSerializer.serialize(u.rawUrl),g,To.IgnoredSameUrlNavigation)),u.resolve(!1),Qt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return F(u).pipe(Ke(g=>{let w=this.transitions?.getValue();return this.events.next(new hr(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),w!==this.transitions?.getValue()?Qt:Promise.resolve(g)}),Sw(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ge(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Se(L({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let w=new Ao(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(w)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:w,source:b,restoredState:P,extras:D}=u,C=new hr(g,this.urlSerializer.serialize(w),b,P);this.events.next(C);let B=eg(this.rootComponentType).snapshot;return this.currentTransition=s=Se(L({},u),{targetSnapshot:B,urlAfterRedirects:w,extras:Se(L({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,F(s)}else{let g="";return this.events.next(new tn(u.id,this.urlSerializer.serialize(u.extractedUrl),g,To.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Qt}}),ge(u=>{let d=new iu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),re(u=>(this.currentTransition=s=Se(L({},u),{guards:WE(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),rw(this.environmentInjector,u=>this.events.next(u)),ge(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Do(this.urlSerializer,u.guardsResult);let d=new su(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),St(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ye.GuardRejected),!1)),Xc(u=>{if(u.guards.canActivateChecks.length)return F(u).pipe(ge(d=>{let f=new ou(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ke(d=>{let f=!1;return F(d).pipe(bw(this.paramsInheritanceStrategy,this.environmentInjector),ge({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Ye.NoDataFromResolver)}}))}),ge(d=>{let f=new au(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Xc(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(ge(w=>{f.component=w}),re(()=>{})));for(let w of f.children)g.push(...d(w));return g};return Ys(d(u.targetSnapshot.root)).pipe(Ic(null),Jn(1))}),Xc(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Oe(f).pipe(re(()=>s)):F(s)}),re(u=>{let d=jE(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Se(L({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),ge(()=>{this.events.next(new Li)}),GE(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Jn(1),ge({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ot(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),pp(this.transitionAbortSubject.pipe(ge(u=>{throw u}))),Yn(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",Ye.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qn(u=>{if(c=!0,sg(u))this.events.next(new bt(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),zE(u)?this.events.next(new dr(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new ki(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=Ze(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Mi){let{message:g,cancellationCode:w}=Do(this.urlSerializer,f);this.events.next(new bt(s.id,this.urlSerializer.serialize(s.extractedUrl),g,w)),this.events.next(new dr(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=t.errorHandler(u);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Qt}))}))}cancelNavigationTransition(t,r,i){let s=new bt(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Fw(n){return n!==Di}var Bw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>U(jw),providedIn:"root"})}}return n})(),Au=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},jw=(()=>{class n extends Au{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tc(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>U(qw),providedIn:"root"})}}return n})(),qw=(()=>{class n extends mg{constructor(){super(...arguments),this.location=U(yi),this.urlSerializer=U(ji),this.options=U(Gi,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Cu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ct,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=eg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof hr)this.stateMemento=this.createStateMemento();else if(t instanceof tn)this.rawUrlTree=r.initialUrl;else if(t instanceof Ao){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Li?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof bt&&(t.code===Ye.GuardRejected||t.code===Ye.NoDataFromResolver)?this.restoreHistory(r):t instanceof ki?this.restoreHistory(r,!0):t instanceof ot&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ct?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tc(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ci=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ci||{});function gg(n,e){n.events.pipe(St(t=>t instanceof ot||t instanceof bt||t instanceof ki||t instanceof tn),re(t=>t instanceof ot||t instanceof tn?Ci.COMPLETE:(t instanceof bt?t.code===Ye.Redirect||t.code===Ye.SupersededByNewNavigation:!1)?Ci.REDIRECTING:Ci.FAILED),St(t=>t!==Ci.REDIRECTING),Jn(1)).subscribe(()=>{e()})}function $w(n){throw n}var zw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ft=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(to),this.stateManager=U(mg),this.options=U(Gi,{optional:!0})||{},this.pendingTasks=U(Zs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Pu),this.urlSerializer=U(ji),this.location=U(yi),this.urlHandlingStrategy=U(Cu),this._events=new We,this.errorHandler=this.options.errorHandler||$w,this.navigated=!1,this.routeReuseStrategy=U(Bw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Fi,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(ko,{optional:!0}),this.eventsSubscription=new rp,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof bt&&r.code!==Ye.Redirect&&r.code!==Ye.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ot)this.navigated=!0;else if(r instanceof dr){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Fw(i.source)},o);this.scheduleNavigation(c,Di,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Hw(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Di,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Su),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let w=i?i.snapshot:this.routerState.snapshot.root;g=Jm(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return Ym(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Sn(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Di,null,r)}navigate(t,r={skipLocationChange:!1}){return Ww(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},zw):r===!1?i=L({},Gw):i=r,Sn(t))return Pm(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Pm(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,w)=>{c=g,u=w});let f=this.pendingTasks.add();return gg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ww(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ue(4008,!1)}function Hw(n){return!(n instanceof Li)&&!(n instanceof dr)}var Vm=(()=>{class n{constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new We,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof ot&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Sn(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Cp(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Sn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Qe(ft),Qe(nn),yp("tabindex"),Qe(Pc),Qe(Rc),Qe(_i))}}static{this.\u0275dir=er({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Fp("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Vp("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",io],skipLocationChange:[2,"skipLocationChange","skipLocationChange",io],replaceUrl:[2,"replaceUrl","replaceUrl",io],routerLink:"routerLink"},standalone:!0,features:[Lp,Xs]})}}return n})(),IP=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new tr,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof ot&&this.update()})}ngAfterContentInit(){F(this.links.changes,F(null)).pipe(li()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Oe(t).pipe(li()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Kw(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(Qe(ft),Qe(Rc),Qe(Pc),Qe(ro),Qe(Vm,8))}}static{this.\u0275dir=er({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Bp(s,Vm,5),r&2){let o;jp(o=qp())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Xs]})}}return n})();function Kw(n){return!!n.paths}var Oo=class{};var Qw=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(St(t=>t instanceof ot),Jt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Nc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Oe(i).pipe(li())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=F(null);let s=i.pipe(He(o=>o===null?F(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Oe([s,o]).pipe(li())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(J(ft),J(no),J(En),J(Oo),J(bu))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_g=new ee(""),Jw=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ot?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof tn&&t.code===To.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ro&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ro(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Pp()}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function EP(n,...e){return je([{provide:Fi,multi:!0,useValue:n},[],{provide:nn,useFactory:yg,deps:[ft]},{provide:mi,multi:!0,useFactory:vg},e.map(t=>t.\u0275providers)])}function yg(n){return n.routerState.root}function Wi(n,e){return{\u0275kind:n,\u0275providers:e}}function vg(){let n=U(it);return e=>{let t=n.get(gi);if(e!==t.components[0])return;let r=n.get(ft),i=n.get(Ig);n.get(Du)===1&&r.initialNavigation(),n.get(Eg,null,wc.Optional)?.setUpPreloading(),n.get(_g,null,wc.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ig=new ee("",{factory:()=>new We}),Du=new ee("",{providedIn:"root",factory:()=>1});function Yw(){return Wi(2,[{provide:Du,useValue:0},{provide:Lc,multi:!0,deps:[it],useFactory:e=>{let t=e.get(Yp,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ft),s=e.get(Ig);gg(i,()=>{r(!0)}),e.get(Pu).afterPreactivation=()=>(r(!0),s.closed?F(void 0):s),i.initialNavigation()}))}}])}function Xw(){return Wi(3,[{provide:Lc,multi:!0,useFactory:()=>{let e=U(ft);return()=>{e.setUpLocationChangeListener()}}},{provide:Du,useValue:2}])}var Eg=new ee("");function Zw(n){return Wi(0,[{provide:Eg,useExisting:Qw},{provide:Oo,useExisting:n}])}function eT(){return Wi(8,[km,{provide:ko,useExisting:km}])}function tT(n){let e=[{provide:fg,useValue:Mw},{provide:pg,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Wi(9,e)}var Um=new ee("ROUTER_FORROOT_GUARD"),nT=[yi,{provide:ji,useClass:lr},ft,$i,{provide:nn,useFactory:yg,deps:[ft]},bu,[]],wP=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[nT,[],{provide:Fi,multi:!0,useValue:t},{provide:Um,useFactory:oT,deps:[[ft,new _e,new gp]]},{provide:Gi,useValue:r||{}},r?.useHash?iT():sT(),rT(),r?.preloadingStrategy?Zw(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?aT(r):[],r?.bindToComponentInputs?eT().\u0275providers:[],r?.enableViewTransitions?tT().\u0275providers:[],cT()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fi,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(J(Um,8))}}static{this.\u0275mod=Zn({type:n})}static{this.\u0275inj=Xn({})}}return n})();function rT(){return{provide:_g,useFactory:()=>{let n=U(tm),e=U(ye),t=U(Gi),r=U(Pu),i=U(ji);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Jw(i,r,n,e,t)}}}function iT(){return{provide:_i,useClass:Zp}}function sT(){return{provide:_i,useClass:Xp}}function oT(n){return"guarded"}function aT(n){return[n.initialNavigation==="disabled"?Xw().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Yw().\u0275providers:[]]}var Fm=new ee("");function cT(){return[{provide:Fm,useFactory:vg},{provide:mi,multi:!0,useExisting:Fm}]}var be=class n{static isArray(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}static isObject(e,t=!0){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&(t||Object.keys(e).length!==0)}static equals(e,t,r){return r?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),s,o,c;if(r&&i){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!this.equalsByValue(e[s],t[s]))return!1;return!0}if(r!=i)return!1;var u=this.isDate(e),d=this.isDate(t);if(u!=d)return!1;if(u&&d)return e.getTime()==t.getTime();var f=e instanceof RegExp,g=t instanceof RegExp;if(f!=g)return!1;if(f&&g)return e.toString()==t.toString();var w=Object.keys(e);if(o=w.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,w[s]))return!1;for(s=o;s--!==0;)if(c=w[s],!this.equalsByValue(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")==-1)return e[t];{let r=t.split("."),i=e;for(let s=0,o=r.length;s<o;++s){if(i==null)return null;i=i[r[s]]}return i}}else return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,r){let i;e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,r,i){if(r.length>0){let s=!1;for(let o=0;o<r.length;o++)if(this.findIndexInList(r[o],i)>t){r.splice(o,0,e),s=!0;break}s||r.push(e)}else r.push(e)}static findIndexInList(e,t){let r=-1;if(t){for(let i=0;i<t.length;i++)if(t[i]==e){r=i;break}}return r}static contains(e,t){if(e!=null&&t&&t.length){for(let r of t)if(this.equals(e,r))return!0}return!1}static removeAccents(e){return e&&(e=e.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),e}static isDate(e){return Object.prototype.toString.call(e)==="[object Date]"}static isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!this.isDate(e)&&typeof e=="object"&&Object.keys(e).length===0}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,r,i=1){let s=-1,o=this.isEmpty(e),c=this.isEmpty(t);return o&&c?s=0:o?s=i:c?s=-i:typeof e=="string"&&typeof t=="string"?s=e.localeCompare(t,r,{numeric:!0}):s=e<t?-1:e>t?1:0,s}static sort(e,t,r=1,i,s=1){let o=n.compare(e,t,i,r),c=r;return(n.isEmpty(e)||n.isEmpty(t))&&(c=s===1?r:s),c*o}static merge(e,t){if(!(e==null&&t==null)){{if((e==null||typeof e=="object")&&(t==null||typeof t=="object"))return L(L({},e||{}),t||{});if((e==null||typeof e=="string")&&(t==null||typeof t=="string"))return[e||"",t||""].join(" ")}return t||e}}static isPrintableCharacter(e=""){return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)}static getItemValue(e,...t){return this.isFunction(e)?e(...t):e}static findLastIndex(e,t){let r=-1;if(this.isNotEmpty(e))try{r=e.findLastIndex(t)}catch{r=e.lastIndexOf([...e].reverse().find(t))}return r}static findLast(e,t){let r;if(this.isNotEmpty(e))try{r=e.findLast(t)}catch{r=[...e].reverse().find(t)}return r}static deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),s,o,c;if(r&&i){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!this.deepEquals(e[s],t[s]))return!1;return!0}if(r!=i)return!1;var u=e instanceof Date,d=t instanceof Date;if(u!=d)return!1;if(u&&d)return e.getTime()==t.getTime();var f=e instanceof RegExp,g=t instanceof RegExp;if(f!=g)return!1;if(f&&g)return e.toString()==t.toString();var w=Object.keys(e);if(o=w.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,w[s]))return!1;for(s=o;s--!==0;)if(c=w[s],!this.deepEquals(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}},wg=0;function RP(n="pn_id_"){return wg++,`${n}${wg}`}function uT(){let n=[],e=(s,o)=>{let c=n.length>0?n[n.length-1]:{key:s,value:o},u=c.value+(c.key===s?0:o)+2;return n.push({key:s,value:u}),u},t=s=>{n=n.filter(o=>o.value!==s)},r=()=>n.length>0?n[n.length-1].value:0,i=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:i,set:(s,o,c)=>{o&&(o.style.zIndex=String(e(s,c)))},clear:s=>{s&&(t(i(s)),s.style.zIndex="")},getCurrent:()=>r()}}var SP=uT();var Tg=["*"],lT=function(n){return n[n.ACCEPT=0]="ACCEPT",n[n.REJECT=1]="REJECT",n[n.CANCEL=2]="CANCEL",n}(lT||{}),VP=(()=>{class n{requireConfirmationSource=new We;acceptConfirmationSource=new We;requireConfirmation$=this.requireConfirmationSource.asObservable();accept=this.acceptConfirmationSource.asObservable();confirm(t){return this.requireConfirmationSource.next(t),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var ke=(()=>{class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"}return n})();var UP=(()=>{class n{filter(t,r,i,s,o){let c=[];if(t)for(let u of t)for(let d of r){let f=be.resolveFieldData(u,d);if(this.filters[s](f,i,o)){c.push(u);break}}return c}filters={startsWith:(t,r,i)=>{if(r==null||r.trim()==="")return!0;if(t==null)return!1;let s=be.removeAccents(r.toString()).toLocaleLowerCase(i);return be.removeAccents(t.toString()).toLocaleLowerCase(i).slice(0,s.length)===s},contains:(t,r,i)=>{if(r==null||typeof r=="string"&&r.trim()==="")return!0;if(t==null)return!1;let s=be.removeAccents(r.toString()).toLocaleLowerCase(i);return be.removeAccents(t.toString()).toLocaleLowerCase(i).indexOf(s)!==-1},notContains:(t,r,i)=>{if(r==null||typeof r=="string"&&r.trim()==="")return!0;if(t==null)return!1;let s=be.removeAccents(r.toString()).toLocaleLowerCase(i);return be.removeAccents(t.toString()).toLocaleLowerCase(i).indexOf(s)===-1},endsWith:(t,r,i)=>{if(r==null||r.trim()==="")return!0;if(t==null)return!1;let s=be.removeAccents(r.toString()).toLocaleLowerCase(i),o=be.removeAccents(t.toString()).toLocaleLowerCase(i);return o.indexOf(s,o.length-s.length)!==-1},equals:(t,r,i)=>r==null||typeof r=="string"&&r.trim()===""?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()===r.getTime():t==r?!0:be.removeAccents(t.toString()).toLocaleLowerCase(i)==be.removeAccents(r.toString()).toLocaleLowerCase(i),notEquals:(t,r,i)=>r==null||typeof r=="string"&&r.trim()===""?!1:t==null?!0:t.getTime&&r.getTime?t.getTime()!==r.getTime():t==r?!1:be.removeAccents(t.toString()).toLocaleLowerCase(i)!=be.removeAccents(r.toString()).toLocaleLowerCase(i),in:(t,r)=>{if(r==null||r.length===0)return!0;for(let i=0;i<r.length;i++)if(be.equals(t,r[i]))return!0;return!1},between:(t,r)=>r==null||r[0]==null||r[1]==null?!0:t==null?!1:t.getTime?r[0].getTime()<=t.getTime()&&t.getTime()<=r[1].getTime():r[0]<=t&&t<=r[1],lt:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()<r.getTime():t<r,lte:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()<=r.getTime():t<=r,gt:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()>r.getTime():t>r,gte:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()>=r.getTime():t>=r,is:(t,r,i)=>this.filters.equals(t,r,i),isNot:(t,r,i)=>this.filters.notEquals(t,r,i),before:(t,r,i)=>this.filters.lt(t,r,i),after:(t,r,i)=>this.filters.gt(t,r,i),dateIs:(t,r)=>r==null?!0:t==null?!1:t.toDateString()===r.toDateString(),dateIsNot:(t,r)=>r==null?!0:t==null?!1:t.toDateString()!==r.toDateString(),dateBefore:(t,r)=>r==null?!0:t==null?!1:t.getTime()<r.getTime(),dateAfter:(t,r)=>{if(r==null)return!0;if(t==null)return!1;let i=new Date(t);return i.setHours(0,0,0,0),i.getTime()>r.getTime()}};register(t,r){this.filters[t]=r}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FP=(()=>{class n{clickSource=new We;clickObservable=this.clickSource.asObservable();add(t){t&&this.clickSource.next(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var BP=(()=>{class n{ripple=!1;inputStyle=Dc("outlined");overlayOptions={};csp=Dc({nonce:void 0});filterMatchModeOptions={text:[ke.STARTS_WITH,ke.CONTAINS,ke.NOT_CONTAINS,ke.ENDS_WITH,ke.EQUALS,ke.NOT_EQUALS],numeric:[ke.EQUALS,ke.NOT_EQUALS,ke.LESS_THAN,ke.LESS_THAN_OR_EQUAL_TO,ke.GREATER_THAN,ke.GREATER_THAN_OR_EQUAL_TO],date:[ke.DATE_IS,ke.DATE_IS_NOT,ke.DATE_BEFORE,ke.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new We;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation=L(L({},this.translation),t),this.translationSource.next(this.translation)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=di({type:n,selectors:[["p-header"]],standalone:!0,features:[pi],ngContentSelectors:Tg,decls:1,vars:0,template:function(r,i){r&1&&(Oc(),kc(0))},encapsulation:2})}return n})(),qP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=di({type:n,selectors:[["p-footer"]],standalone:!0,features:[pi],ngContentSelectors:Tg,decls:1,vars:0,template:function(r,i){r&1&&(Oc(),kc(0))},encapsulation:2})}return n})(),$P=(()=>{class n{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(r){return new(r||n)(Qe(Dp))};static \u0275dir=er({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[0,"pTemplate","name"]},standalone:!0})}return n})(),zP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=Xn({})}return n})(),GP=(()=>{class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static NO_FILTER="noFilter";static LT="lt";static LTE="lte";static GT="gt";static GTE="gte";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static CLEAR="clear";static APPLY="apply";static MATCH_ALL="matchAll";static MATCH_ANY="matchAny";static ADD_RULE="addRule";static REMOVE_RULE="removeRule";static ACCEPT="accept";static REJECT="reject";static CHOOSE="choose";static UPLOAD="upload";static CANCEL="cancel";static PENDING="pending";static FILE_SIZE_TYPES="fileSizeTypes";static DAY_NAMES="dayNames";static DAY_NAMES_SHORT="dayNamesShort";static DAY_NAMES_MIN="dayNamesMin";static MONTH_NAMES="monthNames";static MONTH_NAMES_SHORT="monthNamesShort";static FIRST_DAY_OF_WEEK="firstDayOfWeek";static TODAY="today";static WEEK_HEADER="weekHeader";static WEAK="weak";static MEDIUM="medium";static STRONG="strong";static PASSWORD_PROMPT="passwordPrompt";static EMPTY_MESSAGE="emptyMessage";static EMPTY_FILTER_MESSAGE="emptyFilterMessage";static SHOW_FILTER_MENU="showFilterMenu";static HIDE_FILTER_MENU="hideFilterMenu";static SELECTION_MESSAGE="selectionMessage";static ARIA="aria";static SELECT_COLOR="selectColor";static BROWSE_FILES="browseFiles"}return n})();var Rg=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hT=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Sg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,w=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(w=64)),r.push(t[f],t[g],t[w],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rg(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new Ou;let w=s<<2|c>>4;if(r.push(w),d!==64){let b=c<<4&240|d>>2;if(r.push(b),g!==64){let P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ou=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dT=function(n){let e=Rg(n);return Sg.encodeByteArray(e,!0)},Hi=function(n){return dT(n).replace(/\./g,"")},Lu=function(n){try{return Sg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var pT=()=>fT().__FIREBASE_DEFAULTS__,mT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Lu(n[1]);return e&&JSON.parse(e)},Mo=()=>{try{return pT()||mT()||gT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xu=n=>{var e,t;return(t=(e=Mo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Vo=n=>{let e=xu(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Mu=()=>{var n;return(n=Mo())===null||n===void 0?void 0:n.config},Vu=n=>{var e;return(e=Mo())===null||e===void 0?void 0:e[`_${n}`]};var xo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Uo(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hi(JSON.stringify(t)),Hi(JSON.stringify(o)),""].join(".")}function Te(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function _T(){var n;let e=(n=Mo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cg(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pg(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ng(){let n=Te();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Og(){return!_T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uu(){try{return typeof indexedDB=="object"}catch{return!1}}function kg(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var yT="FirebaseError",Be=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pt.prototype.create)}},Pt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vT(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Be(i,c,r)}};function vT(n,e){return n.replace(IT,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var IT=/\{\$([^}]+)}/g;function Lg(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Ag(s)&&Ag(o)){if(!bn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Ag(n){return n!==null&&typeof n=="object"}function Ki(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xg(n,e){let t=new ku(n,e);return t.subscribe.bind(t)}var ku=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ET(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nu),i.error===void 0&&(i.error=Nu),i.complete===void 0&&(i.complete=Nu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ET(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nu(){}var KP=4*60*60*1e3;function $e(n){return n&&n._delegate?n._delegate:n}var ze=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Cn="[DEFAULT]";var Fu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new xo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:Cn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Cn){return this.instances.has(e)}getOptions(e=Cn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wT(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cn){return this.component?this.component.multipleInstances?e:Cn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wT(n){return n===Cn?void 0:n}function TT(n){return n.instantiationMode==="EAGER"}var Fo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Fu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var AT=[],Y=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Y||{}),RT={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ST=Y.INFO,bT={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},CT=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bT[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sn=class{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=CT,this._userLogHandler=null,AT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}};var PT=(n,e)=>e.some(t=>n instanceof t),Mg,Vg;function DT(){return Mg||(Mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NT(){return Vg||(Vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ug=new WeakMap,ju=new WeakMap,Fg=new WeakMap,Bu=new WeakMap,$u=new WeakMap;function OT(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(pt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Ug.set(t,n)}).catch(()=>{}),$u.set(e,n),e}function kT(n){if(ju.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ju.set(n,e)}var qu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ju.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Fg.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bg(n){qu=n(qu)}function LT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Bo(this),e,...t);return Fg.set(r,e.sort?e.sort():[e]),pt(r)}:NT().includes(n)?function(...e){return n.apply(Bo(this),e),pt(Ug.get(this))}:function(...e){return pt(n.apply(Bo(this),e))}}function xT(n){return typeof n=="function"?LT(n):(n instanceof IDBTransaction&&kT(n),PT(n,DT())?new Proxy(n,qu):n)}function pt(n){if(n instanceof IDBRequest)return OT(n);if(Bu.has(n))return Bu.get(n);let e=xT(n);return e!==n&&(Bu.set(n,e),$u.set(e,n)),e}var Bo=n=>$u.get(n);function qg(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=pt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(pt(o.result),u.oldVersion,u.newVersion,pt(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var MT=["get","getKey","getAll","getAllKeys","count"],VT=["put","add","delete","clear"],zu=new Map;function jg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zu.get(e))return zu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=VT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MT.includes(t)))return;let s=function(o,...c){return v(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return zu.set(e,s),s}Bg(n=>Se(L({},n),{get:(e,t,r)=>jg(e,t)||n.get(e,t,r),has:(e,t)=>!!jg(e,t)||n.has(e,t)}));var Wu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UT(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function UT(n){let e=n.getComponent();return e?.type==="VERSION"}var Hu="@firebase/app",$g="0.10.13";var Dt=new sn("@firebase/app"),FT="@firebase/app-compat",BT="@firebase/analytics-compat",jT="@firebase/analytics",qT="@firebase/app-check-compat",$T="@firebase/app-check",zT="@firebase/auth",GT="@firebase/auth-compat",WT="@firebase/database",HT="@firebase/data-connect",KT="@firebase/database-compat",QT="@firebase/functions",JT="@firebase/functions-compat",YT="@firebase/installations",XT="@firebase/installations-compat",ZT="@firebase/messaging",eA="@firebase/messaging-compat",tA="@firebase/performance",nA="@firebase/performance-compat",rA="@firebase/remote-config",iA="@firebase/remote-config-compat",sA="@firebase/storage",oA="@firebase/storage-compat",aA="@firebase/firestore",cA="@firebase/vertexai-preview",uA="@firebase/firestore-compat",lA="firebase",hA="10.14.1";var Ku="[DEFAULT]",dA={[Hu]:"fire-core",[FT]:"fire-core-compat",[jT]:"fire-analytics",[BT]:"fire-analytics-compat",[$T]:"fire-app-check",[qT]:"fire-app-check-compat",[zT]:"fire-auth",[GT]:"fire-auth-compat",[WT]:"fire-rtdb",[HT]:"fire-data-connect",[KT]:"fire-rtdb-compat",[QT]:"fire-fn",[JT]:"fire-fn-compat",[YT]:"fire-iid",[XT]:"fire-iid-compat",[ZT]:"fire-fcm",[eA]:"fire-fcm-compat",[tA]:"fire-perf",[nA]:"fire-perf-compat",[rA]:"fire-rc",[iA]:"fire-rc-compat",[sA]:"fire-gcs",[oA]:"fire-gcs-compat",[aA]:"fire-fst",[uA]:"fire-fst-compat",[cA]:"fire-vertex","fire-js":"fire-js",[lA]:"fire-js-all"};var Qi=new Map,fA=new Map,Qu=new Map;function zg(n,e){try{n.container.addComponent(e)}catch(t){Dt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mt(n){let e=n.name;if(Qu.has(e))return Dt.debug(`There were multiple attempts to register component ${e}.`),!1;Qu.set(e,n);for(let t of Qi.values())zg(t,n);for(let t of fA.values())zg(t,n);return!0}function Pn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nt(n){return n.settings!==void 0}var pA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},on=new Pt("app","Firebase",pA);var Ju=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw on.create("app-deleted",{appName:this._name})}};var gt=hA;function Zu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ku,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw on.create("bad-app-name",{appName:String(i)});if(t||(t=Mu()),!t)throw on.create("no-options");let s=Qi.get(i);if(s){if(bn(t,s.options)&&bn(r,s.config))return s;throw on.create("duplicate-app",{appName:i})}let o=new Fo(i);for(let u of Qu.values())o.addComponent(u);let c=new Ju(t,r,o);return Qi.set(i,c),c}function an(n=Ku){let e=Qi.get(n);if(!e&&n===Ku&&Mu())return Zu();if(!e)throw on.create("no-app",{appName:n});return e}function jo(){return Array.from(Qi.values())}function le(n,e,t){var r;let i=(r=dA[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dt.warn(c.join(" "));return}mt(new ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var mA="firebase-heartbeat-database",gA=1,Ji="firebase-heartbeat-store",Gu=null;function Kg(){return Gu||(Gu=qg(mA,gA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ji)}catch(t){console.warn(t)}}}}).catch(n=>{throw on.create("idb-open",{originalErrorMessage:n.message})})),Gu}function _A(n){return v(this,null,function*(){try{let t=(yield Kg()).transaction(Ji),r=yield t.objectStore(Ji).get(Qg(n));return yield t.done,r}catch(e){if(e instanceof Be)Dt.warn(e.message);else{let t=on.create("idb-get",{originalErrorMessage:e?.message});Dt.warn(t.message)}}})}function Gg(n,e){return v(this,null,function*(){try{let r=(yield Kg()).transaction(Ji,"readwrite");yield r.objectStore(Ji).put(e,Qg(n)),yield r.done}catch(t){if(t instanceof Be)Dt.warn(t.message);else{let r=on.create("idb-set",{originalErrorMessage:t?.message});Dt.warn(r.message)}}})}function Qg(n){return`${n.name}!${n.options.appId}`}var yA=1024,vA=30*24*60*60*1e3,Yu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Xu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=vA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dt.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Wg(),{heartbeatsToSend:r,unsentEntries:i}=IA(this._heartbeatsCache.heartbeats),s=Hi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Dt.warn(t),""}})}};function Wg(){return new Date().toISOString().substring(0,10)}function IA(n,e=yA){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hg(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Hg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Xu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Uu()?kg().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _A(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Hg(n){return Hi(JSON.stringify({version:2,heartbeats:n})).length}function EA(n){mt(new ze("platform-logger",e=>new Wu(e),"PRIVATE")),mt(new ze("heartbeat",e=>new Yu(e),"PRIVATE")),le(Hu,$g,n),le(Hu,$g,"esm2017"),le("fire-js","")}EA("");var wA="firebase",TA="10.14.1";le(wA,TA,"app");var Ot=new eo("ANGULARFIRE2_VERSION");function gr(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Nn=(n,e)=>{let t=e?[e]:jo(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},cn=class{constructor(){return Nn(AA)}},AA="app-check";function mr(){}var qo=class{zone;delegate;constructor(e,t=op){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},el=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mr,{},mr,mr)),t.pipe(ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},un=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new qo(Zone.current)),this.insideAngular=t.run(()=>new qo(Zone.current,sp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(J(ye))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $o(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function RA(n){return $o().ngZone.runOutsideAngular(()=>n())}function Dn(n){return $o().ngZone.run(()=>n())}function SA(n){return bA($o())(n)}function bA(n){return function(t){return t=t.lift(new el(n.ngZone)),t.pipe(yc(n.outsideAngular),_c(n.insideAngular))}}var CA=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Dn(()=>n.apply(void 0,r))},tt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Dn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mr,{},mr,mr))),r[s]=CA(r[s],t));let i=RA(()=>n.apply(this,r));if(!e)if(i instanceof Kn){let s=$o();return i.pipe(yc(s.outsideAngular),_c(s.insideAngular))}else return Dn(()=>i);return i instanceof Kn?i.pipe(SA):i instanceof Promise?Dn(()=>new Promise((s,o)=>i.then(c=>Dn(()=>s(c)),c=>Dn(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Dn(()=>i)};var at=class{constructor(e){return e}},kt=class{constructor(){return jo()}};function PA(n){return n&&n.length===1?n[0]:new at(an())}var tl=new ee("angularfire2._apps"),DA={provide:at,useFactory:PA,deps:[[new _e,tl]]},NA={provide:kt,deps:[[new _e,tl]]};function OA(n){return(e,t)=>{let r=t.get(lt);le("angularfire",Ot.full,"core"),le("angularfire",Ot.full,"app"),le("angular",$p.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new at(i)}}function LD(n,...e){return je([DA,NA,{provide:tl,useFactory:OA(n),multi:!0,deps:[ye,it,un,...e]}])}var xD=tt(Zu,!0);function l_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var h_=l_,d_=new Pt("auth","Firebase",l_());var Qo=new sn("@firebase/auth");function kA(n,...e){Qo.logLevel<=Y.WARN&&Qo.warn(`Auth (${gt}): ${n}`,...e)}function Go(n,...e){Qo.logLevel<=Y.ERROR&&Qo.error(`Auth (${gt}): ${n}`,...e)}function hn(n,...e){throw El(n,...e)}function kn(n,...e){return El(n,...e)}function f_(n,e,t){let r=Object.assign(Object.assign({},h_()),{[e]:t});return new Pt("auth","Firebase",r).create(e,{appName:n.name})}function On(n){return f_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function El(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return d_.create(n,...e)}function $(n,e,...t){if(!n)throw El(e,...t)}function Lt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Go(e),new Error(e)}function dn(n,e){n||Lt(e)}function sl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function LA(){return Jg()==="http:"||Jg()==="https:"}function Jg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function xA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LA()||Pg()||"connection"in navigator)?navigator.onLine:!0}function MA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ln=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,dn(t>e,"Short delay should be less than long delay!"),this.isMobile=bg()||Dg()}get(){return xA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wl(n,e){dn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Jo=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var VA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var UA=new Ln(3e4,6e4);function Tl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function yr(s,o,c,u){return v(this,arguments,function*(n,e,t,r,i={}){return p_(n,i,()=>v(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=Ki(Object.assign({key:n.config.apiKey},f)).slice(1),w=yield n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:w},d);return Cg()||(b.referrerPolicy="no-referrer"),Jo.fetch()(m_(n,n.config.apiHost,t,g),b)}))})}function p_(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},VA),e);try{let i=new ol(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw zo(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zo(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw zo(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw zo(n,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw f_(n,f,d);hn(n,f)}}catch(i){if(i instanceof Be)throw i;hn(n,"network-request-failed",{message:String(i)})}})}function FA(s,o,c,u){return v(this,arguments,function*(n,e,t,r,i={}){let d=yield yr(n,e,t,r,i);return"mfaPendingCredential"in d&&hn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function m_(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?wl(n.config,i):`${n.config.apiScheme}://${i}`}var ol=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),UA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function zo(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=kn(n,e,r);return i.customData._tokenResponse=t,i}function BA(n,e){return v(this,null,function*(){return yr(n,"POST","/v1/accounts:delete",e)})}function g_(n,e){return v(this,null,function*(){return yr(n,"POST","/v1/accounts:lookup",e)})}function Yi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Al(n,e=!1){return v(this,null,function*(){let t=$e(n),r=yield t.getIdToken(e),i=Rl(r);$(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Yi(nl(i.auth_time)),issuedAtTime:Yi(nl(i.iat)),expirationTime:Yi(nl(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function nl(n){return Number(n)*1e3}function Rl(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Go("JWT malformed, contained fewer than 3 sections"),null;try{let i=Lu(t);return i?JSON.parse(i):(Go("Failed to decode base64 JWT payload"),null)}catch(i){return Go("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Yg(n){let e=Rl(n);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Zi(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Be&&jA(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function jA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var al=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var es=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yi(this.lastLoginAt),this.creationTime=Yi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Yo(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Zi(n,g_(t,{idToken:r}));$(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?__(s.providerUserInfo):[],c=qA(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new es(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function Sl(n){return v(this,null,function*(){let e=$e(n);yield Yo(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function qA(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function __(n){return n.map(e=>{var{providerId:t}=e,r=gc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function $A(n,e){return v(this,null,function*(){let t=yield p_(n,{},()=>v(this,null,function*(){let r=Ki({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=m_(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Jo.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function zA(n,e){return v(this,null,function*(){return yr(n,"POST","/v2/accounts:revokeToken",Tl(n,e))})}var Xi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,"internal-error");let t=Yg(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield $A(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&($(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&($(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Lt("not implemented")}};function ln(n,e){$(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var _r=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=gc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new al(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new es(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Zi(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Al(this,e)}reload(){return Sl(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Yo(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Nt(this.auth.app))return Promise.reject(On(this.auth));let e=yield this.getIdToken();return yield Zi(this,BA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,u,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,D=(c=t.tenantId)!==null&&c!==void 0?c:void 0,C=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,B=(d=t.createdAt)!==null&&d!==void 0?d:void 0,G=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:q,isAnonymous:se,providerData:Q,stsTokenManager:E}=t;$(x&&E,e,"internal-error");let m=Xi.fromJSON(this.name,E);$(typeof x=="string",e,"internal-error"),ln(g,e.name),ln(w,e.name),$(typeof q=="boolean",e,"internal-error"),$(typeof se=="boolean",e,"internal-error"),ln(b,e.name),ln(P,e.name),ln(D,e.name),ln(C,e.name),ln(B,e.name),ln(G,e.name);let y=new n({uid:x,auth:e,email:w,emailVerified:q,displayName:g,isAnonymous:se,photoURL:P,phoneNumber:b,tenantId:D,stsTokenManager:m,createdAt:B,lastLoginAt:G});return Q&&Array.isArray(Q)&&(y.providerData=Q.map(I=>Object.assign({},I))),C&&(y._redirectEventId=C),y}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Xi;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Yo(s),s})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];$(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?__(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Xi;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new es(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var Xg=new Map;function xt(n){dn(n instanceof Function,"Expected a class definition");let e=Xg.get(n);return e?(dn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Xg.set(n,e),e)}var GA=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),cl=GA;function Wo(n,e,t){return`firebase:${n}:${e}:${t}`}var Xo=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Wo(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wo("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?_r._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(xt(cl),e,r);let i=(yield Promise.all(t.map(d=>v(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||xt(cl),o=Wo(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let g=_r._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>v(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function Zg(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T_(e))return"Blackberry";if(A_(e))return"Webos";if(v_(e))return"Safari";if((e.includes("chrome/")||I_(e))&&!e.includes("edge/"))return"Chrome";if(w_(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function y_(n=Te()){return/firefox\//i.test(n)}function v_(n=Te()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I_(n=Te()){return/crios\//i.test(n)}function E_(n=Te()){return/iemobile/i.test(n)}function w_(n=Te()){return/android/i.test(n)}function T_(n=Te()){return/blackberry/i.test(n)}function A_(n=Te()){return/webos/i.test(n)}function bl(n=Te()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WA(n=Te()){var e;return bl(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HA(){return Ng()&&document.documentMode===10}function R_(n=Te()){return bl(n)||w_(n)||A_(n)||T_(n)||/windows phone/i.test(n)||E_(n)}function S_(n,e=[]){let t;switch(n){case"Browser":t=Zg(Te());break;case"Worker":t=`${Zg(Te())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gt}/${r}`}var ul=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function KA(t){return v(this,arguments,function*(n,e={}){return yr(n,"GET","/v2/passwordPolicy",Tl(n,e))})}var QA=6,ll=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:QA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var hl=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zo(this),this.idTokenSubscription=new Zo(this),this.beforeStateQueue=new ul(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xt(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Xo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield g_(this,{idToken:e}),r=yield _r._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Nt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Yo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MA()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Nt(this.app))return Promise.reject(On(this));let t=e?$e(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Nt(this.app)?Promise.reject(On(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nt(this.app)?Promise.reject(On(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(xt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield KA(this),t=new ll(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield zA(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&xt(e)||this._popupRedirectResolver;$(t,this,"argument-error"),this.redirectPersistenceManager=yield Xo.create(this,[xt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if($(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&kA(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Cl(n){return $e(n)}var Zo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xg(t=>this.observer=t)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Pl={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JA(n){Pl=n}function YA(n){return Pl.loadJS(n)}function XA(){return Pl.gapiScript}function b_(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Dl(n,e){let t=Pn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(bn(s,e??{}))return i;hn(i,"already-initialized")}return t.initialize({options:e})}function ZA(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Nl(n,e,t){let r=Cl(n);$(r._canInitEmulator,r,"emulator-config-failed"),$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=C_(e),{host:o,port:c}=eR(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||tR()}function C_(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eR(n){let e=C_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:e_(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:e_(o)}}}function e_(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function tR(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ea=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lt("not implemented")}_getIdTokenResponse(e){return Lt("not implemented")}_linkToIdToken(e,t){return Lt("not implemented")}_getReauthenticationResolver(e){return Lt("not implemented")}};function rl(n,e){return v(this,null,function*(){return FA(n,"POST","/v1/accounts:signInWithIdp",Tl(n,e))})}var ta=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var dl=class extends ta{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ts=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let s=yield _r._fromIdTokenResponse(e,r,i),o=t_(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=t_(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function t_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var fl=class n extends Be{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function P_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fl._fromErrorAndOperation(n,s,e,r):s})}function nR(n,e,t=!1){return v(this,null,function*(){let r=yield Zi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ts._forOperation(n,"link",r)})}function rR(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Nt(r.app))return Promise.reject(On(r));let i="reauthenticate";try{let s=yield Zi(n,P_(r,i,e,n),t);$(s.idToken,r,"internal-error");let o=Rl(s.idToken);$(o,r,"internal-error");let{sub:c}=o;return $(n.uid===c,r,"user-mismatch"),ts._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&hn(r,"user-mismatch"),s}})}function iR(n,e,t=!1){return v(this,null,function*(){if(Nt(n.app))return Promise.reject(On(n));let r="signIn",i=yield P_(n,r,e),s=yield ts._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Ol(n,e,t,r){return $e(n).onIdTokenChanged(e,t,r)}function kl(n,e,t){return $e(n).beforeAuthStateChanged(e,t)}var na="__sak";var ra=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(na,"1"),this.storage.removeItem(na),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var sR=1e3,oR=10,aR=(()=>{class n extends ra{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);HA()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,oR):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},sR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Kt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Kt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Kt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),D_=aR;var cR=(()=>{class n extends ra{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ll=cR;function uR(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var lR=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(f=>v(this,null,function*(){return f(r.origin,o)})),d=yield uR(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function N_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var pl=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let d=N_("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let w=g;if(w.data.eventId===d)switch(w.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(w.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function _t(){return window}function hR(n){_t().location.href=n}function O_(){return typeof _t().WorkerGlobalScope<"u"&&typeof _t().importScripts=="function"}function dR(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function fR(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pR(){return O_()?self:null}var k_="firebaseLocalStorageDb",mR=1,ia="firebaseLocalStorage",L_="fbase_key",xn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function oa(n,e){return n.transaction([ia],e?"readwrite":"readonly").objectStore(ia)}function gR(){let n=indexedDB.deleteDatabase(k_);return new xn(n).toPromise()}function ml(){let n=indexedDB.open(k_,mR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ia,{keyPath:L_})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(ia)?e(r):(r.close(),yield gR(),e(yield ml()))}))})}function n_(n,e,t){return v(this,null,function*(){let r=oa(n,!0).put({[L_]:e,value:t});return new xn(r).toPromise()})}function _R(n,e){return v(this,null,function*(){let t=oa(n,!1).get(e),r=yield new xn(t).toPromise();return r===void 0?null:r.value})}function r_(n,e){let t=oa(n,!0).delete(e);return new xn(t).toPromise()}var yR=800,vR=3,IR=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield ml(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>vR)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return O_()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=lR._getInstance(pR()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield dR(),!this.activeServiceWorker)return;this.sender=new pl(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||fR()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield ml();return yield n_(t,na,"1"),yield r_(t,na),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>n_(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>_R(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>r_(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=oa(s,!1).getAll();return new xn(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),x_=IR;var GD=b_("rcb"),WD=new Ln(3e4,6e4);function ER(n,e){return e?xt(e):($(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ns=class extends ea{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function wR(n){return iR(n.auth,new ns(n),n.bypassAuthState)}function TR(n){let{auth:e,user:t}=n;return $(t,e,"internal-error"),rR(t,new ns(n),n.bypassAuthState)}function AR(n){return v(this,null,function*(){let{auth:e,user:t}=n;return $(t,e,"internal-error"),nR(t,new ns(n),n.bypassAuthState)})}var gl=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wR;case"linkViaPopup":case"linkViaRedirect":return AR;case"reauthViaPopup":case"reauthViaRedirect":return TR;default:hn(this.auth,"internal-error")}}resolve(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var HD=new Ln(2e3,1e4);var RR="pendingRedirect",Ho=new Map,_l=class n extends gl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Ho.get(this.auth._key());if(!e){try{let r=(yield SR(this.resolver,this.auth))?yield Kt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ho.set(this.auth._key(),e)}return this.bypassAuthState||Ho.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Kt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Kt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function SR(n,e){return v(this,null,function*(){let t=PR(e),r=CR(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function bR(n,e){Ho.set(n._key(),e)}function CR(n){return xt(n._redirectPersistence)}function PR(n){return Wo(RR,n.config.apiKey,n.name)}function DR(n,e,t=!1){return v(this,null,function*(){if(Nt(n.app))return Promise.reject(On(n));let r=Cl(n),i=ER(r,e),o=yield new _l(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var NR=10*60*1e3,yl=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!M_(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(kn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NR&&this.cachedEventUids.clear(),this.cachedEventUids.has(i_(e))}saveEventToCache(e){this.cachedEventUids.add(i_(e)),this.lastProcessedEventTime=Date.now()}};function i_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function M_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function OR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(n);default:return!1}}function kR(t){return v(this,arguments,function*(n,e={}){return yr(n,"GET","/v1/projects",e)})}var LR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xR=/^https?/;function MR(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield kR(n);for(let t of e)try{if(VR(t))return}catch{}hn(n,"unauthorized-domain")})}function VR(n){let e=sl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!xR.test(t))return!1;if(LR.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var UR=new Ln(3e4,6e4);function s_(){let n=_t().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function FR(n){return new Promise((e,t)=>{var r,i,s;function o(){s_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s_(),t(kn(n,"network-request-failed"))},timeout:UR.get()})}if(!((i=(r=_t().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_t().gapi)===null||s===void 0)&&s.load)o();else{let c=b_("iframefcb");return _t()[c]=()=>{gapi.load?o():t(kn(n,"network-request-failed"))},YA(`${XA()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Ko=null,e})}var Ko=null;function BR(n){return Ko=Ko||FR(n),Ko}var jR=new Ln(5e3,15e3),qR="__/auth/iframe",$R="emulator/auth/iframe",zR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WR(n){let e=n.config;$(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?wl(e,$R):`https://${n.config.authDomain}/${qR}`,r={apiKey:e.apiKey,appName:n.name,v:gt},i=GR.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ki(r).slice(1)}`}function HR(n){return v(this,null,function*(){let e=yield BR(n),t=_t().gapi;return $(t,n,"internal-error"),e.open({where:document.body,url:WR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zR,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=kn(n,"network-request-failed"),c=_t().setTimeout(()=>{s(o)},jR.get());function u(){_t().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var KR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QR=500,JR=600,YR="_blank",XR="http://localhost",sa=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ZR(n,e,t,r=QR,i=JR){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},KR),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Te().toLowerCase();t&&(c=I_(d)?YR:t),y_(d)&&(e=e||XR,u.scrollbars="yes");let f=Object.entries(u).reduce((w,[b,P])=>`${w}${b}=${P},`,"");if(WA(d)&&c!=="_self")return eS(e||"",c),new sa(null);let g=window.open(e||"",c,f);$(g,n,"popup-blocked");try{g.focus()}catch{}return new sa(g)}function eS(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var tS="__/auth/handler",nS="emulator/auth/handler",rS=encodeURIComponent("fac");function o_(n,e,t,r,i,s){return v(this,null,function*(){$(n.config.authDomain,n,"auth-domain-config-required"),$(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gt,eventId:i};if(e instanceof ta){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Lg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof dl){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),d=u?`#${rS}=${encodeURIComponent(u)}`:"";return`${iS(n)}?${Ki(c).slice(1)}${d}`})}function iS({config:n}){return n.emulator?wl(n,nS):`https://${n.authDomain}/${tS}`}var il="webStorageSupport",vl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ll,this._completeRedirectFn=DR,this._overrideRedirectResult=bR}_openPopup(e,t,r,i){return v(this,null,function*(){var s;dn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield o_(e,t,r,sl(),i);return ZR(e,o,N_())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield o_(e,t,r,sl(),i);return hR(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(dn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield HR(e),r=new yl(e);return t.register("authEvent",i=>($(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(il,{type:il},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[il];o!==void 0&&t(!!o),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return R_()||v_()||bl()}},V_=vl;var a_="@firebase/auth",c_="1.7.9";var Il=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function sS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oS(n){mt(new ze("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;$(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S_(n)},d=new hl(r,i,s,u);return ZA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),mt(new ze("auth-internal",e=>{let t=Cl(e.getProvider("auth").getImmediate());return(r=>new Il(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),le(a_,c_,sS(n)),le(a_,c_,"esm2017")}var aS=5*60,cS=Vu("authIdTokenMaxAge")||aS,u_=null,uS=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cS)return;let i=t?.token;u_!==i&&(u_=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function xl(n=an()){let e=Pn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Dl(n,{popupRedirectResolver:V_,persistence:[x_,D_,Ll]}),r=Vu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=uS(s.toString());kl(t,o,()=>o(t.currentUser)),Ol(t,c=>o(c))}}let i=xu("auth");return i&&Nl(t,`http://${i}`),t}function lS(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JA({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=kn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",lS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oS("Browser");var U_="auth",rs=class{constructor(e){return e}},Mn=class{constructor(){return Nn(U_)}};var Ml=new ee("angularfire2.auth-instances");function ib(n,e){let t=gr(U_,n,e);return t&&new rs(t)}function sb(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rs(r)}}var ob={provide:Mn,deps:[[new _e,Ml]]},ab={provide:rs,useFactory:ib,deps:[[new _e,Ml],at]};function kN(n,...e){return le("angularfire",Ot.full,"auth"),je([ab,ob,{provide:Ml,useFactory:sb(n),multi:!0,deps:[ye,it,un,kt,[new _e,cn],...e]}])}var LN=tt(xl,!0);var F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B_={};var fn,Vl;(function(){var n;function e(E,m){function y(){}y.prototype=m.prototype,E.D=m.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(I,T,R){for(var _=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)_[Tt-2]=arguments[Tt];return m.prototype[T].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,y){y||(y=0);var I=Array(16);if(typeof m=="string")for(var T=0;16>T;++T)I[T]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(T=0;16>T;++T)I[T]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=E.g[0],y=E.g[1],T=E.g[2];var R=E.g[3],_=m+(R^y&(T^R))+I[0]+3614090360&4294967295;m=y+(_<<7&4294967295|_>>>25),_=R+(T^m&(y^T))+I[1]+3905402710&4294967295,R=m+(_<<12&4294967295|_>>>20),_=T+(y^R&(m^y))+I[2]+606105819&4294967295,T=R+(_<<17&4294967295|_>>>15),_=y+(m^T&(R^m))+I[3]+3250441966&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(R^y&(T^R))+I[4]+4118548399&4294967295,m=y+(_<<7&4294967295|_>>>25),_=R+(T^m&(y^T))+I[5]+1200080426&4294967295,R=m+(_<<12&4294967295|_>>>20),_=T+(y^R&(m^y))+I[6]+2821735955&4294967295,T=R+(_<<17&4294967295|_>>>15),_=y+(m^T&(R^m))+I[7]+4249261313&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(R^y&(T^R))+I[8]+1770035416&4294967295,m=y+(_<<7&4294967295|_>>>25),_=R+(T^m&(y^T))+I[9]+2336552879&4294967295,R=m+(_<<12&4294967295|_>>>20),_=T+(y^R&(m^y))+I[10]+4294925233&4294967295,T=R+(_<<17&4294967295|_>>>15),_=y+(m^T&(R^m))+I[11]+2304563134&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(R^y&(T^R))+I[12]+1804603682&4294967295,m=y+(_<<7&4294967295|_>>>25),_=R+(T^m&(y^T))+I[13]+4254626195&4294967295,R=m+(_<<12&4294967295|_>>>20),_=T+(y^R&(m^y))+I[14]+2792965006&4294967295,T=R+(_<<17&4294967295|_>>>15),_=y+(m^T&(R^m))+I[15]+1236535329&4294967295,y=T+(_<<22&4294967295|_>>>10),_=m+(T^R&(y^T))+I[1]+4129170786&4294967295,m=y+(_<<5&4294967295|_>>>27),_=R+(y^T&(m^y))+I[6]+3225465664&4294967295,R=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(R^m))+I[11]+643717713&4294967295,T=R+(_<<14&4294967295|_>>>18),_=y+(R^m&(T^R))+I[0]+3921069994&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(T^R&(y^T))+I[5]+3593408605&4294967295,m=y+(_<<5&4294967295|_>>>27),_=R+(y^T&(m^y))+I[10]+38016083&4294967295,R=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(R^m))+I[15]+3634488961&4294967295,T=R+(_<<14&4294967295|_>>>18),_=y+(R^m&(T^R))+I[4]+3889429448&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(T^R&(y^T))+I[9]+568446438&4294967295,m=y+(_<<5&4294967295|_>>>27),_=R+(y^T&(m^y))+I[14]+3275163606&4294967295,R=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(R^m))+I[3]+4107603335&4294967295,T=R+(_<<14&4294967295|_>>>18),_=y+(R^m&(T^R))+I[8]+1163531501&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(T^R&(y^T))+I[13]+2850285829&4294967295,m=y+(_<<5&4294967295|_>>>27),_=R+(y^T&(m^y))+I[2]+4243563512&4294967295,R=m+(_<<9&4294967295|_>>>23),_=T+(m^y&(R^m))+I[7]+1735328473&4294967295,T=R+(_<<14&4294967295|_>>>18),_=y+(R^m&(T^R))+I[12]+2368359562&4294967295,y=T+(_<<20&4294967295|_>>>12),_=m+(y^T^R)+I[5]+4294588738&4294967295,m=y+(_<<4&4294967295|_>>>28),_=R+(m^y^T)+I[8]+2272392833&4294967295,R=m+(_<<11&4294967295|_>>>21),_=T+(R^m^y)+I[11]+1839030562&4294967295,T=R+(_<<16&4294967295|_>>>16),_=y+(T^R^m)+I[14]+4259657740&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(y^T^R)+I[1]+2763975236&4294967295,m=y+(_<<4&4294967295|_>>>28),_=R+(m^y^T)+I[4]+1272893353&4294967295,R=m+(_<<11&4294967295|_>>>21),_=T+(R^m^y)+I[7]+4139469664&4294967295,T=R+(_<<16&4294967295|_>>>16),_=y+(T^R^m)+I[10]+3200236656&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(y^T^R)+I[13]+681279174&4294967295,m=y+(_<<4&4294967295|_>>>28),_=R+(m^y^T)+I[0]+3936430074&4294967295,R=m+(_<<11&4294967295|_>>>21),_=T+(R^m^y)+I[3]+3572445317&4294967295,T=R+(_<<16&4294967295|_>>>16),_=y+(T^R^m)+I[6]+76029189&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(y^T^R)+I[9]+3654602809&4294967295,m=y+(_<<4&4294967295|_>>>28),_=R+(m^y^T)+I[12]+3873151461&4294967295,R=m+(_<<11&4294967295|_>>>21),_=T+(R^m^y)+I[15]+530742520&4294967295,T=R+(_<<16&4294967295|_>>>16),_=y+(T^R^m)+I[2]+3299628645&4294967295,y=T+(_<<23&4294967295|_>>>9),_=m+(T^(y|~R))+I[0]+4096336452&4294967295,m=y+(_<<6&4294967295|_>>>26),_=R+(y^(m|~T))+I[7]+1126891415&4294967295,R=m+(_<<10&4294967295|_>>>22),_=T+(m^(R|~y))+I[14]+2878612391&4294967295,T=R+(_<<15&4294967295|_>>>17),_=y+(R^(T|~m))+I[5]+4237533241&4294967295,y=T+(_<<21&4294967295|_>>>11),_=m+(T^(y|~R))+I[12]+1700485571&4294967295,m=y+(_<<6&4294967295|_>>>26),_=R+(y^(m|~T))+I[3]+2399980690&4294967295,R=m+(_<<10&4294967295|_>>>22),_=T+(m^(R|~y))+I[10]+4293915773&4294967295,T=R+(_<<15&4294967295|_>>>17),_=y+(R^(T|~m))+I[1]+2240044497&4294967295,y=T+(_<<21&4294967295|_>>>11),_=m+(T^(y|~R))+I[8]+1873313359&4294967295,m=y+(_<<6&4294967295|_>>>26),_=R+(y^(m|~T))+I[15]+4264355552&4294967295,R=m+(_<<10&4294967295|_>>>22),_=T+(m^(R|~y))+I[6]+2734768916&4294967295,T=R+(_<<15&4294967295|_>>>17),_=y+(R^(T|~m))+I[13]+1309151649&4294967295,y=T+(_<<21&4294967295|_>>>11),_=m+(T^(y|~R))+I[4]+4149444226&4294967295,m=y+(_<<6&4294967295|_>>>26),_=R+(y^(m|~T))+I[11]+3174756917&4294967295,R=m+(_<<10&4294967295|_>>>22),_=T+(m^(R|~y))+I[2]+718787259&4294967295,T=R+(_<<15&4294967295|_>>>17),_=y+(R^(T|~m))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var y=m-this.blockSize,I=this.B,T=this.h,R=0;R<m;){if(T==0)for(;R<=y;)i(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<m;)if(I[T++]=E.charCodeAt(R++),T==this.blockSize){i(this,I),T=0;break}}else for(;R<m;)if(I[T++]=E[R++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var y=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=y&255,y/=256;for(this.u(E),E=Array(16),m=y=0;4>m;++m)for(var I=0;32>I;I+=8)E[y++]=this.g[m]>>>I&255;return E};function s(E,m){var y=c;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=m(E)}function o(E,m){this.h=m;for(var y=[],I=!0,T=E.length-1;0<=T;T--){var R=E[T]|0;I&&R==m||(y[T]=R,I=!1)}this.g=y}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return C(d(-E));for(var m=[],y=1,I=0;E>=y;I++)m[I]=E/y|0,y*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return C(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),I=g,T=0;T<E.length;T+=8){var R=Math.min(8,E.length-T),_=parseInt(E.substring(T,T+R),m);8>R?(R=d(Math.pow(m,R)),I=I.j(R).add(d(_))):(I=I.j(y),I=I.add(d(_)))}return I}var g=u(0),w=u(1),b=u(16777216);n=o.prototype,n.m=function(){if(D(this))return-C(this).m();for(var E=0,m=1,y=0;y<this.g.length;y++){var I=this.i(y);E+=(0<=I?I:4294967296+I)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P(this))return"0";if(D(this))return"-"+C(this).toString(E);for(var m=d(Math.pow(E,6)),y=this,I="";;){var T=q(y,m).g;y=B(y,T.j(m));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=T,P(y))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function P(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function D(E){return E.h==-1}n.l=function(E){return E=B(this,E),D(E)?-1:P(E)?0:1};function C(E){for(var m=E.g.length,y=[],I=0;I<m;I++)y[I]=~E.g[I];return new o(y,~E.h).add(w)}n.abs=function(){return D(this)?C(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],I=0,T=0;T<=m;T++){var R=I+(this.i(T)&65535)+(E.i(T)&65535),_=(R>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);I=_>>>16,R&=65535,_&=65535,y[T]=_<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function B(E,m){return E.add(C(m))}n.j=function(E){if(P(this)||P(E))return g;if(D(this))return D(E)?C(this).j(C(E)):C(C(this).j(E));if(D(E))return C(this.j(C(E)));if(0>this.l(b)&&0>E.l(b))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,y=[],I=0;I<2*m;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<E.g.length;T++){var R=this.i(I)>>>16,_=this.i(I)&65535,Tt=E.i(T)>>>16,zr=E.i(T)&65535;y[2*I+2*T]+=_*zr,G(y,2*I+2*T),y[2*I+2*T+1]+=R*zr,G(y,2*I+2*T+1),y[2*I+2*T+1]+=_*Tt,G(y,2*I+2*T+1),y[2*I+2*T+2]+=R*Tt,G(y,2*I+2*T+2)}for(I=0;I<m;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=m;I<2*m;I++)y[I]=0;return new o(y,0)};function G(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function x(E,m){this.g=E,this.h=m}function q(E,m){if(P(m))throw Error("division by zero");if(P(E))return new x(g,g);if(D(E))return m=q(C(E),m),new x(C(m.g),C(m.h));if(D(m))return m=q(E,C(m)),new x(C(m.g),m.h);if(30<E.g.length){if(D(E)||D(m))throw Error("slowDivide_ only works with positive integers.");for(var y=w,I=m;0>=I.l(E);)y=se(y),I=se(I);var T=Q(y,1),R=Q(I,1);for(I=Q(I,2),y=Q(y,2);!P(I);){var _=R.add(I);0>=_.l(E)&&(T=T.add(y),R=_),I=Q(I,1),y=Q(y,1)}return m=B(E,T.j(m)),new x(T,m)}for(T=g;0<=E.l(m);){for(y=Math.max(1,Math.floor(E.m()/m.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=d(y),_=R.j(m);D(_)||0<_.l(E);)y-=I,R=d(y),_=R.j(m);P(R)&&(R=w),T=T.add(R),E=B(E,_)}return new x(T,E)}n.A=function(E){return q(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)&E.i(I);return new o(y,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)|E.i(I);return new o(y,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)^E.i(I);return new o(y,this.h^E.h)};function se(E){for(var m=E.g.length+1,y=[],I=0;I<m;I++)y[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(y,E.h)}function Q(E,m){var y=m>>5;m%=32;for(var I=E.g.length-y,T=[],R=0;R<I;R++)T[R]=0<m?E.i(R+y)>>>m|E.i(R+y+1)<<32-m:E.i(R+y);return new o(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vl=B_.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,fn=B_.Integer=o}).apply(typeof F_<"u"?F_:typeof self<"u"?self:typeof window<"u"?window:{});var aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mt={};var Ul,cb,vr,Fl,is,ca,Bl,jl,ql;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof aa=="object"&&aa];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var A=a[p];if(!(A in h))break e;h=h[A]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,A={next:function(){if(!p&&h<a.length){var S=h++;return{value:l(S,a[S]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),a.apply(l,A)}}return function(){return a.apply(l,arguments)}}function w(a,l,h){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,w.apply(null,arguments)}function b(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function P(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,A,S){for(var k=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)k[ae-2]=arguments[ae];return l.prototype[A].apply(p,k)}}function D(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function C(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let A=a.length||0,S=p.length||0;a.length=A+S;for(let k=0;k<S;k++)a[A+k]=p[k]}else a.push(p)}}class B{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function G(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function q(a){return q[" "](a),a}q[" "]=function(){};var se=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function Q(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function E(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,l){let h,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(h in p)a[h]=p[h];for(let S=0;S<y.length;S++)h=y[S],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function T(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function R(a){c.setTimeout(()=>{throw a},0)}function _(){var a=$a;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Tt{constructor(){this.h=this.g=null}add(l,h){let p=zr.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var zr=new B(()=>new Dv,a=>a.reset());class Dv{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Gr,Wr=!1,$a=new Tt,ef=()=>{let a=c.Promise.resolve(void 0);Gr=()=>{a.then(Nv)}};var Nv=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){R(h)}var l=zr;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Wr=!1};function zt(){this.s=this.s,this.C=this.C}zt.prototype.s=!1,zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var Ov=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function Hr(a,l){if(Ce.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(se){e:{try{q(l.nodeName);var A=!0;break e}catch{}A=!1}A||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:kv[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Hr.aa.h.call(this)}}P(Hr,Ce);var kv={2:"touch",3:"pen",4:"mouse"};Hr.prototype.h=function(){Hr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Kr="closure_listenable_"+(1e6*Math.random()|0),Lv=0;function xv(a,l,h,p,A){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=A,this.key=++Lv,this.da=this.fa=!1}function Ls(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function xs(a){this.src=a,this.g={},this.h=0}xs.prototype.add=function(a,l,h,p,A){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var k=Ga(a,l,p,A);return-1<k?(l=a[k],h||(l.fa=!1)):(l=new xv(l,this.src,S,!!p,A),l.fa=h,a.push(l)),l};function za(a,l){var h=l.type;if(h in a.g){var p=a.g[h],A=Array.prototype.indexOf.call(p,l,void 0),S;(S=0<=A)&&Array.prototype.splice.call(p,A,1),S&&(Ls(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Ga(a,l,h,p){for(var A=0;A<a.length;++A){var S=a[A];if(!S.da&&S.listener==l&&S.capture==!!h&&S.ha==p)return A}return-1}var Wa="closure_lm_"+(1e6*Math.random()|0),Ha={};function tf(a,l,h,p,A){if(p&&p.once)return rf(a,l,h,p,A);if(Array.isArray(l)){for(var S=0;S<l.length;S++)tf(a,l[S],h,p,A);return null}return h=Ya(h),a&&a[Kr]?a.K(l,h,d(p)?!!p.capture:!!p,A):nf(a,l,h,!1,p,A)}function nf(a,l,h,p,A,S){if(!l)throw Error("Invalid event type");var k=d(A)?!!A.capture:!!A,ae=Qa(a);if(ae||(a[Wa]=ae=new xs(a)),h=ae.add(l,h,p,k,S),h.proxy)return h;if(p=Mv(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)Ov||(A=k),A===void 0&&(A=!1),a.addEventListener(l.toString(),p,A);else if(a.attachEvent)a.attachEvent(of(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Mv(){function a(h){return l.call(a.src,a.listener,h)}let l=Vv;return a}function rf(a,l,h,p,A){if(Array.isArray(l)){for(var S=0;S<l.length;S++)rf(a,l[S],h,p,A);return null}return h=Ya(h),a&&a[Kr]?a.L(l,h,d(p)?!!p.capture:!!p,A):nf(a,l,h,!0,p,A)}function sf(a,l,h,p,A){if(Array.isArray(l))for(var S=0;S<l.length;S++)sf(a,l[S],h,p,A);else p=d(p)?!!p.capture:!!p,h=Ya(h),a&&a[Kr]?(a=a.i,l=String(l).toString(),l in a.g&&(S=a.g[l],h=Ga(S,h,p,A),-1<h&&(Ls(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[l],a.h--)))):a&&(a=Qa(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Ga(l,h,p,A)),(h=-1<a?l[a]:null)&&Ka(h))}function Ka(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[Kr])za(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(of(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=Qa(l))?(za(h,a),h.h==0&&(h.src=null,l[Wa]=null)):Ls(a)}}}function of(a){return a in Ha?Ha[a]:Ha[a]="on"+a}function Vv(a,l){if(a.da)a=!0;else{l=new Hr(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&Ka(a),a=h.call(p,l)}return a}function Qa(a){return a=a[Wa],a instanceof xs?a:null}var Ja="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ya(a){return typeof a=="function"?a:(a[Ja]||(a[Ja]=function(l){return a.handleEvent(l)}),a[Ja])}function Pe(){zt.call(this),this.i=new xs(this),this.M=this,this.F=null}P(Pe,zt),Pe.prototype[Kr]=!0,Pe.prototype.removeEventListener=function(a,l,h,p){sf(this,a,l,h,p)};function Ue(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Ce(l,a);else if(l instanceof Ce)l.target=l.target||a;else{var A=l;l=new Ce(p,a),I(l,A)}if(A=!0,h)for(var S=h.length-1;0<=S;S--){var k=l.g=h[S];A=Ms(k,p,!0,l)&&A}if(k=l.g=a,A=Ms(k,p,!0,l)&&A,A=Ms(k,p,!1,l)&&A,h)for(S=0;S<h.length;S++)k=l.g=h[S],A=Ms(k,p,!1,l)&&A}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)Ls(h[p]);delete a.g[l],a.h--}}this.F=null},Pe.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Pe.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function Ms(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var A=!0,S=0;S<l.length;++S){var k=l[S];if(k&&!k.da&&k.capture==h){var ae=k.listener,Re=k.ha||k.src;k.fa&&za(a.i,k),A=ae.call(Re,p)!==!1&&A}}return A&&!p.defaultPrevented}function af(a,l,h){if(typeof a=="function")h&&(a=w(a,h));else if(a&&typeof a.handleEvent=="function")a=w(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function cf(a){a.g=af(()=>{a.g=null,a.i&&(a.i=!1,cf(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class Uv extends zt{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:cf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(a){zt.call(this),this.h=a,this.g={}}P(Qr,zt);var uf=[];function lf(a){Q(a.g,function(l,h){this.g.hasOwnProperty(h)&&Ka(l)},a),a.g={}}Qr.prototype.N=function(){Qr.aa.N.call(this),lf(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xa=c.JSON.stringify,Fv=c.JSON.parse,Bv=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Za(){}Za.prototype.h=null;function hf(a){return a.h||(a.h=a.i())}function df(){}var Jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ec(){Ce.call(this,"d")}P(ec,Ce);function tc(){Ce.call(this,"c")}P(tc,Ce);var _n={},ff=null;function Vs(){return ff=ff||new Pe}_n.La="serverreachability";function pf(a){Ce.call(this,_n.La,a)}P(pf,Ce);function Yr(a){let l=Vs();Ue(l,new pf(l))}_n.STAT_EVENT="statevent";function mf(a,l){Ce.call(this,_n.STAT_EVENT,a),this.stat=l}P(mf,Ce);function Fe(a){let l=Vs();Ue(l,new mf(l,a))}_n.Ma="timingevent";function gf(a,l){Ce.call(this,_n.Ma,a),this.size=l}P(gf,Ce);function Xr(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Zr(){this.g=!0}Zr.prototype.xa=function(){this.g=!1};function jv(a,l,h,p,A,S){a.info(function(){if(a.g)if(S)for(var k="",ae=S.split("&"),Re=0;Re<ae.length;Re++){var ne=ae[Re].split("=");if(1<ne.length){var De=ne[0];ne=ne[1];var Ne=De.split("_");k=2<=Ne.length&&Ne[1]=="type"?k+(De+"="+ne+"&"):k+(De+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+l+`
`+h+`
`+k})}function qv(a,l,h,p,A,S,k){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+l+`
`+h+`
`+S+" "+k})}function zn(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+zv(a,h)+(p?" "+p:"")})}function $v(a,l){a.info(function(){return"TIMEOUT: "+l})}Zr.prototype.info=function(){};function zv(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var S=A[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<A.length;k++)A[k]=""}}}}return Xa(h)}catch{return l}}var Us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_f={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nc;function Fs(){}P(Fs,Za),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},nc=new Fs;function Gt(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new Qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yf}function yf(){this.i=null,this.g="",this.h=!1}var vf={},rc={};function ic(a,l,h){a.L=1,a.v=$s(At(l)),a.m=h,a.P=!0,If(a,null)}function If(a,l){a.F=Date.now(),Bs(a),a.A=At(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Lf(h.i,"t",p),a.C=0,h=a.j.J,a.h=new yf,a.g=Xf(a.j,h?l:null,!a.m),0<a.O&&(a.M=new Uv(w(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(uf[0]=A.toString()),A=uf);for(var S=0;S<A.length;S++){var k=tf(h,A[S],p||l.handleEvent,!1,l.h||l);if(!k)break;l.g[k.key]=k}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Yr(),jv(a.i,a.u,a.A,a.l,a.R,a.m)}Gt.prototype.ca=function(a){a=a.target;let l=this.M;l&&Rt(a)==3?l.j():this.Y(a)},Gt.prototype.Y=function(a){try{if(a==this.g)e:{let Ne=Rt(this.g);var l=this.g.Ba();let Hn=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||jf(this.g)))){this.J||Ne!=4||l==7||(l==8||0>=Hn?Yr(3):Yr(2)),sc(this);var h=this.g.Z();this.X=h;t:if(Ef(this)){var p=jf(this.g);a="";var A=p.length,S=Rt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),ei(this);var k="";break t}this.h.i=new c.TextDecoder}for(l=0;l<A;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(S&&l==A-1)});p.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,qv(this.i,this.u,this.A,this.l,this.R,Ne,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ae,Re=this.g;if((ae=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(ae)){var ne=ae;break t}}ne=null}if(h=ne)zn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,h);else{this.o=!1,this.s=3,Fe(12),yn(this),ei(this);break e}}if(this.P){h=!0;let rt;for(;!this.J&&this.C<k.length;)if(rt=Gv(this,k),rt==rc){Ne==4&&(this.s=4,Fe(14),h=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==vf){this.s=4,Fe(15),zn(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else zn(this.i,this.l,rt,null),oc(this,rt);if(Ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||k.length!=0||this.h.h||(this.s=1,Fe(16),h=!1),this.o=this.o&&h,!h)zn(this.i,this.l,k,"[Invalid Chunked Response]"),yn(this),ei(this);else if(0<k.length&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.ba&&!De.M&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),dc(De),De.M=!0,Fe(11))}}else zn(this.i,this.l,k,null),oc(this,k);Ne==4&&yn(this),this.o&&!this.J&&(Ne==4?Kf(this.j,this):(this.o=!1,Bs(this)))}else cI(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),yn(this),ei(this)}}}catch{}finally{}};function Ef(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Gv(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?rc:(h=Number(l.substring(h,p)),isNaN(h)?vf:(p+=1,p+h>l.length?rc:(l=l.slice(p,p+h),a.C=p+h,l)))}Gt.prototype.cancel=function(){this.J=!0,yn(this)};function Bs(a){a.S=Date.now()+a.I,wf(a,a.I)}function wf(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Xr(w(a.ba,a),l)}function sc(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Gt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?($v(this.i,this.A),this.L!=2&&(Yr(),Fe(17)),yn(this),this.s=2,ei(this)):wf(this,this.S-a)};function ei(a){a.j.G==0||a.J||Kf(a.j,a)}function yn(a){sc(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,lf(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function oc(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||ac(h.h,a))){if(!a.K&&ac(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ks(h),Ws(h);else break e;hc(h),Fe(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=Xr(w(h.Za,h),6e3));if(1>=Rf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else In(h,11)}else if((a.K||h.g==a)&&Ks(h),!G(l))for(A=h.Da.g.parse(l),l=0;l<A.length;l++){let ne=A[l];if(h.T=ne[0],ne=ne[1],h.G==2)if(ne[0]=="c"){h.K=ne[1],h.ia=ne[2];let De=ne[3];De!=null&&(h.la=De,h.j.info("VER="+h.la));let Ne=ne[4];Ne!=null&&(h.Aa=Ne,h.j.info("SVER="+h.Aa));let Hn=ne[5];Hn!=null&&typeof Hn=="number"&&0<Hn&&(p=1.5*Hn,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let rt=a.g;if(rt){let Js=rt.g?rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var S=p.h;S.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(cc(S,S.h),S.h=null))}if(p.D){let fc=rt.g?rt.g.getResponseHeader("X-HTTP-Session-Id"):null;fc&&(p.ya=fc,ce(p.I,p.D,fc))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var k=a;if(p.qa=Yf(p,p.J?p.ia:null,p.W),k.K){Sf(p.h,k);var ae=k,Re=p.L;Re&&(ae.I=Re),ae.B&&(sc(ae),Bs(ae)),p.g=k}else Wf(p);0<h.i.length&&Hs(h)}else ne[0]!="stop"&&ne[0]!="close"||In(h,7);else h.G==3&&(ne[0]=="stop"||ne[0]=="close"?ne[0]=="stop"?In(h,7):lc(h):ne[0]!="noop"&&h.l&&h.l.ta(ne),h.v=0)}}Yr(4)}catch{}}var Wv=class{constructor(a,l){this.g=a,this.map=l}};function Tf(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Af(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rf(a){return a.h?1:a.g?a.g.size:0}function ac(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function cc(a,l){a.g?a.g.add(l):a.h=l}function Sf(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Tf.prototype.cancel=function(){if(this.i=bf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function bf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return D(a.i)}function Hv(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function Kv(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function Cf(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=Kv(a),p=Hv(a),A=p.length,S=0;S<A;S++)l.call(void 0,p[S],h&&h[S],a)}var Pf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qv(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),A=null;if(0<=p){var S=a[h].substring(0,p);A=a[h].substring(p+1)}else S=a[h];l(S,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function vn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof vn){this.h=a.h,js(this,a.j),this.o=a.o,this.g=a.g,qs(this,a.s),this.l=a.l;var l=a.i,h=new ri;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Df(this,h),this.m=a.m}else a&&(l=String(a).match(Pf))?(this.h=!1,js(this,l[1]||"",!0),this.o=ti(l[2]||""),this.g=ti(l[3]||"",!0),qs(this,l[4]),this.l=ti(l[5]||"",!0),Df(this,l[6]||"",!0),this.m=ti(l[7]||"")):(this.h=!1,this.i=new ri(null,this.h))}vn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(ni(l,Nf,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(ni(l,Nf,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ni(h,h.charAt(0)=="/"?Xv:Yv,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ni(h,eI)),a.join("")};function At(a){return new vn(a)}function js(a,l,h){a.j=h?ti(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function qs(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Df(a,l,h){l instanceof ri?(a.i=l,tI(a.i,a.h)):(h||(l=ni(l,Zv)),a.i=new ri(l,a.h))}function ce(a,l,h){a.i.set(l,h)}function $s(a){return ce(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ti(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ni(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,Jv),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Nf=/[#\/\?@]/g,Yv=/[#\?:]/g,Xv=/[#\?]/g,Zv=/[#\?@]/g,eI=/#/g;function ri(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Wt(a){a.g||(a.g=new Map,a.h=0,a.i&&Qv(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=ri.prototype,n.add=function(a,l){Wt(this),this.i=null,a=Gn(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Of(a,l){Wt(a),l=Gn(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function kf(a,l){return Wt(a),l=Gn(a,l),a.g.has(l)}n.forEach=function(a,l){Wt(this),this.g.forEach(function(h,p){h.forEach(function(A){a.call(l,A,p,this)},this)},this)},n.na=function(){Wt(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let A=a[p];for(let S=0;S<A.length;S++)h.push(l[p])}return h},n.V=function(a){Wt(this);let l=[];if(typeof a=="string")kf(this,a)&&(l=l.concat(this.g.get(Gn(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return Wt(this),this.i=null,a=Gn(this,a),kf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Lf(a,l,h){Of(a,l),0<h.length&&(a.i=null,a.g.set(Gn(a,l),D(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let S=encodeURIComponent(String(p)),k=this.V(p);for(p=0;p<k.length;p++){var A=S;k[p]!==""&&(A+="="+encodeURIComponent(String(k[p]))),a.push(A)}}return this.i=a.join("&")};function Gn(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function tI(a,l){l&&!a.j&&(Wt(a),a.i=null,a.g.forEach(function(h,p){var A=p.toLowerCase();p!=A&&(Of(this,p),Lf(this,A,h))},a)),a.j=l}function nI(a,l){let h=new Zr;if(c.Image){let p=new Image;p.onload=b(Ht,h,"TestLoadImage: loaded",!0,l,p),p.onerror=b(Ht,h,"TestLoadImage: error",!1,l,p),p.onabort=b(Ht,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=b(Ht,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function rI(a,l){let h=new Zr,p=new AbortController,A=setTimeout(()=>{p.abort(),Ht(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(S=>{clearTimeout(A),S.ok?Ht(h,"TestPingServer: ok",!0,l):Ht(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(A),Ht(h,"TestPingServer: error",!1,l)})}function Ht(a,l,h,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(h)}catch{}}function iI(){this.g=new Bv}function sI(a,l,h){let p=h||"";try{Cf(a,function(A,S){let k=A;d(A)&&(k=Xa(A)),l.push(p+S+"="+encodeURIComponent(k))})}catch(A){throw l.push(p+"type="+encodeURIComponent("_badmap")),A}}function ii(a){this.l=a.Ub||null,this.j=a.eb||!1}P(ii,Za),ii.prototype.g=function(){return new zs(this.l,this.j)},ii.prototype.i=function(a){return function(){return a}}({});function zs(a,l){Pe.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(zs,Pe),n=zs.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,oi(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function xf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?si(this):oi(this),this.readyState==3&&xf(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,si(this))},n.Qa=function(a){this.g&&(this.response=a,si(this))},n.ga=function(){this.g&&si(this)};function si(a){a.readyState=4,a.l=null,a.j=null,a.v=null,oi(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function oi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Mf(a){let l="";return Q(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function uc(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Mf(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ce(a,l,h))}function de(a){Pe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(de,Pe);var oI=/^https?$/i,aI=["POST","PUT"];n=de.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nc.g(),this.v=this.o?hf(this.o):hf(nc),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(S){Vf(this,S);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)h.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let S of p.keys())h.set(S,p.get(S));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(aI,l,void 0))||p||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of h)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bf(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Vf(this,S)}};function Vf(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Uf(a),Gs(a)}function Uf(a){a.A||(a.A=!0,Ue(a,"complete"),Ue(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ue(this,"complete"),Ue(this,"abort"),Gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),de.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ff(this):this.bb())},n.bb=function(){Ff(this)};function Ff(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Rt(a)!=4||a.Z()!=2)){if(a.u&&Rt(a)==4)af(a.Ea,0,a);else if(Ue(a,"readystatechange"),Rt(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=k===0){var A=String(a.D).match(Pf)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),p=!oI.test(A?A.toLowerCase():"")}h=p}if(h)Ue(a,"complete"),Ue(a,"success");else{a.m=6;try{var S=2<Rt(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Uf(a)}}finally{Gs(a)}}}}function Gs(a,l){if(a.g){Bf(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||Ue(a,"ready");try{h.onreadystatechange=p}catch{}}}function Bf(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Rt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Rt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),Fv(l)}};function jf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cI(a){let l={};a=(a.g&&2<=Rt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(G(a[p]))continue;var h=T(a[p]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=l[A]||[];l[A]=S,S.push(h)}E(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function qf(a){this.Aa=0,this.i=[],this.j=new Zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,a),this.cb=ai("retryDelaySeedMs",1e4,a),this.Wa=ai("forwardChannelMaxRetries",2,a),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Tf(a&&a.concurrentRequestLimit),this.Da=new iI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qf.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){Fe(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Yf(this,null,this.W),Hs(this)};function lc(a){if($f(a),a.G==3){var l=a.U++,h=At(a.I);if(ce(h,"SID",a.K),ce(h,"RID",l),ce(h,"TYPE","terminate"),ci(a,h),l=new Gt(a,a.j,l),l.L=2,l.v=$s(At(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Xf(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Bs(l)}Jf(a)}function Ws(a){a.g&&(dc(a),a.g.cancel(),a.g=null)}function $f(a){Ws(a),a.u&&(c.clearTimeout(a.u),a.u=null),Ks(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Hs(a){if(!Af(a.h)&&!a.s){a.s=!0;var l=a.Ga;Gr||ef(),Wr||(Gr(),Wr=!0),$a.add(l,a),a.B=0}}function uI(a,l){return Rf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Xr(w(a.Ga,a,l),Qf(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Gt(this,this.j,a),S=this.o;if(this.S&&(S?(S=m(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(A.H=S,S=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Gf(this,A,l),h=At(this.I),ce(h,"RID",a),ce(h,"CVER",22),this.D&&ce(h,"X-HTTP-Session-Id",this.D),ci(this,h),S&&(this.O?l="headers="+encodeURIComponent(String(Mf(S)))+"&"+l:this.m&&uc(h,this.m,S)),cc(this.h,A),this.Ua&&ce(h,"TYPE","init"),this.P?(ce(h,"$req",l),ce(h,"SID","null"),A.T=!0,ic(A,h,null)):ic(A,h,l),this.G=2}}else this.G==3&&(a?zf(this,a):this.i.length==0||Af(this.h)||zf(this))};function zf(a,l){var h;l?h=l.l:h=a.U++;let p=At(a.I);ce(p,"SID",a.K),ce(p,"RID",h),ce(p,"AID",a.T),ci(a,p),a.m&&a.o&&uc(p,a.m,a.o),h=new Gt(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Gf(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),cc(a.h,h),ic(h,p,l)}function ci(a,l){a.H&&Q(a.H,function(h,p){ce(l,p,h)}),a.l&&Cf({},function(h,p){ce(l,p,h)})}function Gf(a,l,h){h=Math.min(a.i.length,h);var p=a.l?w(a.l.Na,a.l,a):null;e:{var A=a.i;let S=-1;for(;;){let k=["count="+h];S==-1?0<h?(S=A[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let ae=!0;for(let Re=0;Re<h;Re++){let ne=A[Re].g,De=A[Re].map;if(ne-=S,0>ne)S=Math.max(0,A[Re].g-100),ae=!1;else try{sI(De,k,"req"+ne+"_")}catch{p&&p(De)}}if(ae){p=k.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function Wf(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;Gr||ef(),Wr||(Gr(),Wr=!0),$a.add(l,a),a.v=0}}function hc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Xr(w(a.Fa,a),Qf(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Hf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Xr(w(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),Ws(this),Hf(this))};function dc(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Hf(a){a.g=new Gt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=At(a.qa);ce(l,"RID","rpc"),ce(l,"SID",a.K),ce(l,"AID",a.T),ce(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&ce(l,"TO",a.ja),ce(l,"TYPE","xmlhttp"),ci(a,l),a.m&&a.o&&uc(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=$s(At(l)),h.m=null,h.P=!0,If(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Ws(this),hc(this),Fe(19))};function Ks(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Kf(a,l){var h=null;if(a.g==l){Ks(a),dc(a),a.g=null;var p=2}else if(ac(a.h,l))h=l.D,Sf(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var A=a.B;p=Vs(),Ue(p,new gf(p,h)),Hs(a)}else Wf(a);else if(A=l.s,A==3||A==0&&0<l.X||!(p==1&&uI(a,l)||p==2&&hc(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),A){case 1:In(a,5);break;case 4:In(a,10);break;case 3:In(a,6);break;default:In(a,2)}}}function Qf(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function In(a,l){if(a.j.info("Error code "+l),l==2){var h=w(a.fb,a),p=a.Xa;let A=!p;p=new vn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||js(p,"https"),$s(p),A?nI(p.toString(),h):rI(p.toString(),h)}else Fe(2);a.G=0,a.l&&a.l.sa(l),Jf(a),$f(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function Jf(a){if(a.G=0,a.ka=[],a.l){let l=bf(a.h);(l.length!=0||a.i.length!=0)&&(C(a.ka,l),C(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function Yf(a,l,h){var p=h instanceof vn?At(h):new vn(h);if(p.g!="")l&&(p.g=l+"."+p.g),qs(p,p.s);else{var A=c.location;p=A.protocol,l=l?l+"."+A.hostname:A.hostname,A=+A.port;var S=new vn(null);p&&js(S,p),l&&(S.g=l),A&&qs(S,A),h&&(S.l=h),p=S}return h=a.D,l=a.ya,h&&l&&ce(p,h,l),ce(p,"VER",a.la),ci(a,p),p}function Xf(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new de(new ii({eb:h})):new de(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zf(){}n=Zf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qs(){}Qs.prototype.g=function(a,l){return new Ge(a,l)};function Ge(a,l){Pe.call(this),this.g=new qf(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!G(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!G(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Wn(this)}P(Ge,Pe),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){lc(this.g)},Ge.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Xa(a),a=h);l.i.push(new Wv(l.Ya++,a)),l.G==3&&Hs(l)},Ge.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Ge.aa.N.call(this)};function ep(a){ec.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}P(ep,ec);function tp(){tc.call(this),this.status=1}P(tp,tc);function Wn(a){this.g=a}P(Wn,Zf),Wn.prototype.ua=function(){Ue(this.g,"a")},Wn.prototype.ta=function(a){Ue(this.g,new ep(a))},Wn.prototype.sa=function(a){Ue(this.g,new tp)},Wn.prototype.ra=function(){Ue(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,ql=Mt.createWebChannelTransport=function(){return new Qs},jl=Mt.getStatEventTarget=function(){return Vs()},Bl=Mt.Event=_n,ca=Mt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,is=Mt.ErrorCode=Us,_f.COMPLETE="complete",Fl=Mt.EventType=_f,df.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,vr=Mt.WebChannel=df,cb=Mt.FetchXmlHttpFactory=ii,de.prototype.listenOnce=de.prototype.L,de.prototype.getLastError=de.prototype.Ka,de.prototype.getLastErrorCode=de.prototype.Ba,de.prototype.getStatus=de.prototype.Z,de.prototype.getResponseJson=de.prototype.Oa,de.prototype.getResponseText=de.prototype.oa,de.prototype.send=de.prototype.ea,de.prototype.setWithCredentials=de.prototype.Ha,Ul=Mt.XhrIo=de}).apply(typeof aa<"u"?aa:typeof self<"u"?self:typeof window<"u"?window:{});var j_="@firebase/firestore";var Ae=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ae.UNAUTHENTICATED=new Ae(null),Ae.GOOGLE_CREDENTIALS=new Ae("google-credentials-uid"),Ae.FIRST_PARTY=new Ae("first-party-uid"),Ae.MOCK_USER=new Ae("mock-user");var jr="10.14.0";var Bn=new sn("@firebase/firestore");function ss(){return Bn.logLevel}function V(n,...e){if(Bn.logLevel<=Y.DEBUG){let t=e.map(Cd);Bn.debug(`Firestore (${jr}): ${n}`,...t)}}function Ft(n,...e){if(Bn.logLevel<=Y.ERROR){let t=e.map(Cd);Bn.error(`Firestore (${jr}): ${n}`,...t)}}function Pr(n,...e){if(Bn.logLevel<=Y.WARN){let t=e.map(Cd);Bn.warn(`Firestore (${jr}): ${n}`,...t)}}function Cd(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${jr}) INTERNAL ASSERTION FAILED: `+n;throw Ft(e),new Error(e)}function fe(n,e){n||z()}function Z(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends Be{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ut=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var da=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ae.UNAUTHENTICATED))}shutdown(){}},Ql=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Jl=class{constructor(e){this.t=e,this.currentUser=Ae.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fe(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ut,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ut)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new da(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Ae(e)}},Yl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ae.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Xl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Yl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ae.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){fe(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string"),this.R=t.token,new Zl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ub(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var th=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=ub(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function Dr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var xe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var H=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new xe(0,0))}static max(){return new n(new xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fa=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},pe=class n extends fa{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},lb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nt=class n extends fa{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return lb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new M(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new M(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new M(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new M(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};var nh=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};nh.UNKNOWN_ID=-1;function hb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new xe(t+1,0):new xe(t,r));return new jn(i,j.empty(),e)}function db(n){return new jn(n.readTime,n.key,-1)}var jn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(H.min(),j.empty(),-1)}static max(){return new n(H.max(),j.empty(),-1)}};function fb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var pb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Pd(n){return v(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==pb)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function mb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cs(n){return n.name==="IndexedDbTransactionError"}var Ey=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Va(n){return n==null}function ds(n){return n===0&&1/n==-1/0}function gb(n){return typeof n=="number"&&Number.isInteger(n)&&!ds(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _b=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KN=[..._b,"documentOverlays"],yb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vb=yb,Ib=[...vb,"indexConfiguration","indexState","indexEntries"];var QN=[...Ib,"globals"];function q_(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ps(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var me=class n{constructor(e,t){this.comparator=e,this.root=t||vt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tr(this.root,e,this.comparator,!0)}},Tr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,s){return this}insert(e,t,r){return new vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Me=class n{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pa(this.data.getIterator())}getIteratorFrom(e){return new pa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},pa=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vn=class n{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Me(nt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ma=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ve=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ma("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ve.EMPTY_BYTE_STRING=new Ve("");var Eb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bt(n){if(fe(!!n),typeof n=="string"){let e=0,t=Eb.exec(n);if(fe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:he(n.seconds),nanos:he(n.nanos)}}function he(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pn(n){return typeof n=="string"?Ve.fromBase64String(n):Ve.fromUint8Array(n)}function Dd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nd(n){let e=n.mapValue.fields.__previous_value__;return Dd(e)?Nd(e):e}function fs(n){let e=Bt(n.mapValue.fields.__local_write_time__.timestampValue);return new xe(e.seconds,e.nanos)}var ih=class{constructor(e,t,r,i,s,o,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},ga=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ua={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dd(n)?4:Ay(n)?9007199254740991:Ty(n)?10:11:z()}function Et(n,e){if(n===e)return!0;let t=qn(n);if(t!==qn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fs(n).isEqual(fs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Bt(i.timestampValue),c=Bt(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return pn(i.bytesValue).isEqual(pn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return he(i.geoPointValue.latitude)===he(s.geoPointValue.latitude)&&he(i.geoPointValue.longitude)===he(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return he(i.integerValue)===he(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=he(i.doubleValue),c=he(s.doubleValue);return o===c?ds(o)===ds(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Dr(n.arrayValue.values||[],e.arrayValue.values||[],Et);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(q_(o)!==q_(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Et(o[u],c[u])))return!1;return!0}(n,e);default:return z()}}function ps(n,e){return(n.values||[]).find(t=>Et(t,e))!==void 0}function Nr(n,e){if(n===e)return 0;let t=qn(n),r=qn(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=he(s.integerValue||s.doubleValue),u=he(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return $_(n.timestampValue,e.timestampValue);case 4:return $_(fs(n),fs(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(s,o){let c=pn(s),u=pn(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ie(c[d],u[d]);if(f!==0)return f}return ie(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ie(he(s.latitude),he(o.latitude));return c!==0?c:ie(he(s.longitude),he(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return z_(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;let g=s.fields||{},w=o.fields||{},b=(c=g.value)===null||c===void 0?void 0:c.arrayValue,P=(u=w.value)===null||u===void 0?void 0:u.arrayValue,D=ie(((d=b?.values)===null||d===void 0?void 0:d.length)||0,((f=P?.values)===null||f===void 0?void 0:f.length)||0);return D!==0?D:z_(b,P)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ua.mapValue&&o===ua.mapValue)return 0;if(s===ua.mapValue)return 1;if(o===ua.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let w=ie(u[g],f[g]);if(w!==0)return w;let b=Nr(c[u[g]],d[f[g]]);if(b!==0)return b}return ie(u.length,f.length)}(n.mapValue,e.mapValue);default:throw z()}}function $_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=Bt(n),r=Bt(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function z_(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Nr(t[i],r[i]);if(s)return s}return ie(t.length,r.length)}function Or(n){return sh(n)}function sh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Bt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return pn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=sh(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${sh(t.fields[o])}`;return i+"}"}(n.mapValue):z()}function G_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oh(n){return!!n&&"integerValue"in n}function Od(n){return!!n&&"arrayValue"in n}function W_(n){return!!n&&"nullValue"in n}function H_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $l(n){return!!n&&"mapValue"in n}function Ty(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function as(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ps(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=as(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=as(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ay(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$l(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=as(t)}setAll(e){let t=nt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=as(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());$l(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Et(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$l(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ps(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(as(this.value))}};var ct=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,H.min(),H.min(),H.min(),Vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,H.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,H.min(),H.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,H.min(),H.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var kr=class{constructor(e,t){this.position=e,this.inclusive=t}};function K_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),t.key):r=Nr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Q_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Et(n.position[t],e.position[t]))return!1;return!0}var Lr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var _a=class{},Ee=class n extends _a{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ch(e,t,r):t==="array-contains"?new hh(e,r):t==="in"?new dh(e,r):t==="not-in"?new fh(e,r):t==="array-contains-any"?new ph(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uh(e,r):new lh(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nr(t,this.value)):t!==null&&qn(this.value)===qn(t)&&this.matchesComparison(Nr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ut=class n extends _a{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ry(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ry(n){return n.op==="and"}function Sy(n){return Tb(n)&&Ry(n)}function Tb(n){for(let e of n.filters)if(e instanceof ut)return!1;return!0}function ah(n){if(n instanceof Ee)return n.field.canonicalString()+n.op.toString()+Or(n.value);if(Sy(n))return n.filters.map(e=>ah(e)).join(",");{let e=n.filters.map(t=>ah(t)).join(",");return`${n.op}(${e})`}}function by(n,e){return n instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.field.isEqual(i.field)&&Et(r.value,i.value)}(n,e):n instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&by(o,i.filters[c]),!0):!1}(n,e):void z()}function Cy(n){return n instanceof Ee?function(t){return`${t.field.canonicalString()} ${t.op} ${Or(t.value)}`}(n):n instanceof ut?function(t){return t.op.toString()+" {"+t.getFilters().map(Cy).join(" ,")+"}"}(n):"Filter"}var ch=class extends Ee{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},uh=class extends Ee{constructor(e,t){super(e,"in",t),this.keys=Py("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},lh=class extends Ee{constructor(e,t){super(e,"not-in",t),this.keys=Py("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Py(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var hh=class extends Ee{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Od(t)&&ps(t.arrayValue,this.value)}},dh=class extends Ee{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ps(this.value.arrayValue,t)}},fh=class extends Ee{constructor(e,t){super(e,"not-in",t)}matches(e){if(ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ps(this.value.arrayValue,t)}},ph=class extends Ee{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Od(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ps(this.value.arrayValue,r))}};var mh=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function J_(n,e=null,t=[],r=[],i=null,s=null,o=null){return new mh(n,e,t,r,i,s,o)}function kd(n){let e=Z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ah(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Va(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Or(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Or(r)).join(",")),e.ue=t}return e.ue}function Ld(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!by(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Q_(n.startAt,e.startAt)&&Q_(n.endAt,e.endAt)}function gh(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var $n=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Ab(n,e,t,r,i,s,o,c){return new $n(n,e,t,r,i,s,o,c)}function Dy(n){return new $n(n)}function Y_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ny(n){return n.collectionGroup!==null}function cs(n){let e=Z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Me(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lr(s,r))}),t.has(nt.keyField().canonicalString())||e.ce.push(new Lr(nt.keyField(),r))}return e.ce}function It(n){let e=Z(n);return e.le||(e.le=Rb(e,cs(n))),e.le}function Rb(n,e){if(n.limitType==="F")return J_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Lr(i.field,s)});let t=n.endAt?new kr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kr(n.startAt.position,n.startAt.inclusive):null;return J_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _h(n,e){let t=n.filters.concat([e]);return new $n(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yh(n,e,t){return new $n(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ua(n,e){return Ld(It(n),It(e))&&n.limitType===e.limitType}function Oy(n){return`${kd(It(n))}|lt:${n.limitType}`}function Ir(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Cy(i)).join(", ")}]`),Va(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Or(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Or(i)).join(",")),`Target(${r})`}(It(n))}; limitType=${n.limitType})`}function Fa(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of cs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=K_(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,cs(r),i)||r.endAt&&!function(o,c,u){let d=K_(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,cs(r),i))}(n,e)}function Sb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ky(n){return(e,t)=>{let r=!1;for(let i of cs(n)){let s=bb(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bb(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Nr(u,d):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var mn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return wy(this.inner)}size(){return this.innerSize}};var Cb=new me(j.comparator);function gn(){return Cb}var Ly=new me(j.comparator);function os(...n){let e=Ly;for(let t of n)e=e.insert(t.key,t);return e}function Pb(n){let e=Ly;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Un(){return us()}function xy(){return us()}function us(){return new mn(n=>n.toString(),(n,e)=>n.isEqual(e))}var YN=new me(j.comparator),Db=new Me(j.comparator);function te(...n){let e=Db;for(let t of n)e=e.add(t);return e}var Nb=new Me(ie);function Ob(){return Nb}function xd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ds(e)?"-0":e}}function My(n){return{integerValue:""+n}}function kb(n,e){return gb(e)?My(e):xd(n,e)}var xr=class{constructor(){this._=void 0}};function Lb(n,e,t){return n instanceof ms?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dd(s)&&(s=Nd(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Mr?Vy(n,e):n instanceof Vr?Uy(n,e):function(i,s){let o=Mb(i,s),c=X_(o)+X_(i.Pe);return oh(o)&&oh(i.Pe)?My(c):xd(i.serializer,c)}(n,e)}function xb(n,e,t){return n instanceof Mr?Vy(n,e):n instanceof Vr?Uy(n,e):t}function Mb(n,e){return n instanceof gs?function(r){return oh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ms=class extends xr{},Mr=class extends xr{constructor(e){super(),this.elements=e}};function Vy(n,e){let t=Fy(e);for(let r of n.elements)t.some(i=>Et(i,r))||t.push(r);return{arrayValue:{values:t}}}var Vr=class extends xr{constructor(e){super(),this.elements=e}};function Uy(n,e){let t=Fy(e);for(let r of n.elements)t=t.filter(i=>!Et(i,r));return{arrayValue:{values:t}}}var gs=class extends xr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function X_(n){return he(n.integerValue||n.doubleValue)}function Fy(n){return Od(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Vb(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mr&&i instanceof Mr||r instanceof Vr&&i instanceof Vr?Dr(r.elements,i.elements,Et):r instanceof gs&&i instanceof gs?Et(r.Pe,i.Pe):r instanceof ms&&i instanceof ms}(n.transform,e.transform)}var ls=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ha(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var _s=class{};function By(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vh(n.key,ls.none()):new ys(n.key,n.data,ls.none());{let t=n.data,r=Vt.empty(),i=new Me(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ur(n.key,r,new Vn(i.toArray()),ls.none())}}function Ub(n,e,t){n instanceof ys?function(i,s,o){let c=i.value.clone(),u=ey(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ur?function(i,s,o){if(!ha(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=ey(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(jy(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function hs(n,e,t,r){return n instanceof ys?function(s,o,c,u){if(!ha(s.precondition,o))return c;let d=s.value.clone(),f=ty(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ur?function(s,o,c,u){if(!ha(s.precondition,o))return c;let d=ty(s.fieldTransforms,u,o),f=o.data;return f.setAll(jy(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return ha(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function Z_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dr(r,i,(s,o)=>Vb(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ys=class extends _s{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ur=class extends _s{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function jy(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ey(n,e,t){let r=new Map;fe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,xb(o,c,t[i]))}return r}function ty(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Lb(s,o,e))}return r}var vh=class extends _s{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Ih=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Ub(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xy();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=By(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),te())}isEqual(e){return this.batchId===e.batchId&&Dr(this.mutations,e.mutations,(t,r)=>Z_(t,r))&&Dr(this.baseMutations,e.baseMutations,(t,r)=>Z_(t,r))}};var Eh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wh=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ve,X;function qy(n){if(n===void 0)return Ft("GRPC error has no .code"),N.UNKNOWN;switch(n){case ve.OK:return N.OK;case ve.CANCELLED:return N.CANCELLED;case ve.UNKNOWN:return N.UNKNOWN;case ve.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ve.INTERNAL:return N.INTERNAL;case ve.UNAVAILABLE:return N.UNAVAILABLE;case ve.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ve.NOT_FOUND:return N.NOT_FOUND;case ve.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ve.ABORTED:return N.ABORTED;case ve.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ve.DATA_LOSS:return N.DATA_LOSS;default:return z()}}(X=ve||(ve={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var ny=null;function Fb(){return new TextEncoder}var Bb=new fn([4294967295,4294967295],0);function ry(n){let e=Fb().encode(n),t=new Vl;return t.update(e),new Uint8Array(t.digest())}function iy(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fn([t,r],0),new fn([i,s],0)]}var Th=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fn(`Invalid padding: ${t}`);if(r<0)throw new Fn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fn(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(fn.fromNumber(r)));return i.compare(Bb)===1&&(i=new fn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ry(e),[r,i]=iy(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=ry(e),[r,i]=iy(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ya=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(H.min(),i,new me(ie),gn(),te())}},vs=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,te(),te(),te())}};var Rr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},va=class{constructor(e,t){this.targetId=e,this.me=t}},Ia=class{constructor(e,t,r=Ve.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ea=class{constructor(){this.fe=0,this.ge=oy(),this.pe=Ve.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),t=te(),r=te();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new vs(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=oy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ah=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=gn(),this.qe=sy(),this.Qe=new me(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(gh(s))if(r===0){let o=new j(s.path);this.Ue(t,o,ct.newNoDocument(o,H.min()))}else fe(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}ny?.et(function(f,g,w,b,P){var D,C,B,G,x,q;let se={localCacheCount:f,existenceFilterCount:g.count,databaseId:w.database,projectId:w.projectId},Q=g.unchangedNames;return Q&&(se.bloomFilter={applied:P===0,hashCount:(D=Q?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(G=(B=(C=Q?.bits)===null||C===void 0?void 0:C.bitmap)===null||B===void 0?void 0:B.length)!==null&&G!==void 0?G:0,padding:(q=(x=Q?.bits)===null||x===void 0?void 0:x.padding)!==null&&q!==void 0?q:0,mightContain:E=>{var m;return(m=b?.mightContain(E))!==null&&m!==void 0&&m}}),se}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=pn(r).toUint8Array()}catch(u){if(u instanceof ma)return Pr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Th(o,i,s)}catch(u){return Pr(u instanceof Fn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&gh(c.target)){let u=new j(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ct.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=te();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ya(e,t,this.Qe,this.ke,r);return this.ke=gn(),this.qe=sy(),this.Qe=new me(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ea,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Me(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ea),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function sy(){return new me(j.comparator)}function oy(){return new me(j.comparator)}var jb={asc:"ASCENDING",desc:"DESCENDING"},qb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$b={and:"AND",or:"OR"},Rh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Sh(n,e){return n.useProto3Json||Va(e)?e:{value:e}}function bh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $y(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Sr(n){return fe(!!n),H.fromTimestamp(function(t){let r=Bt(t);return new xe(r.seconds,r.nanos)}(n))}function zy(n,e){return Ch(n,e).canonicalString()}function Ch(n,e){let t=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Gy(n){let e=pe.fromString(n);return fe(Jy(e)),e}function zl(n,e){let t=Gy(e);if(t.get(1)!==n.databaseId.projectId)throw new M(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new M(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(Hy(t))}function Wy(n,e){return zy(n.databaseId,e)}function zb(n){let e=Gy(n);return e.length===4?pe.emptyPath():Hy(e)}function ay(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hy(n){return fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Gb(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(fe(f===void 0||typeof f=="string"),Ve.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ve.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?N.UNKNOWN:qy(d.code);return new M(f,d.message||"")}(o);t=new Ia(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=zl(n,r.document.name),s=Sr(r.document.updateTime),o=r.document.createTime?Sr(r.document.createTime):H.min(),c=new Vt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new Rr(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=zl(n,r.document),s=r.readTime?Sr(r.readTime):H.min(),o=ct.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Rr([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=zl(n,r.document),s=r.removedTargetIds||[];t=new Rr([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new wh(i,s),c=r.targetId;t=new va(c,o)}}return t}function Wb(n,e){return{documents:[Wy(n,e.path)]}}function Hb(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Wy(n,i);let s=function(d){if(d.length!==0)return Qy(ut.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(w){return{field:Er(w.field),direction:Jb(w.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Sh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function Kb(n){let e=zb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){fe(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let w=Ky(g);return w instanceof ut&&Sy(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(w=>function(P){return new Lr(wr(P.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(g){let w;return w=typeof g=="object"?g.value:g,Va(w)?null:w}(t.limit));let u=null;t.startAt&&(u=function(g){let w=!!g.before,b=g.values||[];return new kr(b,w)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let w=!g.before,b=g.values||[];return new kr(b,w)}(t.endAt)),Ab(e,i,o,s,c,"F",u,d)}function Qb(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ky(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=wr(t.unaryFilter.field);return Ee.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wr(t.unaryFilter.field);return Ee.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=wr(t.unaryFilter.field);return Ee.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=wr(t.unaryFilter.field);return Ee.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return Ee.create(wr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ut.create(t.compositeFilter.filters.map(r=>Ky(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function Jb(n){return jb[n]}function Yb(n){return qb[n]}function Xb(n){return $b[n]}function Er(n){return{fieldPath:n.canonicalString()}}function wr(n){return nt.fromServerFormat(n.fieldPath)}function Qy(n){return n instanceof Ee?function(t){if(t.op==="=="){if(H_(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NAN"}};if(W_(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(H_(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NOT_NAN"}};if(W_(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Er(t.field),op:Yb(t.op),value:t.value}}}(n):n instanceof ut?function(t){let r=t.getFilters().map(i=>Qy(i));return r.length===1?r[0]:{compositeFilter:{op:Xb(t.op),filters:r}}}(n):z()}function Jy(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Is=class n{constructor(e,t,r,i,s=H.min(),o=H.min(),c=Ve.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ph=class{constructor(e){this.ct=e}};function Zb(n){let e=Kb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yh(e,e.limit,"L"):e}var wa=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(he(e.integerValue));else if("doubleValue"in e){let r=he(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ds(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Bt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(pn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Ay(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ty(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(he(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};wa.vt=new wa;var Dh=class{constructor(){this.un=new Nh}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(jn.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Nh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Me(pe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Me(pe.comparator)).toArray()}};var XN=new Uint8Array(0);var yt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};yt.DEFAULT_COLLECTION_PERCENTILE=10,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yt.DEFAULT=new yt(41943040,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yt.DISABLED=new yt(-1,0,0);var Es=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Oh=class{constructor(){this.changes=new mn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var kh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Lh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hs(r.mutation,i,Vn.empty(),xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,t,r=te()){let i=Un();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=os();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Un();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,te()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=gn(),o=us(),c=function(){return us()}();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Ur)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),hs(f.mutation,d,f.mutation.getFieldMask(),xe.now())):o.set(d.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new kh(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=us(),i=new me((o,c)=>o-c),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||Vn.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||te()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=xy();f.forEach(w=>{if(!s.has(w)){let b=By(t.get(w),r.get(w));b!==null&&g.set(w,b),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ny(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Un()),c=-1,u=s;return o.next(d=>O.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(w=>{u=u.insert(f,w)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,te())).next(f=>({batchId:c,changes:Pb(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=os();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=os();return this.indexManager.getCollectionParents(e,s).next(c=>O.forEach(c,u=>{let d=function(g,w){return new $n(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,w)=>{o=o.insert(g,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,ct.newInvalidDocument(f)))});let c=os();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&hs(f.mutation,d,Vn.empty(),xe.now()),Fa(t,d)&&(c=c.insert(u,d))}),c})}};var xh=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Sr(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Zb(i.bundledQuery),readTime:Sr(i.readTime)}}(t)),O.resolve()}};var Mh=class{constructor(){this.overlays=new me(j.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Un();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Un(),s=t.length+1,o=new j(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new me((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Un(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Un(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return O.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Eh(t,r));let s=this.Ir.get(t);s===void 0&&(s=te(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Vh=class{constructor(){this.sessionToken=Ve.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var ws=class{constructor(){this.Tr=new Me(Ie.Er),this.dr=new Me(Ie.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ie(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ie(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new pe([])),r=new Ie(t,e),i=new Ie(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new pe([])),r=new Ie(t,e),i=new Ie(t,e+1),s=te();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ie(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ie=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||j.comparator(e.key,t.key)}};var Uh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Me(Ie.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ih(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Ie(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ie(t,0),i=new Ie(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Me(ie);return t.forEach(i=>{let s=new Ie(i,0),o=new Ie(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;j.isDocumentKey(s)||(s=s.child(""));let o=new Ie(new j(s),0),c=new Me(ie);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){fe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let s=new Ie(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ie(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Fh=class{constructor(e){this.Mr=e,this.docs=function(){return new me(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(t))}getEntries(e,t){let r=gn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=gn(),o=t.path,c=new j(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||fb(db(f),r)<=0||(i.has(f.key)||Fa(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bh(this)}getSize(e){return O.resolve(this.size)}},Bh=class extends Oh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var jh=class{constructor(e){this.persistence=e,this.Nr=new mn(t=>kd(t),Ld),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ws,this.targetCount=0,this.kr=Es.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Es(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var qh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ey(0),this.Kr=!1,this.Kr=!0,this.$r=new Vh,this.referenceDelegate=e(this),this.Ur=new jh(this),this.indexManager=new Dh,this.remoteDocumentCache=function(i){return new Fh(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ph(t),this.Gr=new xh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Uh(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new $h(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},$h=class extends rh{constructor(e){super(),this.currentSequenceNumber=e}},zh=class n{constructor(e){this.persistence=e,this.Jr=new ws,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,H.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Gh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=te(),i=te();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Wh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Hh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Og()?8:mb(Te())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Wh;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ss()<=Y.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ir(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(ss()<=Y.DEBUG&&V("QueryEngine","Query:",Ir(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ss()<=Y.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ir(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,It(t))):O.resolve())}Yi(e,t){if(Y_(t))return O.resolve(null);let r=It(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yh(t,null,"F"),r=It(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=te(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,o,u.readTime)?this.Yi(e,yh(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return Y_(t)||i.isEqual(H.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?O.resolve(null):(ss()<=Y.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ir(t)),this.rs(e,o,t,hb(i,-1)).next(c=>c))})}ts(e,t){let r=new Me(ky(e));return t.forEach((i,s)=>{Fa(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ss()<=Y.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ir(t)),this.Ji.getDocumentsMatchingQuery(e,t,jn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Kh=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new me(ie),this._s=new mn(s=>kd(s),Ld),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function e0(n,e,t,r){return new Kh(n,e,t,r)}function Yy(n,e){return v(this,null,function*(){let t=Z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=te();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function Xy(n){let e=Z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function t0(n,e){let t=Z(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let w=i.get(g);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let b=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Ve.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):f.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(f.resumeToken,r)),i=i.insert(g,b),function(D,C,B){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(w,b,f)&&c.push(t.Ur.updateTargetData(s,b))});let u=gn(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(n0(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(H.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function n0(n,e,t){let r=te(),i=te();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=gn();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(H.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):V("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function r0(n,e){let t=Z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Is(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Qh(n,e,t){return v(this,null,function*(){let r=Z(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Cs(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function cy(n,e,t){let r=Z(n),i=H.min(),s=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let g=Z(u),w=g._s.get(f);return w!==void 0?O.resolve(g.os.get(w)):g.Ur.getTargetData(d,f)}(r,o,It(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:H.min(),t?s:te())).next(c=>(i0(r,Sb(e),c),{documents:c,Ts:s})))}function i0(n,e,t){let r=n.us.get(e)||H.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Ta=class{constructor(){this.activeTargetIds=Ob()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Jh=class{constructor(){this.so=new Ta,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ta,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Yh=class{_o(e){}shutdown(){}};var Aa=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var la=null;function Gl(){return la===null?la=function(){return 268435456+Math.round(2147483648*Math.random())}():la++,"0x"+la.toString(16)}var s0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Xh=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Le="WebChannelConnection",Zh=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=Gl(),u=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(f=>(V("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Pr("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=s0[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Gl();return new Promise((o,c)=>{let u=new Ul;u.setWithCredentials(!0),u.listenOnce(Fl.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case is.NO_ERROR:let f=u.getResponseJson();V(Le,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case is.TIMEOUT:V(Le,`RPC '${e}' ${s} timed out`),c(new M(N.DEADLINE_EXCEEDED,"Request time out"));break;case is.HTTP_ERROR:let g=u.getStatus();if(V(Le,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let P=function(C){let B=C.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(B)>=0?B:N.UNKNOWN}(b.status);c(new M(P,b.message))}else c(new M(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new M(N.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{V(Le,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);V(Le,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Gl(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ql(),c=jl(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=s.join("");V(Le,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=o.createWebChannel(f,u),w=!1,b=!1,P=new Xh({Io:C=>{b?V(Le,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(w||(V(Le,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),V(Le,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},To:()=>g.close()}),D=(C,B,G)=>{C.listen(B,x=>{try{G(x)}catch(q){setTimeout(()=>{throw q},0)}})};return D(g,vr.EventType.OPEN,()=>{b||(V(Le,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),D(g,vr.EventType.CLOSE,()=>{b||(b=!0,V(Le,`RPC '${e}' stream ${i} transport closed`),P.So())}),D(g,vr.EventType.ERROR,C=>{b||(b=!0,Pr(Le,`RPC '${e}' stream ${i} transport errored:`,C),P.So(new M(N.UNAVAILABLE,"The operation could not be completed")))}),D(g,vr.EventType.MESSAGE,C=>{var B;if(!b){let G=C.data[0];fe(!!G);let x=G,q=x.error||((B=x[0])===null||B===void 0?void 0:B.error);if(q){V(Le,`RPC '${e}' stream ${i} received error:`,q);let se=q.status,Q=function(y){let I=ve[y];if(I!==void 0)return qy(I)}(se),E=q.message;Q===void 0&&(Q=N.INTERNAL,E="Unknown error status: "+se+" with message "+q.message),b=!0,P.So(new M(Q,E)),g.close()}else V(Le,`RPC '${e}' stream ${i} received:`,G),P.bo(G)}}),D(c,Bl.STAT_EVENT,C=>{C.stat===ca.PROXY?V(Le,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===ca.NOPROXY&&V(Le,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}};function Wl(){return typeof document<"u"?document:null}function Ba(n){return new Rh(n,!0)}var Ra=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ed=class{constructor(e,t,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ra(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Ft(t.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new M(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},td=class extends ed{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Gb(this.serializer,e),r=function(s){if(!("targetChange"in s))return H.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?H.min():o.readTime?Sr(o.readTime):H.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=ay(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=gh(u)?{documents:Wb(s,u)}:{query:Hb(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=$y(s,o.resumeToken);let d=Sh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(H.min())>0){c.readTime=bh(s,o.snapshotVersion.toTimestamp());let d=Sh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=Qb(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=ay(this.serializer),t.removeTarget=e,this.a_(t)}};var nd=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new M(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ch(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ch(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},rd=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ft(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var id=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>v(this,null,function*(){Ns(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let d=Z(u);d.L_.add(4),yield Ds(d),d.q_.set("Unknown"),d.L_.delete(4),yield ja(d)})}(this))}))}),this.q_=new rd(r,i)}};function ja(n){return v(this,null,function*(){if(Ns(n))for(let e of n.B_)yield e(!0)})}function Ds(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Zy(n,e){let t=Z(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Fd(t)?Ud(t):qr(t).r_()&&Vd(t,e))}function Md(n,e){let t=Z(n),r=qr(t);t.N_.delete(e),r.r_()&&ev(t,e),t.N_.size===0&&(r.r_()?r.o_():Ns(t)&&t.q_.set("Unknown"))}function Vd(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qr(n).A_(e)}function ev(n,e){n.Q_.xe(e),qr(n).R_(e)}function Ud(n){n.Q_=new Ah({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),qr(n).start(),n.q_.v_()}function Fd(n){return Ns(n)&&!qr(n).n_()&&n.N_.size>0}function Ns(n){return Z(n).L_.size===0}function tv(n){n.Q_=void 0}function o0(n){return v(this,null,function*(){n.q_.set("Online")})}function a0(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{Vd(n,e)})})}function c0(n,e){return v(this,null,function*(){tv(n),Fd(n)?(n.q_.M_(e),Ud(n)):n.q_.set("Unknown")})}function u0(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof Ia&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uy(n,r)}else if(e instanceof Rr?n.Q_.Ke(e):e instanceof va?n.Q_.He(e):n.Q_.We(e),!t.isEqual(H.min()))try{let r=yield Xy(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Ve.EMPTY_BYTE_STRING,f.snapshotVersion)),ev(s,u);let g=new Is(f.target,u,d,f.sequenceNumber);Vd(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield uy(n,r)}})}function uy(n,e,t){return v(this,null,function*(){if(!Cs(e))throw e;n.L_.add(1),yield Ds(n),n.q_.set("Offline"),t||(t=()=>Xy(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ja(n)}))})}function ly(n,e){return v(this,null,function*(){let t=Z(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Ns(t);t.L_.add(3),yield Ds(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ja(t)})}function l0(n,e){return v(this,null,function*(){let t=Z(n);e?(t.L_.delete(2),yield ja(t)):e||(t.L_.add(2),yield Ds(t),t.q_.set("Unknown"))})}function qr(n){return n.K_||(n.K_=function(t,r,i){let s=Z(t);return s.w_(),new td(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:o0.bind(null,n),Ro:a0.bind(null,n),mo:c0.bind(null,n),d_:u0.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),Fd(n)?Ud(n):n.q_.set("Unknown")):(yield n.K_.stop(),tv(n))}))),n.K_}var sd=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nv(n,e){if(Ft("AsyncQueue",`${e}: ${n}`),Cs(n))return new M(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Sa=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=os(),this.sortedSet=new me(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ba=class{constructor(){this.W_=new me(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Fr=class n{constructor(e,t,r,i,s,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Sa.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ua(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var od=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ad=class{constructor(){this.queries=hy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Z(t),s=i.queries;i.queries=hy(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new M(N.ABORTED,"Firestore shutting down"))}};function hy(){return new mn(n=>Oy(n),Ua)}function h0(n,e){return v(this,null,function*(){let t=Z(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new od,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=nv(o,`Initialization of query '${Ir(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Bd(t)})}function d0(n,e){return v(this,null,function*(){let t=Z(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function f0(n,e){let t=Z(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Bd(t)}function p0(n,e,t){let r=Z(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Bd(n){n.Y_.forEach(e=>{e.next()})}var cd,dy;(dy=cd||(cd={})).ea="default",dy.Cache="cache";var ud=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Fr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==cd.Cache}};var Ca=class{constructor(e){this.key=e}},Pa=class{constructor(e){this.key=e}},ld=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=ky(e),this.Ra=new Sa(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ba,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let w=i.get(f),b=Fa(this.query,g)?g:null,P=!!w&&this.mutatedKeys.has(w.key),D=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),C=!1;w&&b?w.data.isEqual(b.data)?P!==D&&(r.track({type:3,doc:b}),C=!0):this.ga(w,b)||(r.track({type:2,doc:b}),C=!0,(u&&this.Aa(b,u)>0||d&&this.Aa(b,d)<0)&&(c=!0)):!w&&b?(r.track({type:0,doc:b}),C=!0):w&&!b&&(r.track({type:1,doc:w}),C=!0,(u||d)&&(c=!0)),C&&(b?(o=o.add(b),s=D?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(b,P){let D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return D(b)-D(P)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Fr(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ba,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Pa(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ca(r))}),t}ba(e){this.Ta=e.Ts,this.da=te();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Fr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},hd=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},dd=class{constructor(e){this.key=e,this.va=!1}},fd=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new mn(c=>Oy(c),Ua),this.Ma=new Map,this.xa=new Set,this.Oa=new me(j.comparator),this.Na=new Map,this.La=new ws,this.Ba={},this.ka=new Map,this.qa=Es.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function m0(n,e,t=!0){return v(this,null,function*(){let r=av(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield rv(r,e,t,!0),i})}function g0(n,e){return v(this,null,function*(){let t=av(n);yield rv(t,e,!0,!1)})}function rv(n,e,t,r){return v(this,null,function*(){let i=yield r0(n.localStore,It(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield _0(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Zy(n.remoteStore,i),c})}function _0(n,e,t,r,i){return v(this,null,function*(){n.Ka=(g,w,b)=>function(D,C,B,G){return v(this,null,function*(){let x=C.view.ma(B);x.ns&&(x=yield cy(D.localStore,C.query,!1).then(({documents:E})=>C.view.ma(E,x)));let q=G&&G.targetChanges.get(C.targetId),se=G&&G.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(x,D.isPrimaryClient,q,se);return py(D,C.targetId,Q.wa),Q.snapshot})}(n,g,w,b);let s=yield cy(n.localStore,e,!0),o=new ld(e,s.Ts),c=o.ma(s.documents),u=vs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);py(n,t,d.wa);let f=new hd(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function y0(n,e,t){return v(this,null,function*(){let r=Z(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ua(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Md(r.remoteStore,i.targetId),pd(r,i.targetId)}).catch(Pd))):(pd(r,i.targetId),yield Qh(r.localStore,i.targetId,!0))})}function v0(n,e){return v(this,null,function*(){let t=Z(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Md(t.remoteStore,r.targetId))})}function iv(n,e){return v(this,null,function*(){let t=Z(n);try{let r=yield t0(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?fe(o.va):i.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),yield ov(t,r,e)}catch(r){yield Pd(r)}})}function fy(n,e,t){let r=Z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=Z(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let w of g.j_)w.Z_(c)&&(d=!0)}),d&&Bd(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I0(n,e,t){return v(this,null,function*(){let r=Z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new me(j.comparator);o=o.insert(s,ct.newNoDocument(s,H.min()));let c=te().add(s),u=new ya(H.min(),new Map,new me(ie),o,c);yield iv(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),jd(r)}else yield Qh(r.localStore,e,!1).then(()=>pd(r,e,t)).catch(Pd)})}function pd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||sv(n,r)})}function sv(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Md(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),jd(n))}function py(n,e,t){for(let r of t)r instanceof Ca?(n.La.addReference(r.key,e),E0(n,r)):r instanceof Pa?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||sv(n,r.key)):z()}function E0(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),jd(n))}function jd(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(pe.fromString(e)),r=n.qa.next();n.Na.set(r,new dd(t)),n.Oa=n.Oa.insert(t,r),Zy(n.remoteStore,new Is(It(Dy(t.path)),r,"TargetPurposeLimboResolution",Ey.oe))}}function ov(n,e,t){return v(this,null,function*(){let r=Z(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=Gh.Wi(u.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,d){return v(this,null,function*(){let f=Z(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(d,w=>O.forEach(w.$i,b=>f.persistence.referenceDelegate.addReference(g,w.targetId,b)).next(()=>O.forEach(w.Ui,b=>f.persistence.referenceDelegate.removeReference(g,w.targetId,b)))))}catch(g){if(!Cs(g))throw g;V("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let w=g.targetId;if(!g.fromCache){let b=f.os.get(w),P=b.snapshotVersion,D=b.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(w,D)}}})}(r.localStore,s))})}function w0(n,e){return v(this,null,function*(){let t=Z(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield Yy(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new M(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ov(t,r.hs)}})}function T0(n,e){let t=Z(n),r=t.Na.get(e);if(r&&r.va)return te().add(r.key);{let i=te(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function av(n){let e=Z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I0.bind(null,e),e.Ca.d_=f0.bind(null,e.eventManager),e.Ca.$a=p0.bind(null,e.eventManager),e}var my=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Ba(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return e0(this.persistence,new Hh,t.initialUser,this.serializer)}Ga(t){return new qh(zh.Zr,this.serializer)}Wa(t){return new Jh}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var A0=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=w0.bind(null,this.syncEngine),yield l0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ad}()}createDatastore(t){let r=Ba(t.databaseInfo.databaseId),i=function(o){return new Zh(o)}(t.databaseInfo);return function(o,c,u,d){return new nd(o,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,u){return new id(i,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>fy(this.syncEngine,r,0),function(){return Aa.D()?new Aa:new Yh}())}createSyncEngine(t,r){return function(s,o,c,u,d,f,g){let w=new fd(s,o,c,u,d,f);return g&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(s){return v(this,null,function*(){let o=Z(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ds(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var md=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var gd=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ae.UNAUTHENTICATED,this.clientId=th.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>v(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=nv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Hl(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield Yy(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function gy(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield R0(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ly(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ly(e.remoteStore,i)),n._onlineComponents=e})}function R0(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Pr("Error using user provided cache. Falling back to memory cache: "+t),yield Hl(n,new my)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Hl(n,new my);return n._offlineComponents})}function S0(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield gy(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield gy(n,new A0))),n._onlineComponents})}function b0(n){return v(this,null,function*(){let e=yield S0(n),t=e.eventManager;return t.onListen=m0.bind(null,e.syncEngine),t.onUnlisten=y0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=g0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v0.bind(null,e.syncEngine),t})}function C0(n,e,t={}){let r=new Ut;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,c,u,d){let f=new md({next:w=>{f.Za(),o.enqueueAndForget(()=>d0(s,g)),w.fromCache&&u.source==="server"?d.reject(new M(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),g=new ud(c,f,{includeMetadataChanges:!0,_a:!0});return h0(s,g)}(yield b0(n),n.asyncQueue,e,t,r)})),r.promise}function cv(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _y=new Map;function P0(n,e,t){if(!t)throw new M(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function D0(n,e,t,r){if(e===!0&&r===!0)throw new M(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yy(n){if(j.isDocumentKey(n))throw new M(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qa(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function _d(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=qa(n);throw new M(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Da=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new M(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new M(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new M(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ts=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Da({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new M(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Da(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kl;switch(r.type){case"firstParty":return new Xl(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=_y.get(t);r&&(V("ComponentProvider","Removing Datastore"),_y.delete(t),r.terminate())}(this),Promise.resolve()}};function uv(n,e,t,r={}){var i;let s=(n=_d(n,Ts))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ae.MOCK_USER;else{c=Uo(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new M(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ae(d)}n._authCredentials=new Ql(new da(c,u))}}var Br=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},br=class n extends Br{constructor(e,t,r){super(e,t,Dy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function lv(n,e,...t){if(n=$e(n),P0("collection","path",e),n instanceof Ts){let r=pe.fromString(e,...t);return yy(r),new br(n,null,r)}{if(!(n instanceof jt||n instanceof br))throw new M(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return yy(r),new br(n.firestore,null,r)}}var Na=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ra(this,"async_queue_retry"),this.Vu=()=>{let r=Wl();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Wl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Wl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Ut;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cs(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Ft("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=sd.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Oa=class extends Ts{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Na,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Na(e),this._firestoreClient=void 0,yield e}})}};function hv(n,e){let t=typeof n=="object"?n:an(),r=typeof n=="string"?n:e||"(default)",i=Pn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Vo("firestore");s&&uv(i,...s)}return i}function N0(n){if(n._terminated)throw new M(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||O0(n),n._firestoreClient}function O0(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,f){return new ih(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,cv(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new gd(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var As=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ve.fromBase64String(e))}catch(t){throw new M(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ka=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var La=class{constructor(e){this._methodName=e}};var Rs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var Ss=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var k0=/^__.*__$/;function dv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var yd=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Id(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(dv(this.Cu)&&k0.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},vd=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ba(e)}Qu(e,t,r,i=!1){return new yd({Cu:e,methodName:t,qu:r,path:nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function L0(n){let e=n._freezeSettings(),t=Ba(n._databaseId);return new vd(n._databaseId,!!e.ignoreUndefinedProperties,t)}function x0(n,e,t,r=!1){return qd(t,n.Qu(r?4:3,e))}function qd(n,e){if(fv(n=$e(n)))return V0("Unsupported field value:",e,n),M0(n,e);if(n instanceof La)return function(r,i){if(!dv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=qd(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=xe.fromDate(r);return{timestampValue:bh(i.serializer,s)}}if(r instanceof xe){let s=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bh(i.serializer,s)}}if(r instanceof Rs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof As)return{bytesValue:$y(i.serializer,r._byteString)};if(r instanceof jt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ss)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return xd(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${qa(r)}`)}(n,e)}function M0(n,e){let t={};return wy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(n,(r,i)=>{let s=qd(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function fv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xe||n instanceof Rs||n instanceof As||n instanceof jt||n instanceof La||n instanceof Ss)}function V0(n,e,t){if(!fv(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=qa(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}var U0=new RegExp("[~\\*/\\[\\]]");function F0(n,e,t){if(e.search(U0)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ka(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Id(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new M(N.INVALID_ARGUMENT,c+n+u)}var xa=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ed(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($d("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ed=class extends xa{data(){return super.data()}};function $d(n,e){return typeof e=="string"?F0(n,e):e instanceof ka?e._internalPath:e._delegate._internalPath}function B0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new M(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bs=class{},wd=class extends bs{};function pv(n,e,...t){let r=[];e instanceof bs&&r.push(e),r=r.concat(t),function(s){let o=s.filter(u=>u instanceof Td).length,c=s.filter(u=>u instanceof Ma).length;if(o>1||o>0&&c>0)throw new M(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ma=class n extends wd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return gv(e._query,t),new Br(e.firestore,e.converter,_h(e._query,t))}_parse(e){let t=L0(e.firestore);return function(s,o,c,u,d,f,g){let w;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new M(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Iy(g,f);let b=[];for(let P of g)b.push(vy(u,s,P));w={arrayValue:{values:b}}}else w=vy(u,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Iy(g,f),w=x0(c,o,g,f==="in"||f==="not-in");return Ee.create(d,f,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function mv(n,e,t){let r=e,i=$d("where",n);return Ma._create(i,r,t)}var Td=class n extends bs{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ut.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)gv(o,u),o=_h(o,u)}(e._query,t),new Br(e.firestore,e.converter,_h(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function vy(n,e,t){if(typeof(t=$e(t))=="string"){if(t==="")throw new M(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ny(e)&&t.indexOf("/")!==-1)throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(pe.fromString(t));if(!j.isDocumentKey(r))throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return G_(n,new j(r))}if(t instanceof jt)return G_(n,t._key);throw new M(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qa(t)}.`)}function Iy(n,e){if(!Array.isArray(n)||n.length===0)throw new M(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gv(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new M(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ad=class{convertValue(e,t="none"){switch(qn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return he(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ps(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>he(o.doubleValue));return new Ss(s)}convertGeoPoint(e){return new Rs(he(e.latitude),he(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Nd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fs(e));default:return null}}convertTimestamp(e){let t=Bt(e);return new xe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=pe.fromString(e);fe(Jy(r));let i=new ga(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(t)||Ft(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Ar=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rd=class extends xa{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Cr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($d("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Cr=class extends Rd{data(e={}){return super.data(e)}},Sd=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ar(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Cr(this._firestore,this._userDataWriter,r.key,r,new Ar(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Cr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ar(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Cr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ar(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:j0(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function j0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}var bd=class extends Ad{constructor(e){super(),this.firestore=e}convertBytes(e){return new As(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}};function _v(n){n=_d(n,Br);let e=_d(n.firestore,Oa),t=N0(e),r=new bd(e);return B0(n._query),C0(t,n._query).then(i=>new Sd(e,r,n,i))}(function(e,t=!0){(function(i){jr=i})(gt),mt(new ze("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Oa(new Jl(r.getProvider("auth-internal")),new eh(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new M(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),le(j_,"4.7.3",e),le(j_,"4.7.3","esm2017")})();var Os=class{constructor(e){return e}},yv="firestore",zd=class{constructor(){return Nn(yv)}};var Gd=new ee("angularfire2.firestore-instances");function q0(n,e){let t=gr(yv,n,e);return t&&new Os(t)}function $0(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Os(r)}}var z0={provide:zd,deps:[[new _e,Gd]]},G0={provide:Os,useFactory:q0,deps:[[new _e,Gd],at]};function Ik(n,...e){return le("angularfire",Ot.full,"fst"),je([G0,z0,{provide:Gd,useFactory:$0(n),multi:!0,deps:[ye,it,un,kt,[new _e,Mn],[new _e,cn],...e]}])}var Ek=tt(lv,!0);var wk=tt(_v,!0);var Tk=tt(hv,!0);var Ak=tt(pv,!0);var Rk=tt(mv,!0);var Av="firebasestorage.googleapis.com",W0="storageBucket",H0=2*60*1e3,K0=10*60*1e3;var wt=class n extends Be{constructor(e,t,r=0){super(Wd(e),`Firebase Storage: ${t} (${Wd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},$t=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}($t||{});function Wd(n){return"storage/"+n}function Q0(){let n="An unknown error occurred, please check the error payload for server response.";return new wt($t.UNKNOWN,n)}function J0(){return new wt($t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Y0(){return new wt($t.CANCELED,"User canceled the upload/download.")}function X0(n){return new wt($t.INVALID_URL,"Invalid URL '"+n+"'.")}function Z0(n){return new wt($t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function vv(n){return new wt($t.INVALID_ARGUMENT,n)}function Rv(){return new wt($t.APP_DELETED,"The Firebase app was deleted.")}function eC(n){return new wt($t.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var qt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw Z0(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(q){q.path_=decodeURIComponent(q.path)}let f="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${f}/b/${i}/o${w}`,"i"),P={bucket:1,path:3},D=t===Av?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",B=new RegExp(`^https?://${D}/${i}/${C}`,"i"),x=[{regex:c,indices:u,postModify:s},{regex:b,indices:P,postModify:d},{regex:B,indices:{bucket:1,path:2},postModify:d}];for(let q=0;q<x.length;q++){let se=x[q],Q=se.regex.exec(e);if(Q){let E=Q[se.indices.bucket],m=Q[se.indices.path];m||(m=""),r=new n(E,m),se.postModify(r);break}}if(r==null)throw X0(e);return r}},Hd=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function tC(n,e,t){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...C){d||(d=!0,e.apply(null,C))}function g(C){i=setTimeout(()=>{i=null,n(b,u())},C)}function w(){s&&clearTimeout(s)}function b(C,...B){if(d){w();return}if(C){w(),f.call(null,C,...B);return}if(u()||o){w(),f.call(null,C,...B);return}r<64&&(r*=2);let x;c===1?(c=2,x=0):x=(r+Math.random())*1e3,g(x)}let P=!1;function D(C){P||(P=!0,w(),!d&&(i!==null?(C||(c=2),clearTimeout(i),g(0)):C||(c=1)))}return g(0),s=setTimeout(()=>{o=!0,D(!0)},t),D}function nC(n){n(!1)}function rC(n){return n!==void 0}function Iv(n,e,t,r){if(r<e)throw vv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw vv(`Invalid value for '${n}'. Expected ${t} or less.`)}function iC(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Kd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Kd||{});function sC(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var Qd=class{constructor(e,t,r,i,s,o,c,u,d,f,g,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,P)=>{this.resolve_=b,this.reject_=P,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new $r(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===Kd.NO_ERROR,u=s.getStatus();if(!c||sC(u,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===Kd.ABORT;r(!1,new $r(!1,null,f));return}let d=this.successCodes_.indexOf(u)!==-1;r(!0,new $r(d,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(c,c.getResponse());rC(u)?s(u):s()}catch(u){o(u)}else if(c!==null){let u=Q0();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){let u=this.appDelete_?Rv():Y0();o(u)}else{let u=J0();o(u)}};this.canceled_?t(!1,new $r(!1,null,!0)):this.backoffId_=tC(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},$r=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function oC(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function aC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cC(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uC(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function lC(n,e,t,r,i,s,o=!0){let c=iC(n.urlParams),u=n.url+c,d=Object.assign({},n.headers);return cC(d,e),oC(d,t),aC(d,s),uC(d,r),new Qd(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function hC(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dC(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Nk=256*1024;var Jd=class n{constructor(e,t){this._service=e,t instanceof qt?this._location=t:this._location=qt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dC(this._location.path)}get storage(){return this._service}get parent(){let e=hC(this._location.path);if(e===null)return null;let t=new qt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw eC(e)}};function Ev(n,e){let t=e?.[W0];return t==null?null:qt.makeFromBucketSpec(t,n)}function fC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Uo(i,n.app.options.projectId))}var Yd=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Av,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=H0,this._maxUploadRetryTime=K0,this._requests=new Set,i!=null?this._bucket=qt.makeFromBucketSpec(i,this._host):this._bucket=Ev(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=Ev(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Iv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Iv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Hd(Rv());{let o=lC(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},wv="@firebase/storage",Tv="0.13.2";var Sv="storage";function bv(n=an(),e){n=$e(n);let r=Pn(n,Sv).getImmediate({identifier:e}),i=Vo("storage");return i&&Cv(r,...i),r}function Cv(n,e,t,r={}){fC(n,e,t,r)}function pC(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Yd(t,r,i,e,gt)}function mC(){mt(new ze(Sv,pC,"PUBLIC").setMultipleInstances(!0)),le(wv,Tv,""),le(wv,Tv,"esm2017")}mC();var ks=class{constructor(e){return e}},Pv="storage",Xd=class{constructor(){return Nn(Pv)}};var Zd=new ee("angularfire2.storage-instances");function gC(n,e){let t=gr(Pv,n,e);return t&&new ks(t)}function _C(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ks(r)}}var yC={provide:Xd,deps:[[new _e,Zd]]},vC={provide:ks,useFactory:gC,deps:[[new _e,Zd],at]};function nL(n,...e){return le("angularfire",Ot.full,"gcs"),je([vC,yC,{provide:Zd,useFactory:_C(n),multi:!0,deps:[ye,it,un,kt,[new _e,Mn],[new _e,cn],...e]}])}var rL=tt(bv,!0);export{yI as a,DC as b,Em as c,eP as d,cE as e,tP as f,nn as g,BE as h,ft as i,Vm as j,IP as k,EP as l,tT as m,wP as n,be as o,RP as p,SP as q,lT as r,VP as s,UP as t,FP as u,BP as v,jP as w,qP as x,$P as y,zP as z,GP as A,LD as B,xD as C,kN as D,LN as E,Os as F,Ik as G,Ek as H,wk as I,Tk as J,Ak as K,Rk as L,ks as M,nL as N,rL as O};
