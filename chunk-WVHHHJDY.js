import{$ as fu,$a as Iu,$b as Gm,A as Ni,Aa as _u,B as dm,Ba as Em,Bb as jm,C as cu,Ca as Et,Db as qm,Ea as yu,Eb as $m,F as It,Fa as vu,G as pr,Ga as Er,H as cn,Ha as wr,Hc as tg,Ia as wm,J as uu,Ja as Tm,Jc as Bi,K as mr,Ka as Am,Kc as ng,L as fm,La as Rm,Lc as xo,M as gr,Ma as Sm,N as un,Na as bm,Nb as Li,O as lu,Oa as Cm,P as pm,Pa as Ln,Q as hu,R as du,S as et,Sa as Pm,T as mm,U as ve,Ua as xi,V as le,Wa as tt,X as J,Xa as Dm,Y as _r,Ya as Nm,Yb as Co,Z as gm,Zb as zm,_ as ne,_a as Om,_b as Po,a as V,aa as Y,ab as km,ac as Ru,b as De,ba as F,bb as xm,bc as Mi,c as om,ca as Ie,cb as Eu,cc as Vi,d as sn,da as _m,dc as Wm,e as I,ea as Oi,eb as Lm,ec as Do,f as am,fa as ki,fb as Mm,g as nu,ga as yr,gb as wu,gc as No,h as on,ha as vr,i as ru,ib as Vm,ic as Hm,j as iu,ja as He,jb as Um,jc as Km,k as Xe,ka as ym,kc as Oo,l as ot,la as xn,m as cm,ma as at,n as um,na as So,o as an,p as su,pc as Qm,q as ou,qc as Su,r as au,ra as pu,rb as Fm,rc as Jm,s as Ne,sa as vm,sc as Ym,t as $,ta as dt,tc as Ke,u as Di,ua as bo,uc as Xm,v as lm,va as Ir,vc as Ui,w as hm,wa as Ee,wb as Bm,wc as Zm,x as ee,xa as mu,xc as eg,y as Ro,ya as gu,yb as Tu,yc as Fi,z as Ze,za as Im,zb as Au,zc as ko}from"./chunk-KJXMVPC6.js";var qi=class{},Vo=class{},wt=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Cu=class{encodeKey(e){return rg(e)}encodeValue(e){return rg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function HE(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(c),t.set(o,u)}),t}var KE=/%(\d[a-f0-9])/gi,QE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function rg(n){return encodeURIComponent(n).replace(KE,(e,t)=>QE[t]??e)}function Lo(n){return`${n}`}var hn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Cu,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=HE(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Lo):[Lo(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Lo(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Lo(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Pu=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function JE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ig(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sg(n){return typeof Blob<"u"&&n instanceof Blob}function og(n){return typeof FormData<"u"&&n instanceof FormData}function YE(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ji=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(JE(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new wt,this.context??=new Pu,!this.params)this.params=new hn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ig(this.body)||sg(this.body)||og(this.body)||YE(this.body)?this.body:this.body instanceof hn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||og(this.body)?null:sg(this.body)?this.body.type||null:ig(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof hn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,h=e.headers||this.headers,f=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((_,R)=>_.set(R,e.setHeaders[R]),h)),e.setParams&&(f=Object.keys(e.setParams).reduce((_,R)=>_.set(R,e.setParams[R]),f)),new n(t,r,o,{params:f,headers:h,context:m,reportProgress:u,responseType:i,withCredentials:c,transferCache:s})}},dn=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(dn||{}),$i=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new wt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Uo=class n extends $i{constructor(e={}){super(e),this.type=dn.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Mn=class n extends $i{constructor(e={}){super(e),this.type=dn.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ln=class extends $i{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},_g=200,XE=204;function bu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ZE=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ji)s=t;else{let u;i.headers instanceof wt?u=i.headers:u=new wt(i.headers);let h;i.params&&(i.params instanceof hn?h=i.params:h=new hn({fromObject:i.params})),s=new ji(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=$(s).pipe(cn(u=>this.handler.handle(u)));if(t instanceof ji||i.observe==="events")return o;let c=o.pipe(It(u=>u instanceof Mn));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ee(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(ee(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(ee(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(ee(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new hn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,bu(i,r))}post(t,r,i={}){return this.request("POST",t,bu(i,r))}put(t,r,i={}){return this.request("PUT",t,bu(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Y(qi))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),ew=/^\)\]\}',?\n/,tw="X-Request-URL";function ag(n){if(n.url)return n.url;let e=tw.toLocaleLowerCase();return n.headers.get(e)}var nw=(()=>{class n{constructor(){this.fetchImpl=F(Du,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=F(Ee)}handle(t){return new on(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Nu,s=>r.error(new ln({error:s}))),()=>i.abort()})}doRequest(t,r,i){return I(this,null,function*(){let s=this.createRequestInit(t),o;try{let R=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,V({signal:r},s)));rw(R),i.next({type:dn.Sent}),o=yield R}catch(R){i.error(new ln({error:R,status:R.status??0,statusText:R.statusText,url:t.urlWithParams,headers:R.headers}));return}let c=new wt(o.headers),u=o.statusText,h=ag(o)??t.urlWithParams,f=o.status,m=null;if(t.reportProgress&&i.next(new Uo({headers:c,status:f,statusText:u,url:h})),o.body){let R=o.headers.get("content-length"),P=[],D=o.body.getReader(),b=0,M,B,x=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>I(this,null,function*(){for(;;){let{done:re,value:H}=yield D.read();if(re)break;if(P.push(H),b+=H.length,t.reportProgress){B=t.responseType==="text"?(B??"")+(M??=new TextDecoder).decode(H,{stream:!0}):void 0;let w=()=>i.next({type:dn.DownloadProgress,total:R?+R:void 0,loaded:b,partialText:B});x?x.run(w):w()}}}));let j=this.concatChunks(P,b);try{let re=o.headers.get("Content-Type")??"";m=this.parseBody(t,j,re)}catch(re){i.error(new ln({error:re,headers:new wt(o.headers),status:o.status,statusText:o.statusText,url:ag(o)??t.urlWithParams}));return}}f===0&&(f=m?_g:0),f>=200&&f<300?(i.next(new Mn({body:m,headers:c,status:f,statusText:u,url:h})),i.complete()):i.error(new ln({error:m,headers:c,status:f,statusText:u,url:h}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(ew,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Du=class{};function Nu(){}function rw(n){n.then(Nu,Nu)}function iw(n,e){return e(n)}function sw(n,e,t){return(r,i)=>at(t,()=>e(r,s=>n(s,i)))}var yg=new ne(""),vg=new ne(""),ow=new ne("",{providedIn:"root",factory:()=>!0});var cg=(()=>{class n extends qi{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=F(bo),this.contributeToStability=F(ow)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(yg),...this.injector.get(vg,[])]));this.chain=r.reduceRight((i,s)=>sw(i,s,this.injector),iw)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(gr(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Y(Vo),Y(xn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();var aw=/^\)\]\}',?\n/;function cw(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ug=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new le(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ne(r.\u0275loadImpl()):$(null)).pipe(et(()=>new on(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,b)=>o.setRequestHeader(D,b.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let D=t.detectContentTypeHeader();D!==null&&o.setRequestHeader("Content-Type",D)}if(t.responseType){let D=t.responseType.toLowerCase();o.responseType=D!=="json"?D:"text"}let c=t.serializeBody(),u=null,h=()=>{if(u!==null)return u;let D=o.statusText||"OK",b=new wt(o.getAllResponseHeaders()),M=cw(o)||t.url;return u=new Uo({headers:b,status:o.status,statusText:D,url:M}),u},f=()=>{let{headers:D,status:b,statusText:M,url:B}=h(),x=null;b!==XE&&(x=typeof o.response>"u"?o.responseText:o.response),b===0&&(b=x?_g:0);let j=b>=200&&b<300;if(t.responseType==="json"&&typeof x=="string"){let re=x;x=x.replace(aw,"");try{x=x!==""?JSON.parse(x):null}catch(H){x=re,j&&(j=!1,x={error:H,text:x})}}j?(s.next(new Mn({body:x,headers:D,status:b,statusText:M,url:B||void 0})),s.complete()):s.error(new ln({error:x,headers:D,status:b,statusText:M,url:B||void 0}))},m=D=>{let{url:b}=h(),M=new ln({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(M)},_=!1,R=D=>{_||(s.next(h()),_=!0);let b={type:dn.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(b.total=D.total),t.responseType==="text"&&o.responseText&&(b.partialText=o.responseText),s.next(b)},P=D=>{let b={type:dn.UploadProgress,loaded:D.loaded};D.lengthComputable&&(b.total=D.total),s.next(b)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",R),c!==null&&o.upload&&o.upload.addEventListener("progress",P)),o.send(c),s.next({type:dn.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",R),c!==null&&o.upload&&o.upload.removeEventListener("progress",P)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Y(xo))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Ig=new ne(""),uw="XSRF-TOKEN",lw=new ne("",{providedIn:"root",factory:()=>uw}),hw="X-XSRF-TOKEN",dw=new ne("",{providedIn:"root",factory:()=>hw}),Fo=class{},fw=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ko(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Y(Ke),Y(Et),Y(lw))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function pw(n,e){let t=n.url.toLowerCase();if(!F(Ig)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=F(Fo).getToken(),i=F(dw);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function oN(...n){let e=[ZE,ug,cg,{provide:qi,useExisting:cg},{provide:Vo,useFactory:()=>F(nw,{optional:!0})??F(ug)},{provide:yg,useValue:pw,multi:!0},{provide:Ig,useValue:!0},{provide:Fo,useClass:fw}];for(let t of n)e.push(...t.\u0275providers);return He(e)}var mw=new ne(""),lg="b",hg="h",dg="s",fg="st",pg="u",mg="rt",Mo=new ne(""),gw=["GET","HEAD"];function _w(n,e){let R=F(Mo),{isCacheActive:t}=R,r=om(R,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!gw.includes(s)||!r.includeRequestsWithAuthHeaders&&yw(n)||r.filter?.(n)===!1)return e(n);let o=F(vu),c=F(mw,{optional:!0}),u=Bi(F(Et));if(c&&!u)throw new le(2803,!1);let h=u&&c?ww(n.url,c):n.url,f=Iw(n,h),m=o.get(f,null),_=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(_=i.includeHeaders),m){let{[lg]:P,[mg]:D,[hg]:b,[dg]:M,[fg]:B,[pg]:x}=m,j=P;switch(D){case"arraybuffer":j=new TextEncoder().encode(P).buffer;break;case"blob":j=new Blob([P]);break}let re=new wt(b);return $(new Mn({body:j,headers:re,status:M,statusText:B,url:x}))}return e(n).pipe(ve(P=>{P instanceof Mn&&u&&o.set(f,{[lg]:P.body,[hg]:vw(P.headers,_),[dg]:P.status,[fg]:P.statusText,[pg]:h,[mg]:n.responseType})}))}function yw(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function vw(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function gg(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Iw(n,e){let{params:t,method:r,responseType:i}=n,s=gg(t),o=n.serializeBody();o instanceof URLSearchParams?o=gg(o):typeof o!="string"&&(o="");let c=[r,i,e,o,s].join("|"),u=Ew(c);return u}function Ew(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Eg(n){return[{provide:Mo,useFactory:()=>(xm("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:vg,useValue:_w,multi:!0,deps:[vu,Mo]},{provide:Mi,multi:!0,useFactory:()=>{let e=F(Vi),t=F(Mo);return()=>{Wm(e).then(()=>{t.isCacheActive=!1})}}}]}function ww(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var xu=class extends Ym{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lu=class n extends xu{static makeCurrent(){Jm(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Aw();return t==null?null:Rw(t)}resetBaseElement(){zi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ko(document.cookie,e)}},zi=null;function Aw(){return zi=zi||document.querySelector("base"),zi?zi.getAttribute("href"):null}function Rw(n){return new URL(n,document.baseURI).pathname}var Sw=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Mu=new ne(""),Rg=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new le(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Y(Mu),Y(Ee))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),jo=class{constructor(e){this._doc=e}},Ou="ng-app-id",Sg=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bi(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ou}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Ou),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ou,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Y(Ke),Y(_u),Y(yu,8),Y(Et))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fu=/%COMP%/g,bg="%COMP%",bw=`_nghost-${bg}`,Cw=`_ngcontent-${bg}`,Pw=!0,Dw=new ne("",{providedIn:"root",factory:()=>Pw});function Nw(n){return Cw.replace(Fu,n)}function Ow(n){return bw.replace(Fu,n)}function Cg(n,e){return e.map(t=>t.replace(Fu,n))}var wg=(()=>{class n{constructor(t,r,i,s,o,c,u,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Bi(c),this.defaultRenderer=new Gi(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Oi.ShadowDom&&(r=De(V({},r),{encapsulation:Oi.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof qo?i.applyToHost(t):i instanceof Wi&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Oi.Emulated:s=new qo(u,h,r,this.appId,f,o,c,m);break;case Oi.ShadowDom:return new Vu(u,h,t,r,o,c,this.nonce,m);default:s=new Wi(u,h,r,f,o,c,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Y(Rg),Y(Sg),Y(_u),Y(Dw),Y(Ke),Y(Et),Y(Ee),Y(yu))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Gi=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ku[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Tg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Tg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new le(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=ku[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ku[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xi.DashCase|xi.Important)?e.style.setProperty(t,r,i&xi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Su().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Tg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vu=class extends Gi{constructor(e,t,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=Cg(i.id,i.styles);for(let f of h){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wi=class extends Gi{constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Cg(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qo=class extends Wi{constructor(e,t,r,i,s,o,c,u){let h=i+"-"+r.id;super(e,t,r,s,o,c,u,h),this.contentAttr=Nw(h),this.hostAttr=Ow(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},kw=(()=>{class n extends jo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Y(Ke))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Ag=["alt","control","meta","shift"],xw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lw={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Mw=(()=>{class n extends jo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Su().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Ag.forEach(h=>{let f=r.indexOf(h);f>-1&&(r.splice(f,1),o+=h+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=xw[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ag.forEach(o=>{if(o!==i){let c=Lw[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Y(Ke))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function DN(n,e){return Hm(V({rootComponent:n},Vw(e)))}function Vw(n){return{appProviders:[...qw,...n?.providers??[]],platformProviders:jw}}function Uw(){Lu.makeCurrent()}function Fw(){return new mu}function Bw(){return Im(document),document}var jw=[{provide:Et,useValue:tg},{provide:Em,useValue:Uw,multi:!0},{provide:Ke,useFactory:Bw,deps:[]}];var qw=[{provide:ym,useValue:"root"},{provide:mu,useFactory:Fw,deps:[]},{provide:Mu,useClass:kw,multi:!0,deps:[Ke,Ee,Et]},{provide:Mu,useClass:Mw,multi:!0,deps:[Ke]},wg,Sg,Rg,{provide:Om,useExisting:wg},{provide:xo,useClass:Sw,deps:[]},[]];var Pg=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Y(Ke))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $w=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=Y(zw),i},providedIn:"root"})}}return n})(),zw=(()=>{class n extends $w{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Ln.NONE:return r;case Ln.HTML:return wr(r,"HTML")?Er(r):Cm(this._doc,String(r)).toString();case Ln.STYLE:return wr(r,"Style")?Er(r):r;case Ln.SCRIPT:if(wr(r,"Script"))return Er(r);throw new le(5200,!1);case Ln.URL:return wr(r,"URL")?Er(r):bm(String(r));case Ln.RESOURCE_URL:if(wr(r,"ResourceURL"))return Er(r);throw new le(5201,!1);default:throw new le(5202,!1)}}bypassSecurityTrustHtml(t){return wm(t)}bypassSecurityTrustStyle(t){return Tm(t)}bypassSecurityTrustScript(t){return Am(t)}bypassSecurityTrustUrl(t){return Rm(t)}bypassSecurityTrustResourceUrl(t){return Sm(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(Ke))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uu=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Uu||{});function NN(...n){let e=[],t=new Set,r=t.has(Uu.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return He([[],Km(),t.has(Uu.NoHttpTransferCache)||r?[]:Eg({}),e])}var Q="primary",as=Symbol("RouteTitle"),zu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Cr(n){return new zu(n)}function Ww(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hw(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Tt(n[t],e[t]))return!1;return!0}function Tt(n,e){let t=n?Gu(n):void 0,r=e?Gu(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!jg(n[i],e[i]))return!1;return!0}function Gu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function qg(n){return n.length>0?n[n.length-1]:null}function mn(n){return lm(n)?n:Gm(n)?Ne(Promise.resolve(n)):$(n)}var Kw={exact:zg,subset:Gg},$g={exact:Qw,subset:Jw,ignored:()=>!0};function Dg(n,e,t){return Kw[t.paths](n.root,e.root,t.matrixParams)&&$g[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Qw(n,e){return Tt(n,e)}function zg(n,e,t){if(!Un(n.segments,e.segments)||!Go(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!zg(n.children[r],e.children[r],t))return!1;return!0}function Jw(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jg(n[t],e[t]))}function Gg(n,e,t){return Wg(n,e,e.segments,t)}function Wg(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Un(i,t)||e.hasChildren()||!Go(i,t,r))}else if(n.segments.length===t.length){if(!Un(n.segments,t)||!Go(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Gg(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Un(n.segments,i)||!Go(n.segments,i,r)||!n.children[Q]?!1:Wg(n.children[Q],e,s,r)}}function Go(n,e,t){return e.every((r,i)=>$g[t](n[i].parameters,r.parameters))}var jt=class{constructor(e=new oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Cr(this.queryParams),this._queryParamMap}toString(){return Zw.serialize(this)}},oe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wo(this)}},Vn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Cr(this.parameters),this._parameterMap}toString(){return Kg(this)}};function Yw(n,e){return Un(n,e)&&n.every((t,r)=>Tt(t.parameters,e[r].parameters))}function Un(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Xw(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Q&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Q&&(t=t.concat(e(i,r)))}),t}var cs=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>new Pr,providedIn:"root"})}}return n})(),Pr=class{parse(e){let t=new Hu(e);return new jt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hi(e.root,!0)}`,r=nT(e.queryParams),i=typeof e.fragment=="string"?`#${eT(e.fragment)}`:"";return`${t}${r}${i}`}},Zw=new Pr;function Wo(n){return n.segments.map(e=>Kg(e)).join("/")}function Hi(n,e){if(!n.hasChildren())return Wo(n);if(e){let t=n.children[Q]?Hi(n.children[Q],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Q&&r.push(`${i}:${Hi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Xw(n,(r,i)=>i===Q?[Hi(n.children[Q],!1)]:[`${i}:${Hi(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Q]!=null?`${Wo(n)}/${t[0]}`:`${Wo(n)}/(${t.join("//")})`}}function Hg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $o(n){return Hg(n).replace(/%3B/gi,";")}function eT(n){return encodeURI(n)}function Wu(n){return Hg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ho(n){return decodeURIComponent(n)}function Ng(n){return Ho(n.replace(/\+/g,"%20"))}function Kg(n){return`${Wu(n.path)}${tT(n.parameters)}`}function tT(n){return Object.entries(n).map(([e,t])=>`;${Wu(e)}=${Wu(t)}`).join("")}function nT(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$o(t)}=${$o(i)}`).join("&"):`${$o(t)}=${$o(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var rT=/^[^\/()?;#]+/;function Bu(n){let e=n.match(rT);return e?e[0]:""}var iT=/^[^\/()?;=#]+/;function sT(n){let e=n.match(iT);return e?e[0]:""}var oT=/^[^=?&#]+/;function aT(n){let e=n.match(oT);return e?e[0]:""}var cT=/^[^&#]+/;function uT(n){let e=n.match(cT);return e?e[0]:""}var Hu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new oe([],{}):new oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Q]=new oe(e,t)),r}parseSegment(){let e=Bu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new Vn(Ho(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=sT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Bu(this.remaining);i&&(r=i,this.capture(r))}e[Ho(t)]=Ho(r)}parseQueryParam(e){let t=aT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=uT(this.remaining);o&&(r=o,this.capture(r))}let i=Ng(t),s=Ng(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new le(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Q);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Q]:new oe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}};function Qg(n){return n.segments.length>0?new oe([],{[Q]:n}):n}function Jg(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Jg(i);if(r===Q&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new oe(n.segments,e);return lT(t)}function lT(n){if(n.numberOfChildren===1&&n.children[Q]){let e=n.children[Q];return new oe(n.segments.concat(e.segments),e.children)}return n}function Fn(n){return n instanceof jt}function hT(n,e,t=null,r=null){let i=Yg(n);return Xg(i,e,t,r)}function Yg(n){let e;function t(s){let o={};for(let u of s.children){let h=t(u);o[u.outlet]=h}let c=new oe(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=Qg(r);return e??i}function Xg(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ju(i,i,i,t,r);let s=dT(e);if(s.toRoot())return ju(i,i,new oe([],{}),t,r);let o=fT(s,i,n),c=o.processChildren?Ji(o.segmentGroup,o.index,s.commands):e_(o.segmentGroup,o.index,s.commands);return ju(i,o.segmentGroup,c,t,r)}function Ko(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Zi(n){return typeof n=="object"&&n!=null&&n.outlets}function ju(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,h])=>{s[u]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=Zg(n,e,t);let c=Qg(Jg(o));return new jt(c,s,i)}function Zg(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Zg(s,e,t)}),new oe(n.segments,r)}var Qo=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ko(r[0]))throw new le(4003,!1);let i=r.find(Zi);if(i&&i!==qg(r))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dT(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qo(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,h])=>{c[u]=typeof h=="string"?h.split("/"):h}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Qo(t,e,r)}var Rr=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function fT(n,e,t){if(n.isAbsolute)return new Rr(e,!0,0);if(!t)return new Rr(e,!1,NaN);if(t.parent===null)return new Rr(t,!0,0);let r=Ko(n.commands[0])?0:1,i=t.segments.length-1+r;return pT(t,i,n.numberOfDoubleDots)}function pT(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new le(4005,!1);i=r.segments.length}return new Rr(r,!1,i-s)}function mT(n){return Zi(n[0])?n[0].outlets:{[Q]:n}}function e_(n,e,t){if(n??=new oe([],{}),n.segments.length===0&&n.hasChildren())return Ji(n,e,t);let r=gT(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new oe(n.segments.slice(0,r.pathIndex),{});return s.children[Q]=new oe(n.segments.slice(r.pathIndex),n.children),Ji(s,0,i)}else return r.match&&i.length===0?new oe(n.segments,{}):r.match&&!n.hasChildren()?Ku(n,e,t):r.match?Ji(n,0,i):Ku(n,e,t)}function Ji(n,e,t){if(t.length===0)return new oe(n.segments,{});{let r=mT(t),i={};if(Object.keys(r).some(s=>s!==Q)&&n.children[Q]&&n.numberOfChildren===1&&n.children[Q].segments.length===0){let s=Ji(n.children[Q],e,t);return new oe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=e_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new oe(n.segments,i)}}function gT(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Zi(c))break;let u=`${c}`,h=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&h&&typeof h=="object"&&h.outlets===void 0){if(!kg(u,h,o))return s;r+=2}else{if(!kg(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ku(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Zi(s)){let u=_T(s.outlets);return new oe(r,u)}if(i===0&&Ko(t[0])){let u=n.segments[e];r.push(new Vn(u.path,Og(t[0]))),i++;continue}let o=Zi(s)?s.outlets[Q]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Ko(c)?(r.push(new Vn(o,Og(c))),i+=2):(r.push(new Vn(o,{})),i++)}return new oe(r,{})}function _T(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ku(new oe([],{}),0,r))}),e}function Og(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function kg(n,e,t){return n==t.path&&Tt(e,t.parameters)}var Yi="imperative",Se=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Se||{}),ct=class{constructor(e,t){this.id=e,this.url=t}},Dr=class extends ct{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Se.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pt=class extends ct{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Se.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},rt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(rt||{}),Jo=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Jo||{}),Bt=class extends ct{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Se.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fn=class extends ct{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Se.NavigationSkipped}},es=class extends ct{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Se.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yo=class extends ct{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qu=class extends ct{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class extends ct{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Se.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yu=class extends ct{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xu=class extends ct{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zu=class{constructor(e){this.route=e,this.type=Se.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},el=class{constructor(e){this.route=e,this.type=Se.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},tl=class{constructor(e){this.snapshot=e,this.type=Se.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nl=class{constructor(e){this.snapshot=e,this.type=Se.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rl=class{constructor(e){this.snapshot=e,this.type=Se.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},il=class{constructor(e){this.snapshot=e,this.type=Se.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xo=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Se.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ts=class{},Nr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yT(n,e){return n.providers&&!n._injector&&(n._injector=wu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ft(n){return n.outlet||Q}function vT(n,e){let t=n.filter(r=>ft(r)===e);return t.push(...n.filter(r=>ft(r)!==e)),t}function us(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sl=class{get injector(){return us(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ls(this.rootInjector),this.attachRef=null}},ls=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sl(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Y(xn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zo=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ol(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ol(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=al(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return al(e,this._root).map(t=>t.value)}};function ol(n,e){if(n===e.value)return e;for(let t of e.children){let r=ol(n,t);if(r)return r}return null}function al(n,e){if(n===e.value)return[e];for(let t of e.children){let r=al(n,t);if(r.length)return r.unshift(e),r}return[]}var nt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ar(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ea=class extends Zo{constructor(e,t){super(e),this.snapshot=t,gl(this,e)}toString(){return this.snapshot.toString()}};function t_(n){let e=IT(n),t=new ot([new Vn("",{})]),r=new ot({}),i=new ot({}),s=new ot({}),o=new ot(""),c=new pn(t,r,s,o,i,Q,n,e.root);return c.snapshot=e.root,new ea(new nt(c,[]),e)}function IT(n){let e={},t={},r={},i="",s=new Sr([],e,r,i,t,Q,n,null,{});return new na("",new nt(s,[]))}var pn=class{constructor(e,t,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(h=>h[as]))??$(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Cr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Cr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ta(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&r_(i)&&(r.resolve[as]=i.title),r}var Sr=class{get title(){return this.data?.[as]}constructor(e,t,r,i,s,o,c,u,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Cr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Cr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},na=class extends Zo{constructor(e,t){super(t),this.url=e,gl(this,t)}toString(){return n_(this._root)}};function gl(n,e){e.value._routerState=n,e.children.forEach(t=>gl(n,t))}function n_(n){let e=n.children.length>0?` { ${n.children.map(n_).join(", ")} } `:"";return`${n.value}${e}`}function qu(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Tt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Tt(e.params,t.params)||n.paramsSubject.next(t.params),Hw(e.url,t.url)||n.urlSubject.next(t.url),Tt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function cl(n,e){let t=Tt(n.params,e.params)&&Yw(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||cl(n.parent,e.parent))}function r_(n){return typeof n.title=="string"||n.title===null}var ET=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new Ir,this.deactivateEvents=new Ir,this.attachEvents=new Ir,this.detachEvents=new Ir,this.parentContexts=F(ls),this.location=F(km),this.changeDetector=F(No),this.inputBinder=F(oa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new ul(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=vr({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[So]})}}return n})(),ul=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pn?this.route:e===ls?this.childContexts:this.parent.get(e,t)}},oa=new ne(""),xg=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ro([r.queryParams,r.params,r.data]).pipe(et(([s,o,c],u)=>(c=V(V(V({},s),o),c),u===0?$(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=Qm(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function wT(n,e,t){let r=ns(n,e._root,t?t._root:void 0);return new ea(r,e)}function ns(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=TT(n,e,t);return new nt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ns(n,c)),o}}let r=AT(e.value),i=e.children.map(s=>ns(n,s));return new nt(r,i)}}function TT(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ns(n,r,i);return ns(n,r)})}function AT(n){return new pn(new ot(n.url),new ot(n.params),new ot(n.queryParams),new ot(n.fragment),new ot(n.data),n.outlet,n.component,n)}var rs=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},i_="ngNavigationCancelingError";function ra(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Fn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=s_(!1,rt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function s_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[i_]=!0,t.cancellationCode=e,t}function RT(n){return o_(n)&&Fn(n.url)}function o_(n){return!!n&&n[i_]}var ST=(n,e,t,r)=>ee(i=>(new ll(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ll=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ar(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ar(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ar(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ar(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new il(s.value.snapshot))}),e.children.length&&this.forwardEvent(new nl(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(qu(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),qu(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},ia=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},br=class{constructor(e,t){this.component=e,this.route=t}};function bT(n,e,t){let r=n._root,i=e?e._root:null;return Ki(r,i,t,[r.value])}function CT(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function kr(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gm(n)?n:e.get(n):r}function Ki(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ar(e);return n.children.forEach(o=>{PT(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Xi(c,t.getContext(o),i)),i}function PT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=DT(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ia(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ki(n,e,c?c.children:null,r,i):Ki(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new br(c.outlet.component,o))}else o&&Xi(e,c,i),i.canActivateChecks.push(new ia(r)),s.component?Ki(n,null,c?c.children:null,r,i):Ki(n,null,t,r,i);return i}function DT(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Un(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Un(n.url,e.url)||!Tt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cl(n,e)||!Tt(n.queryParams,e.queryParams);case"paramsChange":default:return!cl(n,e)}}function Xi(n,e,t){let r=Ar(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Xi(o,e.children.getContext(s),t):Xi(o,null,t):Xi(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new br(e.outlet.component,i)):t.canDeactivateChecks.push(new br(null,i)):t.canDeactivateChecks.push(new br(null,i))}function hs(n){return typeof n=="function"}function NT(n){return typeof n=="boolean"}function OT(n){return n&&hs(n.canLoad)}function kT(n){return n&&hs(n.canActivate)}function xT(n){return n&&hs(n.canActivateChild)}function LT(n){return n&&hs(n.canDeactivate)}function MT(n){return n&&hs(n.canMatch)}function a_(n){return n instanceof hm||n?.name==="EmptyError"}var zo=Symbol("INITIAL_VALUE");function Or(){return et(n=>Ro(n.map(e=>e.pipe(mr(1),du(zo)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===zo)return zo;if(t===!1||VT(t))return t}return!0}),It(e=>e!==zo),mr(1)))}function VT(n){return Fn(n)||n instanceof rs}function UT(n,e){return Ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?$(De(V({},t),{guardsResult:!0})):FT(o,r,i,n).pipe(Ze(c=>c&&NT(c)?BT(r,s,n,e):$(c)),ee(c=>De(V({},t),{guardsResult:c})))})}function FT(n,e,t,r){return Ne(n).pipe(Ze(i=>GT(i.component,i.route,t,e,r)),un(i=>i!==!0,!0))}function BT(n,e,t,r){return Ne(e).pipe(cn(i=>dm(qT(i.route.parent,r),jT(i.route,r),zT(n,i.path,t),$T(n,i.route,t))),un(i=>i!==!0,!0))}function jT(n,e){return n!==null&&e&&e(new rl(n)),$(!0)}function qT(n,e){return n!==null&&e&&e(new tl(n)),$(!0)}function $T(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(s=>cu(()=>{let o=us(e)??t,c=kr(s,o),u=kT(c)?c.canActivate(e,n):at(o,()=>c(e,n));return mn(u).pipe(un())}));return $(i).pipe(Or())}function zT(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CT(o)).filter(o=>o!==null).map(o=>cu(()=>{let c=o.guards.map(u=>{let h=us(o.node)??t,f=kr(u,h),m=xT(f)?f.canActivateChild(r,n):at(h,()=>f(r,n));return mn(m).pipe(un())});return $(c).pipe(Or())}));return $(s).pipe(Or())}function GT(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let o=s.map(c=>{let u=us(e)??i,h=kr(c,u),f=LT(h)?h.canDeactivate(n,e,t,r):at(u,()=>h(n,e,t,r));return mn(f).pipe(un())});return $(o).pipe(Or())}function WT(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return $(!0);let s=i.map(o=>{let c=kr(o,n),u=OT(c)?c.canLoad(e,t):at(n,()=>c(e,t));return mn(u)});return $(s).pipe(Or(),c_(r))}function c_(n){return nu(ve(e=>{if(typeof e!="boolean")throw ra(n,e)}),ee(e=>e===!0))}function HT(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return $(!0);let s=i.map(o=>{let c=kr(o,n),u=MT(c)?c.canMatch(e,t):at(n,()=>c(e,t));return mn(u)});return $(s).pipe(Or(),c_(r))}var is=class{constructor(e){this.segmentGroup=e||null}},ss=class extends Error{constructor(e){super(),this.urlTree=e}};function Tr(n){return Di(new is(n))}function KT(n){return Di(new le(4e3,!1))}function QT(n){return Di(s_(!1,rt.GuardRejected))}var hl=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[Q])return KT(`${e.redirectTo}`);i=i.children[Q]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:h,routeConfig:f,url:m,outlet:_,params:R,data:P,title:D}=i,b=at(s,()=>c({params:R,data:P,queryParams:u,fragment:h,routeConfig:f,url:m,outlet:_,title:D}));if(b instanceof jt)throw new ss(b);t=b}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ss(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new jt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new oe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new le(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},dl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JT(n,e,t,r,i){let s=u_(n,e,t);return s.matched?(r=yT(e,r),HT(r,e,t,i).pipe(ee(o=>o===!0?s:V({},dl)))):$(s)}function u_(n,e,t){if(e.path==="**")return YT(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},dl):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ww)(t,n,e);if(!i)return V({},dl);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function YT(n){return{matched:!0,parameters:n.length>0?qg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Lg(n,e,t,r){return t.length>0&&eA(n,t,r)?{segmentGroup:new oe(e,ZT(r,new oe(t,n.children))),slicedSegments:[]}:t.length===0&&tA(n,t,r)?{segmentGroup:new oe(n.segments,XT(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new oe(n.segments,n.children),slicedSegments:t}}function XT(n,e,t,r){let i={};for(let s of t)if(aa(n,e,s)&&!r[ft(s)]){let o=new oe([],{});i[ft(s)]=o}return V(V({},r),i)}function ZT(n,e){let t={};t[Q]=e;for(let r of n)if(r.path===""&&ft(r)!==Q){let i=new oe([],{});t[ft(r)]=i}return t}function eA(n,e,t){return t.some(r=>aa(n,e,r)&&ft(r)!==Q)}function tA(n,e,t){return t.some(r=>aa(n,e,r))}function aa(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function nA(n,e,t){return e.length===0&&!n.children[t]}var fl=class{};function rA(n,e,t,r,i,s,o="emptyOnly"){return new pl(n,e,t,r,i,o,s).recognize()}var iA=31,pl=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new hl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new le(4002,`'${e.segmentGroup}'`)}recognize(){let e=Lg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new nt(r,t),s=new na("",i),o=hT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Sr([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Q,t).pipe(ee(r=>({children:r,rootSnapshot:t})),pr(r=>{if(r instanceof ss)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof is?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ee(o=>o instanceof nt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ne(s).pipe(cn(o=>{let c=r.children[o],u=vT(t,o);return this.processSegmentGroup(e,u,c,o,i)}),hu((o,c)=>(o.push(...c),o)),uu(null),pm(),Ze(o=>{if(o===null)return Tr(r);let c=l_(o);return sA(c),$(c)}))}processSegment(e,t,r,i,s,o,c){return Ne(t).pipe(cn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,c).pipe(pr(h=>{if(h instanceof is)return $(null);throw h}))),un(u=>!!u),pr(u=>{if(a_(u))return nA(r,i,s)?$(new fl):Tr(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,u){return ft(r)!==o&&(o===Q||!aa(i,s,r))?Tr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):Tr(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:u,parameters:h,consumedSegments:f,positionalParamSegments:m,remainingSegments:_}=u_(t,i,s);if(!u)return Tr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iA&&(this.allowRedirects=!1));let R=new Sr(s,h,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Mg(i),ft(i),i.component??i._loadedComponent??null,i,Vg(i)),P=ta(R,c,this.paramsInheritanceStrategy);R.params=Object.freeze(P.params),R.data=Object.freeze(P.data);let D=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,R,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(Ze(b=>this.processSegment(e,r,t,b.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=JT(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(et(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(et(({routes:h})=>{let f=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:R}=u,P=new Sr(_,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Mg(r),ft(r),r.component??r._loadedComponent??null,r,Vg(r)),D=ta(P,o,this.paramsInheritanceStrategy);P.params=Object.freeze(D.params),P.data=Object.freeze(D.data);let{segmentGroup:b,slicedSegments:M}=Lg(t,_,R,h);if(M.length===0&&b.hasChildren())return this.processChildren(f,h,b,P).pipe(ee(x=>new nt(P,x)));if(h.length===0&&M.length===0)return $(new nt(P,[]));let B=ft(r)===s;return this.processSegment(f,h,b,M,B?Q:s,!0,P).pipe(ee(x=>new nt(P,x instanceof nt?[x]:[])))}))):Tr(t)))}getChildConfig(e,t,r){return t.children?$({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?$({routes:t._loadedRoutes,injector:t._loadedInjector}):WT(e,t,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(ve(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):QT(t))):$({routes:[],injector:e})}};function sA(n){n.sort((e,t)=>e.value.outlet===Q?-1:t.value.outlet===Q?1:e.value.outlet.localeCompare(t.value.outlet))}function oA(n){let e=n.value.routeConfig;return e&&e.path===""}function l_(n){let e=[],t=new Set;for(let r of n){if(!oA(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=l_(r.children);e.push(new nt(r.value,i))}return e.filter(r=>!t.has(r))}function Mg(n){return n.data||{}}function Vg(n){return n.resolve||{}}function aA(n,e,t,r,i,s){return Ze(o=>rA(n,e,t,r,o.extractedUrl,i,s).pipe(ee(({state:c,tree:u})=>De(V({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function cA(n,e){return Ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return $(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let h of h_(u))o.add(h);let c=0;return Ne(o).pipe(cn(u=>s.has(u)?uA(u,r,n,e):(u.data=ta(u,u.parent,n).resolve,$(void 0))),ve(()=>c++),lu(1),Ze(u=>c===o.size?$(t):an))})}function h_(n){let e=n.children.map(t=>h_(t)).flat();return[n,...e]}function uA(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!r_(i)&&(s[as]=i.title),lA(s,n,e,r).pipe(ee(o=>(n._resolvedData=o,n.data=ta(n,n.parent,t).resolve,null)))}function lA(n,e,t,r){let i=Gu(n);if(i.length===0)return $({});let s={};return Ne(i).pipe(Ze(o=>hA(n[o],e,t,r).pipe(un(),ve(c=>{if(c instanceof rs)throw ra(new Pr,c);s[o]=c}))),lu(1),fm(s),pr(o=>a_(o)?an:Di(o)))}function hA(n,e,t,r){let i=us(e)??r,s=kr(n,i),o=s.resolve?s.resolve(e,t):at(i,()=>s(e,t));return mn(o)}function $u(n){return et(e=>{let t=n(e);return t?Ne(t).pipe(ee(()=>e)):$(e)})}var d_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Q);return r}getResolvedTitleForRoute(t){return t.data[as]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>F(dA),providedIn:"root"})}}return n})(),dA=(()=>{class n extends d_{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Y(Pg))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ds=new ne("",{providedIn:"root",factory:()=>({})}),fA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ki({type:n,selectors:[["ng-component"]],standalone:!0,features:[Li],decls:1,vars:0,template:function(r,i){r&1&&Fm(0,"router-outlet")},dependencies:[ET],encapsulation:2})}}return n})();function _l(n){let e=n.children&&n.children.map(_l),t=e?De(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Q&&(t.component=fA),t}var os=new ne(""),yl=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Do)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return $(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=mn(t.loadComponent()).pipe(ee(f_),ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),gr(()=>{this.componentLoaders.delete(t)})),i=new iu(r,()=>new Xe).pipe(ru());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=pA(r,this.compiler,t,this.onLoadEndListener).pipe(gr(()=>{this.childrenLoaders.delete(r)})),o=new iu(s,()=>new Xe).pipe(ru());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pA(n,e,t,r){return mn(n.loadChildren()).pipe(ee(f_),Ze(i=>i instanceof Mm||Array.isArray(i)?$(i):Ne(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(os,[],{optional:!0,self:!0}).flat()),{routes:o.map(_l),injector:s}}))}function mA(n){return n&&typeof n=="object"&&"default"in n}function f_(n){return mA(n)?n.default:n}var vl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>F(gA),providedIn:"root"})}}return n})(),gA=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),p_=new ne(""),m_=new ne("");function _A(n,e,t){let r=n.get(m_),i=n.get(Ke);return n.get(Ee).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=i.startViewTransition(()=>(s(),yA(n))),{onViewTransitionCreated:u}=r;return u&&at(n,()=>u({transition:c,from:e,to:t})),o})}function yA(n){return new Promise(e=>{Vm({read:()=>setTimeout(e)},{injector:n})})}var vA=new ne(""),Il=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=F(yl),this.environmentInjector=F(xn),this.urlSerializer=F(cs),this.rootContexts=F(ls),this.location=F(Fi),this.inputBindingEnabled=F(oa,{optional:!0})!==null,this.titleStrategy=F(d_),this.options=F(ds,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(vl),this.createViewTransition=F(p_,{optional:!0}),this.navigationErrorHandler=F(vA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Zu(i)),r=i=>this.events.next(new el(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(De(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ot({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Yi,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(It(s=>s.id!==0),ee(s=>De(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),et(s=>{let o=!1,c=!1;return $(s).pipe(et(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",rt.SupersededByNewNavigation),an;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?De(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!h&&f!=="reload"){let m="";return this.events.next(new fn(u.id,this.urlSerializer.serialize(u.rawUrl),m,Jo.IgnoredSameUrlNavigation)),u.resolve(!1),an}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return $(u).pipe(et(m=>{let _=this.transitions?.getValue();return this.events.next(new Dr(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?an:Promise.resolve(m)}),aA(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=De(V({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let _=new Yo(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:_,source:R,restoredState:P,extras:D}=u,b=new Dr(m,this.urlSerializer.serialize(_),R,P);this.events.next(b);let M=t_(this.rootComponentType).snapshot;return this.currentTransition=s=De(V({},u),{targetSnapshot:M,urlAfterRedirects:_,extras:De(V({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,$(s)}else{let m="";return this.events.next(new fn(u.id,this.urlSerializer.serialize(u.extractedUrl),m,Jo.IgnoredByUrlHandlingStrategy)),u.resolve(!1),an}}),ve(u=>{let h=new Qu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),ee(u=>(this.currentTransition=s=De(V({},u),{guards:bT(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),UT(this.environmentInjector,u=>this.events.next(u)),ve(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ra(this.urlSerializer,u.guardsResult);let h=new Ju(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),It(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",rt.GuardRejected),!1)),$u(u=>{if(u.guards.canActivateChecks.length)return $(u).pipe(ve(h=>{let f=new Yu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),et(h=>{let f=!1;return $(h).pipe(cA(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",rt.NoDataFromResolver)}}))}),ve(h=>{let f=new Xu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),$u(u=>{let h=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(ve(_=>{f.component=_}),ee(()=>{})));for(let _ of f.children)m.push(...h(_));return m};return Ro(h(u.targetSnapshot.root)).pipe(uu(null),mr(1))}),$u(()=>this.afterPreactivation()),et(()=>{let{currentSnapshot:u,targetSnapshot:h}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return f?Ne(f).pipe(ee(()=>s)):$(s)}),ee(u=>{let h=wT(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=De(V({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),ve(()=>{this.events.next(new ts)}),ST(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mr(1),ve({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pt(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),mm(this.transitionAbortSubject.pipe(ve(u=>{throw u}))),gr(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",rt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),pr(u=>{if(c=!0,o_(u))this.events.next(new Bt(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),RT(u)?this.events.next(new Nr(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let h=new es(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=at(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(f instanceof rs){let{message:m,cancellationCode:_}=ra(this.urlSerializer,f);this.events.next(new Bt(s.id,this.urlSerializer.serialize(s.extractedUrl),m,_)),this.events.next(new Nr(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(h);let m=t.errorHandler(u);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return an}))}))}cancelNavigationTransition(t,r,i){let s=new Bt(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IA(n){return n!==Yi}var EA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>F(wA),providedIn:"root"})}}return n})(),ml=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},wA=(()=>{class n extends ml{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pu(n)))(i||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),g_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>F(TA),providedIn:"root"})}}return n})(),TA=(()=>{class n extends g_{constructor(){super(...arguments),this.location=F(Fi),this.urlSerializer=F(cs),this.options=F(ds,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(vl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new jt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=t_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Dr)this.stateMemento=this.createStateMemento();else if(t instanceof fn)this.rawUrlTree=r.initialUrl;else if(t instanceof Yo){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ts?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Bt&&(t.code===rt.GuardRejected||t.code===rt.NoDataFromResolver)?this.restoreHistory(r):t instanceof es?this.restoreHistory(r,!0):t instanceof pt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof jt?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pu(n)))(i||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qi=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qi||{});function __(n,e){n.events.pipe(It(t=>t instanceof pt||t instanceof Bt||t instanceof es||t instanceof fn),ee(t=>t instanceof pt||t instanceof fn?Qi.COMPLETE:(t instanceof Bt?t.code===rt.Redirect||t.code===rt.SupersededByNewNavigation:!1)?Qi.REDIRECTING:Qi.FAILED),It(t=>t!==Qi.REDIRECTING),mr(1)).subscribe(()=>{e()})}function AA(n){throw n}var RA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},At=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(Po),this.stateManager=F(g_),this.options=F(ds,{optional:!0})||{},this.pendingTasks=F(bo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(Il),this.urlSerializer=F(cs),this.location=F(Fi),this.urlHandlingStrategy=F(vl),this._events=new Xe,this.errorHandler=this.options.errorHandler||AA,this.navigated=!1,this.routeReuseStrategy=F(EA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(os,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(oa,{optional:!0}),this.eventsSubscription=new am,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Bt&&r.code!==rt.Redirect&&r.code!==rt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof pt)this.navigated=!0;else if(r instanceof Nr){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||IA(i.source)},o);this.scheduleNavigation(c,Yi,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}CA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_l),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=i?i.snapshot:this.routerState.snapshot.root;m=Yg(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return Xg(m,t,f,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Fn(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Yi,null,r)}navigate(t,r={skipLocationChange:!1}){return bA(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},RA):r===!1?i=V({},SA):i=r,Fn(t))return Dg(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Dg(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,h;o?(c=o.resolve,u=o.reject,h=o.promise):h=new Promise((m,_)=>{c=m,u=_});let f=this.pendingTasks.add();return __(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bA(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new le(4008,!1)}function CA(n){return!(n instanceof ts)&&!(n instanceof Nr)}var Ug=(()=>{class n{constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new Xe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof pt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Fn(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Pm(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Fn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(tt(At),tt(pn),vm("tabindex"),tt(Iu),tt(gu),tt(Ui))}}static{this.\u0275dir=vr({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Bm("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Um("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Oo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Oo],replaceUrl:[2,"replaceUrl","replaceUrl",Oo],routerLink:"routerLink"},standalone:!0,features:[Lm,So]})}}return n})(),JN=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ir,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof pt&&this.update()})}ngAfterContentInit(){$(this.links.changes,$(null)).pipe(Ni()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ne(t).pipe(Ni()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=PA(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(tt(At),tt(gu),tt(Iu),tt(No),tt(Ug,8))}}static{this.\u0275dir=vr({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&jm(s,Ug,5),r&2){let o;qm(o=$m())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[So]})}}return n})();function PA(n){return!!n.paths}var sa=class{};var DA=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(It(t=>t instanceof pt),cn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=wu(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Ne(i).pipe(Ni())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=$(null);let s=i.pipe(Ze(o=>o===null?$(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ne([s,o]).pipe(Ni())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(Y(At),Y(Do),Y(xn),Y(sa),Y(yl))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),y_=new ne(""),NA=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fn&&t.code===Jo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xo&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xo(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Dm()}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function YN(n,...e){return He([{provide:os,multi:!0,useValue:n},[],{provide:pn,useFactory:v_,deps:[At]},{provide:Mi,multi:!0,useFactory:I_},e.map(t=>t.\u0275providers)])}function v_(n){return n.routerState.root}function fs(n,e){return{\u0275kind:n,\u0275providers:e}}function I_(){let n=F(dt);return e=>{let t=n.get(Vi);if(e!==t.components[0])return;let r=n.get(At),i=n.get(E_);n.get(El)===1&&r.initialNavigation(),n.get(w_,null,fu.Optional)?.setUpPreloading(),n.get(y_,null,fu.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var E_=new ne("",{factory:()=>new Xe}),El=new ne("",{providedIn:"root",factory:()=>1});function OA(){return fs(2,[{provide:El,useValue:0},{provide:Ru,multi:!0,deps:[dt],useFactory:e=>{let t=e.get(Xm,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(At),s=e.get(E_);__(i,()=>{r(!0)}),e.get(Il).afterPreactivation=()=>(r(!0),s.closed?$(void 0):s),i.initialNavigation()}))}}])}function kA(){return fs(3,[{provide:Ru,multi:!0,useFactory:()=>{let e=F(At);return()=>{e.setUpLocationChangeListener()}}},{provide:El,useValue:2}])}var w_=new ne("");function xA(n){return fs(0,[{provide:w_,useExisting:DA},{provide:sa,useExisting:n}])}function LA(){return fs(8,[xg,{provide:oa,useExisting:xg}])}function MA(n){let e=[{provide:p_,useValue:_A},{provide:m_,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return fs(9,e)}var Fg=new ne("ROUTER_FORROOT_GUARD"),VA=[Fi,{provide:cs,useClass:Pr},At,ls,{provide:pn,useFactory:v_,deps:[At]},yl,[]],XN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[VA,[],{provide:os,multi:!0,useValue:t},{provide:Fg,useFactory:jA,deps:[[At,new Ie,new _m]]},{provide:ds,useValue:r||{}},r?.useHash?FA():BA(),UA(),r?.preloadingStrategy?xA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?qA(r):[],r?.bindToComponentInputs?LA().\u0275providers:[],r?.enableViewTransitions?MA().\u0275providers:[],$A()]}}static forChild(t){return{ngModule:n,providers:[{provide:os,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Y(Fg,8))}}static{this.\u0275mod=yr({type:n})}static{this.\u0275inj=_r({})}}return n})();function UA(){return{provide:y_,useFactory:()=>{let n=F(ng),e=F(Ee),t=F(ds),r=F(Il),i=F(cs);return t.scrollOffset&&n.setOffset(t.scrollOffset),new NA(i,r,n,e,t)}}}function FA(){return{provide:Ui,useClass:eg}}function BA(){return{provide:Ui,useClass:Zm}}function jA(n){return"guarded"}function qA(n){return[n.initialNavigation==="disabled"?kA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?OA().\u0275providers:[]]}var Bg=new ne("");function $A(){return[{provide:Bg,useFactory:I_},{provide:Mi,multi:!0,useExisting:Bg}]}var Oe=class n{static isArray(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}static isObject(e,t=!0){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&(t||Object.keys(e).length!==0)}static equals(e,t,r){return r?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),s,o,c;if(r&&i){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!this.equalsByValue(e[s],t[s]))return!1;return!0}if(r!=i)return!1;var u=this.isDate(e),h=this.isDate(t);if(u!=h)return!1;if(u&&h)return e.getTime()==t.getTime();var f=e instanceof RegExp,m=t instanceof RegExp;if(f!=m)return!1;if(f&&m)return e.toString()==t.toString();var _=Object.keys(e);if(o=_.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,_[s]))return!1;for(s=o;s--!==0;)if(c=_[s],!this.equalsByValue(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")==-1)return e[t];{let r=t.split("."),i=e;for(let s=0,o=r.length;s<o;++s){if(i==null)return null;i=i[r[s]]}return i}}else return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,r){let i;e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,r,i){if(r.length>0){let s=!1;for(let o=0;o<r.length;o++)if(this.findIndexInList(r[o],i)>t){r.splice(o,0,e),s=!0;break}s||r.push(e)}else r.push(e)}static findIndexInList(e,t){let r=-1;if(t){for(let i=0;i<t.length;i++)if(t[i]==e){r=i;break}}return r}static contains(e,t){if(e!=null&&t&&t.length){for(let r of t)if(this.equals(e,r))return!0}return!1}static removeAccents(e){return e&&(e=e.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),e}static isDate(e){return Object.prototype.toString.call(e)==="[object Date]"}static isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!this.isDate(e)&&typeof e=="object"&&Object.keys(e).length===0}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,r,i=1){let s=-1,o=this.isEmpty(e),c=this.isEmpty(t);return o&&c?s=0:o?s=i:c?s=-i:typeof e=="string"&&typeof t=="string"?s=e.localeCompare(t,r,{numeric:!0}):s=e<t?-1:e>t?1:0,s}static sort(e,t,r=1,i,s=1){let o=n.compare(e,t,i,r),c=r;return(n.isEmpty(e)||n.isEmpty(t))&&(c=s===1?r:s),c*o}static merge(e,t){if(!(e==null&&t==null)){{if((e==null||typeof e=="object")&&(t==null||typeof t=="object"))return V(V({},e||{}),t||{});if((e==null||typeof e=="string")&&(t==null||typeof t=="string"))return[e||"",t||""].join(" ")}return t||e}}static isPrintableCharacter(e=""){return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)}static getItemValue(e,...t){return this.isFunction(e)?e(...t):e}static findLastIndex(e,t){let r=-1;if(this.isNotEmpty(e))try{r=e.findLastIndex(t)}catch{r=e.lastIndexOf([...e].reverse().find(t))}return r}static findLast(e,t){let r;if(this.isNotEmpty(e))try{r=e.findLast(t)}catch{r=[...e].reverse().find(t)}return r}static deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),s,o,c;if(r&&i){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!this.deepEquals(e[s],t[s]))return!1;return!0}if(r!=i)return!1;var u=e instanceof Date,h=t instanceof Date;if(u!=h)return!1;if(u&&h)return e.getTime()==t.getTime();var f=e instanceof RegExp,m=t instanceof RegExp;if(f!=m)return!1;if(f&&m)return e.toString()==t.toString();var _=Object.keys(e);if(o=_.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,_[s]))return!1;for(s=o;s--!==0;)if(c=_[s],!this.deepEquals(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}},T_=0;function tO(n="pn_id_"){return T_++,`${n}${T_}`}function zA(){let n=[],e=(s,o)=>{let c=n.length>0?n[n.length-1]:{key:s,value:o},u=c.value+(c.key===s?0:o)+2;return n.push({key:s,value:u}),u},t=s=>{n=n.filter(o=>o.value!==s)},r=()=>n.length>0?n[n.length-1].value:0,i=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:i,set:(s,o,c)=>{o&&(o.style.zIndex=String(e(s,c)))},clear:s=>{s&&(t(i(s)),s.style.zIndex="")},getCurrent:()=>r()}}var nO=zA();var A_=["*"],GA=function(n){return n[n.ACCEPT=0]="ACCEPT",n[n.REJECT=1]="REJECT",n[n.CANCEL=2]="CANCEL",n}(GA||{}),fO=(()=>{class n{requireConfirmationSource=new Xe;acceptConfirmationSource=new Xe;requireConfirmation$=this.requireConfirmationSource.asObservable();accept=this.acceptConfirmationSource.asObservable();confirm(t){return this.requireConfirmationSource.next(t),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=J({token:n,factory:n.\u0275fac})}return n})();var Fe=(()=>{class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"}return n})();var pO=(()=>{class n{filter(t,r,i,s,o){let c=[];if(t)for(let u of t)for(let h of r){let f=Oe.resolveFieldData(u,h);if(this.filters[s](f,i,o)){c.push(u);break}}return c}filters={startsWith:(t,r,i)=>{if(r==null||r.trim()==="")return!0;if(t==null)return!1;let s=Oe.removeAccents(r.toString()).toLocaleLowerCase(i);return Oe.removeAccents(t.toString()).toLocaleLowerCase(i).slice(0,s.length)===s},contains:(t,r,i)=>{if(r==null||typeof r=="string"&&r.trim()==="")return!0;if(t==null)return!1;let s=Oe.removeAccents(r.toString()).toLocaleLowerCase(i);return Oe.removeAccents(t.toString()).toLocaleLowerCase(i).indexOf(s)!==-1},notContains:(t,r,i)=>{if(r==null||typeof r=="string"&&r.trim()==="")return!0;if(t==null)return!1;let s=Oe.removeAccents(r.toString()).toLocaleLowerCase(i);return Oe.removeAccents(t.toString()).toLocaleLowerCase(i).indexOf(s)===-1},endsWith:(t,r,i)=>{if(r==null||r.trim()==="")return!0;if(t==null)return!1;let s=Oe.removeAccents(r.toString()).toLocaleLowerCase(i),o=Oe.removeAccents(t.toString()).toLocaleLowerCase(i);return o.indexOf(s,o.length-s.length)!==-1},equals:(t,r,i)=>r==null||typeof r=="string"&&r.trim()===""?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()===r.getTime():t==r?!0:Oe.removeAccents(t.toString()).toLocaleLowerCase(i)==Oe.removeAccents(r.toString()).toLocaleLowerCase(i),notEquals:(t,r,i)=>r==null||typeof r=="string"&&r.trim()===""?!1:t==null?!0:t.getTime&&r.getTime?t.getTime()!==r.getTime():t==r?!1:Oe.removeAccents(t.toString()).toLocaleLowerCase(i)!=Oe.removeAccents(r.toString()).toLocaleLowerCase(i),in:(t,r)=>{if(r==null||r.length===0)return!0;for(let i=0;i<r.length;i++)if(Oe.equals(t,r[i]))return!0;return!1},between:(t,r)=>r==null||r[0]==null||r[1]==null?!0:t==null?!1:t.getTime?r[0].getTime()<=t.getTime()&&t.getTime()<=r[1].getTime():r[0]<=t&&t<=r[1],lt:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()<r.getTime():t<r,lte:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()<=r.getTime():t<=r,gt:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()>r.getTime():t>r,gte:(t,r,i)=>r==null?!0:t==null?!1:t.getTime&&r.getTime?t.getTime()>=r.getTime():t>=r,is:(t,r,i)=>this.filters.equals(t,r,i),isNot:(t,r,i)=>this.filters.notEquals(t,r,i),before:(t,r,i)=>this.filters.lt(t,r,i),after:(t,r,i)=>this.filters.gt(t,r,i),dateIs:(t,r)=>r==null?!0:t==null?!1:t.toDateString()===r.toDateString(),dateIsNot:(t,r)=>r==null?!0:t==null?!1:t.toDateString()!==r.toDateString(),dateBefore:(t,r)=>r==null?!0:t==null?!1:t.getTime()<r.getTime(),dateAfter:(t,r)=>{if(r==null)return!0;if(t==null)return!1;let i=new Date(t);return i.setHours(0,0,0,0),i.getTime()>r.getTime()}};register(t,r){this.filters[t]=r}static \u0275fac=function(r){return new(r||n)};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mO=(()=>{class n{clickSource=new Xe;clickObservable=this.clickSource.asObservable();add(t){t&&this.clickSource.next(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gO=(()=>{class n{ripple=!1;inputStyle=Eu("outlined");overlayOptions={};csp=Eu({nonce:void 0});filterMatchModeOptions={text:[Fe.STARTS_WITH,Fe.CONTAINS,Fe.NOT_CONTAINS,Fe.ENDS_WITH,Fe.EQUALS,Fe.NOT_EQUALS],numeric:[Fe.EQUALS,Fe.NOT_EQUALS,Fe.LESS_THAN,Fe.LESS_THAN_OR_EQUAL_TO,Fe.GREATER_THAN,Fe.GREATER_THAN_OR_EQUAL_TO],date:[Fe.DATE_IS,Fe.DATE_IS_NOT,Fe.DATE_BEFORE,Fe.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new Xe;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation=V(V({},this.translation),t),this.translationSource.next(this.translation)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_O=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ki({type:n,selectors:[["p-header"]],standalone:!0,features:[Li],ngContentSelectors:A_,decls:1,vars:0,template:function(r,i){r&1&&(Tu(),Au(0))},encapsulation:2})}return n})(),yO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ki({type:n,selectors:[["p-footer"]],standalone:!0,features:[Li],ngContentSelectors:A_,decls:1,vars:0,template:function(r,i){r&1&&(Tu(),Au(0))},encapsulation:2})}return n})(),vO=(()=>{class n{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(r){return new(r||n)(tt(Nm))};static \u0275dir=vr({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[0,"pTemplate","name"]},standalone:!0})}return n})(),IO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=yr({type:n});static \u0275inj=_r({})}return n})(),EO=(()=>{class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static NO_FILTER="noFilter";static LT="lt";static LTE="lte";static GT="gt";static GTE="gte";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static CLEAR="clear";static APPLY="apply";static MATCH_ALL="matchAll";static MATCH_ANY="matchAny";static ADD_RULE="addRule";static REMOVE_RULE="removeRule";static ACCEPT="accept";static REJECT="reject";static CHOOSE="choose";static UPLOAD="upload";static CANCEL="cancel";static PENDING="pending";static FILE_SIZE_TYPES="fileSizeTypes";static DAY_NAMES="dayNames";static DAY_NAMES_SHORT="dayNamesShort";static DAY_NAMES_MIN="dayNamesMin";static MONTH_NAMES="monthNames";static MONTH_NAMES_SHORT="monthNamesShort";static FIRST_DAY_OF_WEEK="firstDayOfWeek";static TODAY="today";static WEEK_HEADER="weekHeader";static WEAK="weak";static MEDIUM="medium";static STRONG="strong";static PASSWORD_PROMPT="passwordPrompt";static EMPTY_MESSAGE="emptyMessage";static EMPTY_FILTER_MESSAGE="emptyFilterMessage";static SHOW_FILTER_MENU="showFilterMenu";static HIDE_FILTER_MENU="hideFilterMenu";static SELECTION_MESSAGE="selectionMessage";static ARIA="aria";static SELECT_COLOR="selectColor";static BROWSE_FILES="browseFiles"}return n})();var S_=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},WA=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,h=u?n[i+2]:0,f=s>>2,m=(s&3)<<4|c>>4,_=(c&15)<<2|h>>6,R=h&63;u||(R=64,o||(_=64)),r.push(t[f],t[m],t[_],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(S_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||m==null)throw new Tl;let _=s<<2|c>>4;if(r.push(_),h!==64){let R=c<<4&240|h>>2;if(r.push(R),m!==64){let P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Tl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},HA=function(n){let e=S_(n);return b_.encodeByteArray(e,!0)},ps=function(n){return HA(n).replace(/\./g,"")},Rl=function(n){try{return b_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var QA=()=>KA().__FIREBASE_DEFAULTS__,JA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Rl(n[1]);return e&&JSON.parse(e)},ua=()=>{try{return QA()||JA()||YA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Sl=n=>{var e,t;return(t=(e=ua())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},la=n=>{let e=Sl(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bl=()=>{var n;return(n=ua())===null||n===void 0?void 0:n.config},Cl=n=>{var e;return(e=ua())===null||e===void 0?void 0:e[`_${n}`]};var ca=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ha(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ps(JSON.stringify(t)),ps(JSON.stringify(o)),""].join(".")}function be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function XA(){var n;let e=(n=ua())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function N_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O_(){let n=be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k_(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pl(){try{return typeof indexedDB=="object"}catch{return!1}}function x_(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ZA="FirebaseError",Ge=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ZA,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}},qt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?eR(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ge(i,c,r)}};function eR(n,e){return n.replace(tR,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var tR=/\{\$([^}]+)}/g;function L_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(R_(s)&&R_(o)){if(!Bn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function R_(n){return n!==null&&typeof n=="object"}function ms(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function M_(n,e){let t=new Al(n,e);return t.subscribe.bind(t)}var Al=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wl),i.error===void 0&&(i.error=wl),i.complete===void 0&&(i.complete=wl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function nR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wl(){}var AO=4*60*60*1e3;function ge(n){return n&&n._delegate?n._delegate:n}var Qe=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jn="[DEFAULT]";var Dl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ca;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iR(e))try{this.getOrInitializeService({instanceIdentifier:jn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=jn){return this.instances.has(e)}getOptions(e=jn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jn){return this.component?this.component.multipleInstances?e:jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rR(n){return n===jn?void 0:n}function iR(n){return n.instantiationMode==="EAGER"}var da=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Dl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var sR=[],X=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(X||{}),oR={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},aR=X.INFO,cR={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},uR=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=cR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},gn=class{constructor(e){this.name=e,this._logLevel=aR,this._logHandler=uR,this._userLogHandler=null,sR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var lR=(n,e)=>e.some(t=>n instanceof t),V_,U_;function hR(){return V_||(V_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dR(){return U_||(U_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var F_=new WeakMap,Ol=new WeakMap,B_=new WeakMap,Nl=new WeakMap,xl=new WeakMap;function fR(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&F_.set(t,n)}).catch(()=>{}),xl.set(e,n),e}function pR(n){if(Ol.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ol.set(n,e)}var kl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ol.get(n);if(e==="objectStoreNames")return n.objectStoreNames||B_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function j_(n){kl=n(kl)}function mR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(fa(this),e,...t);return B_.set(r,e.sort?e.sort():[e]),Rt(r)}:dR().includes(n)?function(...e){return n.apply(fa(this),e),Rt(F_.get(this))}:function(...e){return Rt(n.apply(fa(this),e))}}function gR(n){return typeof n=="function"?mR(n):(n instanceof IDBTransaction&&pR(n),lR(n,hR())?new Proxy(n,kl):n)}function Rt(n){if(n instanceof IDBRequest)return fR(n);if(Nl.has(n))return Nl.get(n);let e=gR(n);return e!==n&&(Nl.set(n,e),xl.set(e,n)),e}var fa=n=>xl.get(n);function $_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Rt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Rt(o.result),u.oldVersion,u.newVersion,Rt(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var _R=["get","getKey","getAll","getAllKeys","count"],yR=["put","add","delete","clear"],Ll=new Map;function q_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ll.get(e))return Ll.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=yR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_R.includes(t)))return;let s=function(o,...c){return I(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),h=u.store;return r&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),i&&u.done]))[0]})};return Ll.set(e,s),s}j_(n=>De(V({},n),{get:(e,t,r)=>q_(e,t)||n.get(e,t,r),has:(e,t)=>!!q_(e,t)||n.has(e,t)}));var Vl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vR(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function vR(n){let e=n.getComponent();return e?.type==="VERSION"}var Ul="@firebase/app",z_="0.10.13";var $t=new gn("@firebase/app"),IR="@firebase/app-compat",ER="@firebase/analytics-compat",wR="@firebase/analytics",TR="@firebase/app-check-compat",AR="@firebase/app-check",RR="@firebase/auth",SR="@firebase/auth-compat",bR="@firebase/database",CR="@firebase/data-connect",PR="@firebase/database-compat",DR="@firebase/functions",NR="@firebase/functions-compat",OR="@firebase/installations",kR="@firebase/installations-compat",xR="@firebase/messaging",LR="@firebase/messaging-compat",MR="@firebase/performance",VR="@firebase/performance-compat",UR="@firebase/remote-config",FR="@firebase/remote-config-compat",BR="@firebase/storage",jR="@firebase/storage-compat",qR="@firebase/firestore",$R="@firebase/vertexai-preview",zR="@firebase/firestore-compat",GR="firebase",WR="10.14.1";var Fl="[DEFAULT]",HR={[Ul]:"fire-core",[IR]:"fire-core-compat",[wR]:"fire-analytics",[ER]:"fire-analytics-compat",[AR]:"fire-app-check",[TR]:"fire-app-check-compat",[RR]:"fire-auth",[SR]:"fire-auth-compat",[bR]:"fire-rtdb",[CR]:"fire-data-connect",[PR]:"fire-rtdb-compat",[DR]:"fire-fn",[NR]:"fire-fn-compat",[OR]:"fire-iid",[kR]:"fire-iid-compat",[xR]:"fire-fcm",[LR]:"fire-fcm-compat",[MR]:"fire-perf",[VR]:"fire-perf-compat",[UR]:"fire-rc",[FR]:"fire-rc-compat",[BR]:"fire-gcs",[jR]:"fire-gcs-compat",[qR]:"fire-fst",[zR]:"fire-fst-compat",[$R]:"fire-vertex","fire-js":"fire-js",[GR]:"fire-js-all"};var gs=new Map,KR=new Map,Bl=new Map;function G_(n,e){try{n.container.addComponent(e)}catch(t){$t.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function St(n){let e=n.name;if(Bl.has(e))return $t.debug(`There were multiple attempts to register component ${e}.`),!1;Bl.set(e,n);for(let t of gs.values())G_(t,n);for(let t of KR.values())G_(t,n);return!0}function qn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zt(n){return n.settings!==void 0}var QR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_n=new qt("app","Firebase",QR);var jl=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}};var bt=WR;function zl(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Fl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _n.create("bad-app-name",{appName:String(i)});if(t||(t=bl()),!t)throw _n.create("no-options");let s=gs.get(i);if(s){if(Bn(t,s.options)&&Bn(r,s.config))return s;throw _n.create("duplicate-app",{appName:i})}let o=new da(i);for(let u of Bl.values())o.addComponent(u);let c=new jl(t,r,o);return gs.set(i,c),c}function yn(n=Fl){let e=gs.get(n);if(!e&&n===Fl&&bl())return zl();if(!e)throw _n.create("no-app",{appName:n});return e}function pa(){return Array.from(gs.values())}function he(n,e,t){var r;let i=(r=HR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$t.warn(c.join(" "));return}St(new Qe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var JR="firebase-heartbeat-database",YR=1,_s="firebase-heartbeat-store",Ml=null;function Q_(){return Ml||(Ml=$_(JR,YR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_s)}catch(t){console.warn(t)}}}}).catch(n=>{throw _n.create("idb-open",{originalErrorMessage:n.message})})),Ml}function XR(n){return I(this,null,function*(){try{let t=(yield Q_()).transaction(_s),r=yield t.objectStore(_s).get(J_(n));return yield t.done,r}catch(e){if(e instanceof Ge)$t.warn(e.message);else{let t=_n.create("idb-get",{originalErrorMessage:e?.message});$t.warn(t.message)}}})}function W_(n,e){return I(this,null,function*(){try{let r=(yield Q_()).transaction(_s,"readwrite");yield r.objectStore(_s).put(e,J_(n)),yield r.done}catch(t){if(t instanceof Ge)$t.warn(t.message);else{let r=_n.create("idb-set",{originalErrorMessage:t?.message});$t.warn(r.message)}}})}function J_(n){return`${n.name}!${n.options.appId}`}var ZR=1024,eS=30*24*60*60*1e3,ql=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new $l(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=eS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$t.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=H_(),{heartbeatsToSend:r,unsentEntries:i}=tS(this._heartbeatsCache.heartbeats),s=ps(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return $t.warn(t),""}})}};function H_(){return new Date().toISOString().substring(0,10)}function tS(n,e=ZR){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),K_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),K_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var $l=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Pl()?x_().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield XR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return W_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return W_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function K_(n){return ps(JSON.stringify({version:2,heartbeats:n})).length}function nS(n){St(new Qe("platform-logger",e=>new Vl(e),"PRIVATE")),St(new Qe("heartbeat",e=>new ql(e),"PRIVATE")),he(Ul,z_,n),he(Ul,z_,"esm2017"),he("fire-js","")}nS("");var rS="firebase",iS="10.14.1";he(rS,iS,"app");var Gt=new Co("ANGULARFIRE2_VERSION");function Lr(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var zn=(n,e)=>{let t=e?[e]:pa(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},vn=class{constructor(){return zn(sS)}},sS="app-check";function xr(){}var ma=class{zone;delegate;constructor(e,t=um){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Gl=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xr,{},xr,xr)),t.pipe(ve({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},In=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ma(Zone.current)),this.insideAngular=t.run(()=>new ma(Zone.current,cm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Y(Ee))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ga(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function oS(n){return ga().ngZone.runOutsideAngular(()=>n())}function $n(n){return ga().ngZone.run(()=>n())}function aS(n){return cS(ga())(n)}function cS(n){return function(t){return t=t.lift(new Gl(n.ngZone)),t.pipe(au(n.outsideAngular),ou(n.insideAngular))}}var uS=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),$n(()=>n.apply(void 0,r))},we=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=$n(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xr,{},xr,xr))),r[s]=uS(r[s],t));let i=oS(()=>n.apply(this,r));if(!e)if(i instanceof on){let s=ga();return i.pipe(au(s.outsideAngular),ou(s.insideAngular))}else return $n(()=>i);return i instanceof on?i.pipe(aS):i instanceof Promise?$n(()=>new Promise((s,o)=>i.then(c=>$n(()=>s(c)),c=>$n(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:$n(()=>i)};var mt=class{constructor(e){return e}},Wt=class{constructor(){return pa()}};function lS(n){return n&&n.length===1?n[0]:new mt(yn())}var Wl=new ne("angularfire2._apps"),hS={provide:mt,useFactory:lS,deps:[[new Ie,Wl]]},dS={provide:Wt,deps:[[new Ie,Wl]]};function fS(n){return(e,t)=>{let r=t.get(Et);he("angularfire",Gt.full,"core"),he("angularfire",Gt.full,"app"),he("angular",zm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new mt(i)}}function lk(n,...e){return He([hS,dS,{provide:Wl,useFactory:fS(n),multi:!0,deps:[Ee,dt,In,...e]}])}var hk=we(zl,!0);function hy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var dy=hy,fy=new qt("auth","Firebase",hy());var wa=new gn("@firebase/auth");function pS(n,...e){wa.logLevel<=X.WARN&&wa.warn(`Auth (${bt}): ${n}`,...e)}function ya(n,...e){wa.logLevel<=X.ERROR&&wa.error(`Auth (${bt}): ${n}`,...e)}function wn(n,...e){throw dh(n,...e)}function Wn(n,...e){return dh(n,...e)}function py(n,e,t){let r=Object.assign(Object.assign({},dy()),{[e]:t});return new qt("auth","Firebase",r).create(e,{appName:n.name})}function Gn(n){return py(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dh(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fy.create(n,...e)}function G(n,e,...t){if(!n)throw dh(e,...t)}function Ht(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ya(e),new Error(e)}function Tn(n,e){n||Ht(e)}function Jl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function mS(){return Y_()==="http:"||Y_()==="https:"}function Y_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function gS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mS()||D_()||"connection"in navigator)?navigator.onLine:!0}function _S(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Hn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tn(t>e,"Short delay should be less than long delay!"),this.isMobile=C_()||N_()}get(){return gS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fh(n,e){Tn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ta=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var yS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vS=new Hn(3e4,6e4);function ph(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Vr(s,o,c,u){return I(this,arguments,function*(n,e,t,r,i={}){return my(n,i,()=>I(this,null,function*(){let h={},f={};r&&(e==="GET"?f=r:h={body:JSON.stringify(r)});let m=ms(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let R=Object.assign({method:e,headers:_},h);return P_()||(R.referrerPolicy="no-referrer"),Ta.fetch()(gy(n,n.config.apiHost,t,m),R)}))})}function my(n,e,t){return I(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},yS),e);try{let i=new Yl(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw _a(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _a(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw _a(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw _a(n,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw py(n,f,h);wn(n,f)}}catch(i){if(i instanceof Ge)throw i;wn(n,"network-request-failed",{message:String(i)})}})}function IS(s,o,c,u){return I(this,arguments,function*(n,e,t,r,i={}){let h=yield Vr(n,e,t,r,i);return"mfaPendingCredential"in h&&wn(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function gy(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?fh(n.config,i):`${n.config.apiScheme}://${i}`}var Yl=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Wn(this.auth,"network-request-failed")),vS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function _a(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Wn(n,e,r);return i.customData._tokenResponse=t,i}function ES(n,e){return I(this,null,function*(){return Vr(n,"POST","/v1/accounts:delete",e)})}function _y(n,e){return I(this,null,function*(){return Vr(n,"POST","/v1/accounts:lookup",e)})}function ys(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mh(n,e=!1){return I(this,null,function*(){let t=ge(n),r=yield t.getIdToken(e),i=gh(r);G(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ys(Hl(i.auth_time)),issuedAtTime:ys(Hl(i.iat)),expirationTime:ys(Hl(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Hl(n){return Number(n)*1e3}function gh(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ya("JWT malformed, contained fewer than 3 sections"),null;try{let i=Rl(t);return i?JSON.parse(i):(ya("Failed to decode base64 JWT payload"),null)}catch(i){return ya("Caught error parsing JWT payload as JSON",i?.toString()),null}}function X_(n){let e=gh(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Is(n,e,t=!1){return I(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ge&&wS(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function wS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Xl=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),t)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Es=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ys(this.lastLoginAt),this.creationTime=ys(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Aa(n){return I(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Is(n,_y(t,{idToken:r}));G(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yy(s.providerUserInfo):[],c=TS(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=u?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Es(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function _h(n){return I(this,null,function*(){let e=ge(n);yield Aa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function TS(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yy(n){return n.map(e=>{var{providerId:t}=e,r=su(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function AS(n,e){return I(this,null,function*(){let t=yield my(n,{},()=>I(this,null,function*(){let r=ms({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=gy(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ta.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function RS(n,e){return I(this,null,function*(){return Vr(n,"POST","/v2/accounts:revokeToken",ph(n,e))})}var vs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");let t=X_(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return I(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield AS(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ht("not implemented")}};function En(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Mr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=su(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Es(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let t=yield Is(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return mh(this,e)}reload(){return _h(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Aa(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(zt(this.auth.app))return Promise.reject(Gn(this.auth));let e=yield this.getIdToken();return yield Is(this,ES(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,u,h,f;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,D=(c=t.tenantId)!==null&&c!==void 0?c:void 0,b=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,M=(h=t.createdAt)!==null&&h!==void 0?h:void 0,B=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:j,isAnonymous:re,providerData:H,stsTokenManager:w}=t;G(x&&w,e,"internal-error");let g=vs.fromJSON(this.name,w);G(typeof x=="string",e,"internal-error"),En(m,e.name),En(_,e.name),G(typeof j=="boolean",e,"internal-error"),G(typeof re=="boolean",e,"internal-error"),En(R,e.name),En(P,e.name),En(D,e.name),En(b,e.name),En(M,e.name),En(B,e.name);let y=new n({uid:x,auth:e,email:_,emailVerified:j,displayName:m,isAnonymous:re,photoURL:P,phoneNumber:R,tenantId:D,stsTokenManager:g,createdAt:M,lastLoginAt:B});return H&&Array.isArray(H)&&(y.providerData=H.map(E=>Object.assign({},E))),b&&(y._redirectEventId=b),y}static _fromIdTokenResponse(e,t,r=!1){return I(this,null,function*(){let i=new vs;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Aa(s),s})}static _fromGetAccountInfoResponse(e,t,r){return I(this,null,function*(){let i=t.users[0];G(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?yy(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new vs;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Es(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,h),u})}};var Z_=new Map;function Kt(n){Tn(n instanceof Function,"Expected a class definition");let e=Z_.get(n);return e?(Tn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Z_.set(n,e),e)}var SS=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(t,r){return I(this,null,function*(){this.storage[t]=r})}_get(t){return I(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return I(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Zl=SS;function va(n,e,t){return`firebase:${n}:${e}:${t}`}var Ra=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=va(this.userKey,i.apiKey,s),this.fullPersistenceKey=va("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Mr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return I(this,null,function*(){if(!t.length)return new n(Kt(Zl),e,r);let i=(yield Promise.all(t.map(h=>I(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=i[0]||Kt(Zl),o=va(r,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let m=Mr._fromJSON(e,f);h!==s&&(c=m),s=h;break}}catch{}let u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>I(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,r))})}};function ey(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ay(e))return"Blackberry";if(Ry(e))return"Webos";if(Iy(e))return"Safari";if((e.includes("chrome/")||Ey(e))&&!e.includes("edge/"))return"Chrome";if(Ty(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function vy(n=be()){return/firefox\//i.test(n)}function Iy(n=be()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ey(n=be()){return/crios\//i.test(n)}function wy(n=be()){return/iemobile/i.test(n)}function Ty(n=be()){return/android/i.test(n)}function Ay(n=be()){return/blackberry/i.test(n)}function Ry(n=be()){return/webos/i.test(n)}function yh(n=be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bS(n=be()){var e;return yh(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CS(){return O_()&&document.documentMode===10}function Sy(n=be()){return yh(n)||Ty(n)||Ry(n)||Ay(n)||/windows phone/i.test(n)||wy(n)}function by(n,e=[]){let t;switch(n){case"Browser":t=ey(be());break;case"Worker":t=`${ey(be())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bt}/${r}`}var eh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function PS(t){return I(this,arguments,function*(n,e={}){return Vr(n,"GET","/v2/passwordPolicy",ph(n,e))})}var DS=6,th=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:DS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var nh=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sa(this),this.idTokenSubscription=new Sa(this),this.beforeStateQueue=new eh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kt(t)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ra.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let t=yield _y(this,{idToken:e}),r=yield Mr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var t;if(zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Aa(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=_S()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(zt(this.app))return Promise.reject(Gn(this));let t=e?ge(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return I(this,null,function*(){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return zt(this.app)?Promise.reject(Gn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zt(this.app)?Promise.reject(Gn(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(Kt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield PS(this),t=new th(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield RS(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Kt(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=yield Ra.create(this,[Kt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=by(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return I(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&pS(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vh(n){return ge(n)}var Sa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=M_(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ih={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NS(n){Ih=n}function OS(n){return Ih.loadJS(n)}function kS(){return Ih.gapiScript}function Cy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Eh(n,e){let t=qn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Bn(s,e??{}))return i;wn(i,"already-initialized")}return t.initialize({options:e})}function xS(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Kt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function wh(n,e,t){let r=vh(n);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Py(e),{host:o,port:c}=LS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||MS()}function Py(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LS(n){let e=Py(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:ty(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:ty(o)}}}function ty(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function MS(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ba=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ht("not implemented")}_getIdTokenResponse(e){return Ht("not implemented")}_linkToIdToken(e,t){return Ht("not implemented")}_getReauthenticationResolver(e){return Ht("not implemented")}};function Kl(n,e){return I(this,null,function*(){return IS(n,"POST","/v1/accounts:signInWithIdp",ph(n,e))})}var Ca=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var rh=class extends Ca{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ws=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return I(this,null,function*(){let s=yield Mr._fromIdTokenResponse(e,r,i),o=ny(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ny(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function ny(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ih=class n extends Ge{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Dy(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ih._fromErrorAndOperation(n,s,e,r):s})}function VS(n,e,t=!1){return I(this,null,function*(){let r=yield Is(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ws._forOperation(n,"link",r)})}function US(n,e,t=!1){return I(this,null,function*(){let{auth:r}=n;if(zt(r.app))return Promise.reject(Gn(r));let i="reauthenticate";try{let s=yield Is(n,Dy(r,i,e,n),t);G(s.idToken,r,"internal-error");let o=gh(s.idToken);G(o,r,"internal-error");let{sub:c}=o;return G(n.uid===c,r,"user-mismatch"),ws._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&wn(r,"user-mismatch"),s}})}function FS(n,e,t=!1){return I(this,null,function*(){if(zt(n.app))return Promise.reject(Gn(n));let r="signIn",i=yield Dy(n,r,e),s=yield ws._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Th(n,e,t,r){return ge(n).onIdTokenChanged(e,t,r)}function Ah(n,e,t){return ge(n).beforeAuthStateChanged(e,t)}var Pa="__sak";var Da=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pa,"1"),this.storage.removeItem(Pa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var BS=1e3,jS=10,qS=(()=>{class n extends Da{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sy(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);CS()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,jS):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},BS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return I(this,null,function*(){yield sn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return I(this,null,function*(){let r=yield sn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return I(this,null,function*(){yield sn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Ny=qS;var $S=(()=>{class n extends Da{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Rh=$S;function zS(n){return Promise.all(n.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var GS=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return I(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(f=>I(this,null,function*(){return f(r.origin,o)})),h=yield zS(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Oy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var sh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let h=Oy("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ct(){return window}function WS(n){Ct().location.href=n}function ky(){return typeof Ct().WorkerGlobalScope<"u"&&typeof Ct().importScripts=="function"}function HS(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function KS(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function QS(){return ky()?self:null}var xy="firebaseLocalStorageDb",JS=1,Na="firebaseLocalStorage",Ly="fbase_key",Kn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ka(n,e){return n.transaction([Na],e?"readwrite":"readonly").objectStore(Na)}function YS(){let n=indexedDB.deleteDatabase(xy);return new Kn(n).toPromise()}function oh(){let n=indexedDB.open(xy,JS);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Na,{keyPath:Ly})}catch(i){t(i)}}),n.addEventListener("success",()=>I(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Na)?e(r):(r.close(),yield YS(),e(yield oh()))}))})}function ry(n,e,t){return I(this,null,function*(){let r=ka(n,!0).put({[Ly]:e,value:t});return new Kn(r).toPromise()})}function XS(n,e){return I(this,null,function*(){let t=ka(n,!1).get(e),r=yield new Kn(t).toPromise();return r===void 0?null:r.value})}function iy(n,e){let t=ka(n,!0).delete(e);return new Kn(t).toPromise()}var ZS=800,eb=3,tb=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield oh(),this.db)})}_withRetries(t){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>eb)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return ky()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=GS._getInstance(QS()),this.receiver._subscribe("keyChanged",(t,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var t,r;if(this.activeServiceWorker=yield HS(),!this.activeServiceWorker)return;this.sender=new sh(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||KS()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let t=yield oh();return yield ry(t,Pa,"1"),yield iy(t,Pa),!0}catch{}return!1})}_withPendingWrite(t){return I(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>ry(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return I(this,null,function*(){let r=yield this._withRetries(i=>XS(i,t));return this.localCache[t]=r,r})}_remove(t){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>iy(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return I(this,null,function*(){let t=yield this._withRetries(s=>{let o=ka(s,!1).getAll();return new Kn(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),ZS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),My=tb;var Ek=Cy("rcb"),wk=new Hn(3e4,6e4);function nb(n,e){return e?Kt(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ts=class extends ba{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function rb(n){return FS(n.auth,new Ts(n),n.bypassAuthState)}function ib(n){let{auth:e,user:t}=n;return G(t,e,"internal-error"),US(t,new Ts(n),n.bypassAuthState)}function sb(n){return I(this,null,function*(){let{auth:e,user:t}=n;return G(t,e,"internal-error"),VS(t,new Ts(n),n.bypassAuthState)})}var ah=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rb;case"linkViaPopup":case"linkViaRedirect":return sb;case"reauthViaPopup":case"reauthViaRedirect":return ib;default:wn(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Tk=new Hn(2e3,1e4);var ob="pendingRedirect",Ia=new Map,ch=class n extends ah{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=Ia.get(this.auth._key());if(!e){try{let r=(yield ab(this.resolver,this.auth))?yield sn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ia.set(this.auth._key(),e)}return this.bypassAuthState||Ia.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return sn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,sn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function ab(n,e){return I(this,null,function*(){let t=lb(e),r=ub(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function cb(n,e){Ia.set(n._key(),e)}function ub(n){return Kt(n._redirectPersistence)}function lb(n){return va(ob,n.config.apiKey,n.name)}function hb(n,e,t=!1){return I(this,null,function*(){if(zt(n.app))return Promise.reject(Gn(n));let r=vh(n),i=nb(r,e),o=yield new ch(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var db=10*60*1e3,uh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Vy(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Wn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=db&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}};function sy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Vy({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function fb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vy(n);default:return!1}}function pb(t){return I(this,arguments,function*(n,e={}){return Vr(n,"GET","/v1/projects",e)})}var mb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gb=/^https?/;function _b(n){return I(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield pb(n);for(let t of e)try{if(yb(t))return}catch{}wn(n,"unauthorized-domain")})}function yb(n){let e=Jl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!gb.test(t))return!1;if(mb.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var vb=new Hn(3e4,6e4);function oy(){let n=Ct().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ib(n){return new Promise((e,t)=>{var r,i,s;function o(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),t(Wn(n,"network-request-failed"))},timeout:vb.get()})}if(!((i=(r=Ct().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ct().gapi)===null||s===void 0)&&s.load)o();else{let c=Cy("iframefcb");return Ct()[c]=()=>{gapi.load?o():t(Wn(n,"network-request-failed"))},OS(`${kS()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Ea=null,e})}var Ea=null;function Eb(n){return Ea=Ea||Ib(n),Ea}var wb=new Hn(5e3,15e3),Tb="__/auth/iframe",Ab="emulator/auth/iframe",Rb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bb(n){let e=n.config;G(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?fh(e,Ab):`https://${n.config.authDomain}/${Tb}`,r={apiKey:e.apiKey,appName:n.name,v:bt},i=Sb.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ms(r).slice(1)}`}function Cb(n){return I(this,null,function*(){let e=yield Eb(n),t=Ct().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:bb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rb,dontclear:!0},r=>new Promise((i,s)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Wn(n,"network-request-failed"),c=Ct().setTimeout(()=>{s(o)},wb.get());function u(){Ct().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var Pb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Db=500,Nb=600,Ob="_blank",kb="http://localhost",Oa=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xb(n,e,t,r=Db,i=Nb){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},Pb),{width:r.toString(),height:i.toString(),top:s,left:o}),h=be().toLowerCase();t&&(c=Ey(h)?Ob:t),vy(h)&&(e=e||kb,u.scrollbars="yes");let f=Object.entries(u).reduce((_,[R,P])=>`${_}${R}=${P},`,"");if(bS(h)&&c!=="_self")return Lb(e||"",c),new Oa(null);let m=window.open(e||"",c,f);G(m,n,"popup-blocked");try{m.focus()}catch{}return new Oa(m)}function Lb(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Mb="__/auth/handler",Vb="emulator/auth/handler",Ub=encodeURIComponent("fac");function ay(n,e,t,r,i,s){return I(this,null,function*(){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:bt,eventId:i};if(e instanceof Ca){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",L_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof rh){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),h=u?`#${Ub}=${encodeURIComponent(u)}`:"";return`${Fb(n)}?${ms(c).slice(1)}${h}`})}function Fb({config:n}){return n.emulator?fh(n,Vb):`https://${n.authDomain}/${Mb}`}var Ql="webStorageSupport",lh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rh,this._completeRedirectFn=hb,this._overrideRedirectResult=cb}_openPopup(e,t,r,i){return I(this,null,function*(){var s;Tn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ay(e,t,r,Jl(),i);return xb(e,o,Oy())})}_openRedirect(e,t,r,i){return I(this,null,function*(){yield this._originValidation(e);let s=yield ay(e,t,r,Jl(),i);return WS(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Tn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return I(this,null,function*(){let t=yield Cb(e),r=new uh(e);return t.register("authEvent",i=>(G(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ql,{type:Ql},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ql];o!==void 0&&t(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_b(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sy()||Iy()||yh()}},Uy=lh;var cy="@firebase/auth",uy="1.7.9";var hh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Bb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jb(n){St(new Qe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:by(n)},h=new nh(r,i,s,u);return xS(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),St(new Qe("auth-internal",e=>{let t=vh(e.getProvider("auth").getImmediate());return(r=>new hh(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),he(cy,uy,Bb(n)),he(cy,uy,"esm2017")}var qb=5*60,$b=Cl("authIdTokenMaxAge")||qb,ly=null,zb=n=>e=>I(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$b)return;let i=t?.token;ly!==i&&(ly=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Sh(n=yn()){let e=qn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Eh(n,{popupRedirectResolver:Uy,persistence:[My,Ny,Rh]}),r=Cl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=zb(s.toString());Ah(t,o,()=>o(t.currentUser)),Th(t,c=>o(c))}}let i=Sl("auth");return i&&wh(t,`http://${i}`),t}function Gb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}NS({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Wn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Gb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jb("Browser");var Fy="auth",As=class{constructor(e){return e}},Qn=class{constructor(){return zn(Fy)}};var bh=new ne("angularfire2.auth-instances");function F0(n,e){let t=Lr(Fy,n,e);return t&&new As(t)}function B0(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new As(r)}}var j0={provide:Qn,deps:[[new Ie,bh]]},q0={provide:As,useFactory:F0,deps:[[new Ie,bh],mt]};function ux(n,...e){return he("angularfire",Gt.full,"auth"),He([q0,j0,{provide:bh,useFactory:B0(n),multi:!0,deps:[Ee,dt,In,Wt,[new Ie,vn],...e]}])}var lx=we(Sh,!0);var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jy={};var An,Ch;(function(){var n;function e(w,g){function y(){}y.prototype=g.prototype,w.D=g.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(E,T,S){for(var v=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)v[Vt-2]=arguments[Vt];return g.prototype[T].apply(E,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,g,y){y||(y=0);var E=Array(16);if(typeof g=="string")for(var T=0;16>T;++T)E[T]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(T=0;16>T;++T)E[T]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=w.g[0],y=w.g[1],T=w.g[2];var S=w.g[3],v=g+(S^y&(T^S))+E[0]+3614090360&4294967295;g=y+(v<<7&4294967295|v>>>25),v=S+(T^g&(y^T))+E[1]+3905402710&4294967295,S=g+(v<<12&4294967295|v>>>20),v=T+(y^S&(g^y))+E[2]+606105819&4294967295,T=S+(v<<17&4294967295|v>>>15),v=y+(g^T&(S^g))+E[3]+3250441966&4294967295,y=T+(v<<22&4294967295|v>>>10),v=g+(S^y&(T^S))+E[4]+4118548399&4294967295,g=y+(v<<7&4294967295|v>>>25),v=S+(T^g&(y^T))+E[5]+1200080426&4294967295,S=g+(v<<12&4294967295|v>>>20),v=T+(y^S&(g^y))+E[6]+2821735955&4294967295,T=S+(v<<17&4294967295|v>>>15),v=y+(g^T&(S^g))+E[7]+4249261313&4294967295,y=T+(v<<22&4294967295|v>>>10),v=g+(S^y&(T^S))+E[8]+1770035416&4294967295,g=y+(v<<7&4294967295|v>>>25),v=S+(T^g&(y^T))+E[9]+2336552879&4294967295,S=g+(v<<12&4294967295|v>>>20),v=T+(y^S&(g^y))+E[10]+4294925233&4294967295,T=S+(v<<17&4294967295|v>>>15),v=y+(g^T&(S^g))+E[11]+2304563134&4294967295,y=T+(v<<22&4294967295|v>>>10),v=g+(S^y&(T^S))+E[12]+1804603682&4294967295,g=y+(v<<7&4294967295|v>>>25),v=S+(T^g&(y^T))+E[13]+4254626195&4294967295,S=g+(v<<12&4294967295|v>>>20),v=T+(y^S&(g^y))+E[14]+2792965006&4294967295,T=S+(v<<17&4294967295|v>>>15),v=y+(g^T&(S^g))+E[15]+1236535329&4294967295,y=T+(v<<22&4294967295|v>>>10),v=g+(T^S&(y^T))+E[1]+4129170786&4294967295,g=y+(v<<5&4294967295|v>>>27),v=S+(y^T&(g^y))+E[6]+3225465664&4294967295,S=g+(v<<9&4294967295|v>>>23),v=T+(g^y&(S^g))+E[11]+643717713&4294967295,T=S+(v<<14&4294967295|v>>>18),v=y+(S^g&(T^S))+E[0]+3921069994&4294967295,y=T+(v<<20&4294967295|v>>>12),v=g+(T^S&(y^T))+E[5]+3593408605&4294967295,g=y+(v<<5&4294967295|v>>>27),v=S+(y^T&(g^y))+E[10]+38016083&4294967295,S=g+(v<<9&4294967295|v>>>23),v=T+(g^y&(S^g))+E[15]+3634488961&4294967295,T=S+(v<<14&4294967295|v>>>18),v=y+(S^g&(T^S))+E[4]+3889429448&4294967295,y=T+(v<<20&4294967295|v>>>12),v=g+(T^S&(y^T))+E[9]+568446438&4294967295,g=y+(v<<5&4294967295|v>>>27),v=S+(y^T&(g^y))+E[14]+3275163606&4294967295,S=g+(v<<9&4294967295|v>>>23),v=T+(g^y&(S^g))+E[3]+4107603335&4294967295,T=S+(v<<14&4294967295|v>>>18),v=y+(S^g&(T^S))+E[8]+1163531501&4294967295,y=T+(v<<20&4294967295|v>>>12),v=g+(T^S&(y^T))+E[13]+2850285829&4294967295,g=y+(v<<5&4294967295|v>>>27),v=S+(y^T&(g^y))+E[2]+4243563512&4294967295,S=g+(v<<9&4294967295|v>>>23),v=T+(g^y&(S^g))+E[7]+1735328473&4294967295,T=S+(v<<14&4294967295|v>>>18),v=y+(S^g&(T^S))+E[12]+2368359562&4294967295,y=T+(v<<20&4294967295|v>>>12),v=g+(y^T^S)+E[5]+4294588738&4294967295,g=y+(v<<4&4294967295|v>>>28),v=S+(g^y^T)+E[8]+2272392833&4294967295,S=g+(v<<11&4294967295|v>>>21),v=T+(S^g^y)+E[11]+1839030562&4294967295,T=S+(v<<16&4294967295|v>>>16),v=y+(T^S^g)+E[14]+4259657740&4294967295,y=T+(v<<23&4294967295|v>>>9),v=g+(y^T^S)+E[1]+2763975236&4294967295,g=y+(v<<4&4294967295|v>>>28),v=S+(g^y^T)+E[4]+1272893353&4294967295,S=g+(v<<11&4294967295|v>>>21),v=T+(S^g^y)+E[7]+4139469664&4294967295,T=S+(v<<16&4294967295|v>>>16),v=y+(T^S^g)+E[10]+3200236656&4294967295,y=T+(v<<23&4294967295|v>>>9),v=g+(y^T^S)+E[13]+681279174&4294967295,g=y+(v<<4&4294967295|v>>>28),v=S+(g^y^T)+E[0]+3936430074&4294967295,S=g+(v<<11&4294967295|v>>>21),v=T+(S^g^y)+E[3]+3572445317&4294967295,T=S+(v<<16&4294967295|v>>>16),v=y+(T^S^g)+E[6]+76029189&4294967295,y=T+(v<<23&4294967295|v>>>9),v=g+(y^T^S)+E[9]+3654602809&4294967295,g=y+(v<<4&4294967295|v>>>28),v=S+(g^y^T)+E[12]+3873151461&4294967295,S=g+(v<<11&4294967295|v>>>21),v=T+(S^g^y)+E[15]+530742520&4294967295,T=S+(v<<16&4294967295|v>>>16),v=y+(T^S^g)+E[2]+3299628645&4294967295,y=T+(v<<23&4294967295|v>>>9),v=g+(T^(y|~S))+E[0]+4096336452&4294967295,g=y+(v<<6&4294967295|v>>>26),v=S+(y^(g|~T))+E[7]+1126891415&4294967295,S=g+(v<<10&4294967295|v>>>22),v=T+(g^(S|~y))+E[14]+2878612391&4294967295,T=S+(v<<15&4294967295|v>>>17),v=y+(S^(T|~g))+E[5]+4237533241&4294967295,y=T+(v<<21&4294967295|v>>>11),v=g+(T^(y|~S))+E[12]+1700485571&4294967295,g=y+(v<<6&4294967295|v>>>26),v=S+(y^(g|~T))+E[3]+2399980690&4294967295,S=g+(v<<10&4294967295|v>>>22),v=T+(g^(S|~y))+E[10]+4293915773&4294967295,T=S+(v<<15&4294967295|v>>>17),v=y+(S^(T|~g))+E[1]+2240044497&4294967295,y=T+(v<<21&4294967295|v>>>11),v=g+(T^(y|~S))+E[8]+1873313359&4294967295,g=y+(v<<6&4294967295|v>>>26),v=S+(y^(g|~T))+E[15]+4264355552&4294967295,S=g+(v<<10&4294967295|v>>>22),v=T+(g^(S|~y))+E[6]+2734768916&4294967295,T=S+(v<<15&4294967295|v>>>17),v=y+(S^(T|~g))+E[13]+1309151649&4294967295,y=T+(v<<21&4294967295|v>>>11),v=g+(T^(y|~S))+E[4]+4149444226&4294967295,g=y+(v<<6&4294967295|v>>>26),v=S+(y^(g|~T))+E[11]+3174756917&4294967295,S=g+(v<<10&4294967295|v>>>22),v=T+(g^(S|~y))+E[2]+718787259&4294967295,T=S+(v<<15&4294967295|v>>>17),v=y+(S^(T|~g))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var y=g-this.blockSize,E=this.B,T=this.h,S=0;S<g;){if(T==0)for(;S<=y;)i(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<g;)if(E[T++]=w.charCodeAt(S++),T==this.blockSize){i(this,E),T=0;break}}else for(;S<g;)if(E[T++]=w[S++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=g},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var y=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=y&255,y/=256;for(this.u(w),w=Array(16),g=y=0;4>g;++g)for(var E=0;32>E;E+=8)w[y++]=this.g[g]>>>E&255;return w};function s(w,g){var y=c;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=g(w)}function o(w,g){this.h=g;for(var y=[],E=!0,T=w.length-1;0<=T;T--){var S=w[T]|0;E&&S==g||(y[T]=S,E=!1)}this.g=y}var c={};function u(w){return-128<=w&&128>w?s(w,function(g){return new o([g|0],0>g?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return b(h(-w));for(var g=[],y=1,E=0;w>=y;E++)g[E]=w/y|0,y*=4294967296;return new o(g,0)}function f(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return b(f(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),E=m,T=0;T<w.length;T+=8){var S=Math.min(8,w.length-T),v=parseInt(w.substring(T,T+S),g);8>S?(S=h(Math.pow(g,S)),E=E.j(S).add(h(v))):(E=E.j(y),E=E.add(h(v)))}return E}var m=u(0),_=u(1),R=u(16777216);n=o.prototype,n.m=function(){if(D(this))return-b(this).m();for(var w=0,g=1,y=0;y<this.g.length;y++){var E=this.i(y);w+=(0<=E?E:4294967296+E)*g,g*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(P(this))return"0";if(D(this))return"-"+b(this).toString(w);for(var g=h(Math.pow(w,6)),y=this,E="";;){var T=j(y,g).g;y=M(y,T.j(g));var S=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=T,P(y))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function P(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function D(w){return w.h==-1}n.l=function(w){return w=M(this,w),D(w)?-1:P(w)?0:1};function b(w){for(var g=w.g.length,y=[],E=0;E<g;E++)y[E]=~w.g[E];return new o(y,~w.h).add(_)}n.abs=function(){return D(this)?b(this):this},n.add=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],E=0,T=0;T<=g;T++){var S=E+(this.i(T)&65535)+(w.i(T)&65535),v=(S>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);E=v>>>16,S&=65535,v&=65535,y[T]=v<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function M(w,g){return w.add(b(g))}n.j=function(w){if(P(this)||P(w))return m;if(D(this))return D(w)?b(this).j(b(w)):b(b(this).j(w));if(D(w))return b(this.j(b(w)));if(0>this.l(R)&&0>w.l(R))return h(this.m()*w.m());for(var g=this.g.length+w.g.length,y=[],E=0;E<2*g;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<w.g.length;T++){var S=this.i(E)>>>16,v=this.i(E)&65535,Vt=w.i(T)>>>16,hi=w.i(T)&65535;y[2*E+2*T]+=v*hi,B(y,2*E+2*T),y[2*E+2*T+1]+=S*hi,B(y,2*E+2*T+1),y[2*E+2*T+1]+=v*Vt,B(y,2*E+2*T+1),y[2*E+2*T+2]+=S*Vt,B(y,2*E+2*T+2)}for(E=0;E<g;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=g;E<2*g;E++)y[E]=0;return new o(y,0)};function B(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function x(w,g){this.g=w,this.h=g}function j(w,g){if(P(g))throw Error("division by zero");if(P(w))return new x(m,m);if(D(w))return g=j(b(w),g),new x(b(g.g),b(g.h));if(D(g))return g=j(w,b(g)),new x(b(g.g),g.h);if(30<w.g.length){if(D(w)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var y=_,E=g;0>=E.l(w);)y=re(y),E=re(E);var T=H(y,1),S=H(E,1);for(E=H(E,2),y=H(y,2);!P(E);){var v=S.add(E);0>=v.l(w)&&(T=T.add(y),S=v),E=H(E,1),y=H(y,1)}return g=M(w,T.j(g)),new x(T,g)}for(T=m;0<=w.l(g);){for(y=Math.max(1,Math.floor(w.m()/g.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=h(y),v=S.j(g);D(v)||0<v.l(w);)y-=E,S=h(y),v=S.j(g);P(S)&&(S=_),T=T.add(S),w=M(w,v)}return new x(T,w)}n.A=function(w){return j(this,w).h},n.and=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],E=0;E<g;E++)y[E]=this.i(E)&w.i(E);return new o(y,this.h&w.h)},n.or=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],E=0;E<g;E++)y[E]=this.i(E)|w.i(E);return new o(y,this.h|w.h)},n.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],E=0;E<g;E++)y[E]=this.i(E)^w.i(E);return new o(y,this.h^w.h)};function re(w){for(var g=w.g.length+1,y=[],E=0;E<g;E++)y[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(y,w.h)}function H(w,g){var y=g>>5;g%=32;for(var E=w.g.length-y,T=[],S=0;S<E;S++)T[S]=0<g?w.i(S+y)>>>g|w.i(S+y+1)<<32-g:w.i(S+y);return new o(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ch=jy.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,An=jy.Integer=o}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qt={};var Ph,$0,Ur,Dh,Rs,La,Nh,Oh,kh;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,d){return a==Array.prototype||a==Object.prototype||(a[l]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xa=="object"&&xa];for(var l=0;l<a.length;++l){var d=a[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var d=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var A=a[p];if(!(A in d))break e;d=d[A]}a=a[a.length-1],p=d[a],l=l(p),l!=p&&l!=null&&e(d,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var d=0,p=!1,A={next:function(){if(!p&&d<a.length){var C=d++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,d){return d})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function h(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,d){return a.call.apply(a.bind,arguments)}function m(a,l,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,p),a.apply(l,A)}}return function(){return a.apply(l,arguments)}}function _(a,l,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,_.apply(null,arguments)}function R(a,l){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function P(a,l){function d(){}d.prototype=l.prototype,a.aa=l.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,A,C){for(var k=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)k[ce-2]=arguments[ce];return l.prototype[A].apply(p,k)}}function D(a){let l=a.length;if(0<l){let d=Array(l);for(let p=0;p<l;p++)d[p]=a[p];return d}return[]}function b(a,l){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(u(p)){let A=a.length||0,C=p.length||0;a.length=A+C;for(let k=0;k<C;k++)a[A+k]=p[k]}else a.push(p)}}class M{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function B(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var re=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(a,l,d){for(let p in a)l.call(d,a[p],p,a)}function w(a,l){for(let d in a)l.call(void 0,a[d],d,a)}function g(a){let l={};for(let d in a)l[d]=a[d];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,l){let d,p;for(let A=1;A<arguments.length;A++){p=arguments[A];for(d in p)a[d]=p[d];for(let C=0;C<y.length;C++)d=y[C],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function T(a){var l=1;a=a.split(":");let d=[];for(;0<l&&a.length;)d.push(a.shift()),l--;return a.length&&d.push(a.join(":")),d}function S(a){c.setTimeout(()=>{throw a},0)}function v(){var a=Nc;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Vt{constructor(){this.h=this.g=null}add(l,d){let p=hi.get();p.set(l,d),this.h?this.h.next=p:this.g=p,this.h=p}}var hi=new M(()=>new hE,a=>a.reset());class hE{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let di,fi=!1,Nc=new Vt,sp=()=>{let a=c.Promise.resolve(void 0);di=()=>{a.then(dE)}};var dE=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(d){S(d)}var l=hi;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}fi=!1};function en(){this.s=this.s,this.C=this.C}en.prototype.s=!1,en.prototype.ma=function(){this.s||(this.s=!0,this.N())},en.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var fE=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,l),c.removeEventListener("test",d,l)}catch{}return a}();function pi(a,l){if(Le.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(re){e:{try{j(l.nodeName);var A=!0;break e}catch{}A=!1}A||(l=null)}}else d=="mouseover"?l=a.fromElement:d=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:pE[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&pi.aa.h.call(this)}}P(pi,Le);var pE={2:"touch",3:"pen",4:"mouse"};pi.prototype.h=function(){pi.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var mi="closure_listenable_"+(1e6*Math.random()|0),mE=0;function gE(a,l,d,p,A){this.listener=a,this.proxy=null,this.src=l,this.type=d,this.capture=!!p,this.ha=A,this.key=++mE,this.da=this.fa=!1}function ao(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function co(a){this.src=a,this.g={},this.h=0}co.prototype.add=function(a,l,d,p,A){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var k=kc(a,l,p,A);return-1<k?(l=a[k],d||(l.fa=!1)):(l=new gE(l,this.src,C,!!p,A),l.fa=d,a.push(l)),l};function Oc(a,l){var d=l.type;if(d in a.g){var p=a.g[d],A=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=A)&&Array.prototype.splice.call(p,A,1),C&&(ao(l),a.g[d].length==0&&(delete a.g[d],a.h--))}}function kc(a,l,d,p){for(var A=0;A<a.length;++A){var C=a[A];if(!C.da&&C.listener==l&&C.capture==!!d&&C.ha==p)return A}return-1}var xc="closure_lm_"+(1e6*Math.random()|0),Lc={};function op(a,l,d,p,A){if(p&&p.once)return cp(a,l,d,p,A);if(Array.isArray(l)){for(var C=0;C<l.length;C++)op(a,l[C],d,p,A);return null}return d=Fc(d),a&&a[mi]?a.K(l,d,h(p)?!!p.capture:!!p,A):ap(a,l,d,!1,p,A)}function ap(a,l,d,p,A,C){if(!l)throw Error("Invalid event type");var k=h(A)?!!A.capture:!!A,ce=Vc(a);if(ce||(a[xc]=ce=new co(a)),d=ce.add(l,d,p,k,C),d.proxy)return d;if(p=_E(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)fE||(A=k),A===void 0&&(A=!1),a.addEventListener(l.toString(),p,A);else if(a.attachEvent)a.attachEvent(lp(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function _E(){function a(d){return l.call(a.src,a.listener,d)}let l=yE;return a}function cp(a,l,d,p,A){if(Array.isArray(l)){for(var C=0;C<l.length;C++)cp(a,l[C],d,p,A);return null}return d=Fc(d),a&&a[mi]?a.L(l,d,h(p)?!!p.capture:!!p,A):ap(a,l,d,!0,p,A)}function up(a,l,d,p,A){if(Array.isArray(l))for(var C=0;C<l.length;C++)up(a,l[C],d,p,A);else p=h(p)?!!p.capture:!!p,d=Fc(d),a&&a[mi]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],d=kc(C,d,p,A),-1<d&&(ao(C[d]),Array.prototype.splice.call(C,d,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=Vc(a))&&(l=a.g[l.toString()],a=-1,l&&(a=kc(l,d,p,A)),(d=-1<a?l[a]:null)&&Mc(d))}function Mc(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[mi])Oc(l.i,a);else{var d=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(d,p,a.capture):l.detachEvent?l.detachEvent(lp(d),p):l.addListener&&l.removeListener&&l.removeListener(p),(d=Vc(l))?(Oc(d,a),d.h==0&&(d.src=null,l[xc]=null)):ao(a)}}}function lp(a){return a in Lc?Lc[a]:Lc[a]="on"+a}function yE(a,l){if(a.da)a=!0;else{l=new pi(l,this);var d=a.listener,p=a.ha||a.src;a.fa&&Mc(a),a=d.call(p,l)}return a}function Vc(a){return a=a[xc],a instanceof co?a:null}var Uc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fc(a){return typeof a=="function"?a:(a[Uc]||(a[Uc]=function(l){return a.handleEvent(l)}),a[Uc])}function Me(){en.call(this),this.i=new co(this),this.M=this,this.F=null}P(Me,en),Me.prototype[mi]=!0,Me.prototype.removeEventListener=function(a,l,d,p){up(this,a,l,d,p)};function $e(a,l){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Le(l,a);else if(l instanceof Le)l.target=l.target||a;else{var A=l;l=new Le(p,a),E(l,A)}if(A=!0,d)for(var C=d.length-1;0<=C;C--){var k=l.g=d[C];A=uo(k,p,!0,l)&&A}if(k=l.g=a,A=uo(k,p,!0,l)&&A,A=uo(k,p,!1,l)&&A,d)for(C=0;C<d.length;C++)k=l.g=d[C],A=uo(k,p,!1,l)&&A}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var d=a.g[l],p=0;p<d.length;p++)ao(d[p]);delete a.g[l],a.h--}}this.F=null},Me.prototype.K=function(a,l,d,p){return this.i.add(String(a),l,!1,d,p)},Me.prototype.L=function(a,l,d,p){return this.i.add(String(a),l,!0,d,p)};function uo(a,l,d,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var A=!0,C=0;C<l.length;++C){var k=l[C];if(k&&!k.da&&k.capture==d){var ce=k.listener,Pe=k.ha||k.src;k.fa&&Oc(a.i,k),A=ce.call(Pe,p)!==!1&&A}}return A&&!p.defaultPrevented}function hp(a,l,d){if(typeof a=="function")d&&(a=_(a,d));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function dp(a){a.g=hp(()=>{a.g=null,a.i&&(a.i=!1,dp(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class vE extends en{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:dp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(a){en.call(this),this.h=a,this.g={}}P(gi,en);var fp=[];function pp(a){H(a.g,function(l,d){this.g.hasOwnProperty(d)&&Mc(l)},a),a.g={}}gi.prototype.N=function(){gi.aa.N.call(this),pp(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bc=c.JSON.stringify,IE=c.JSON.parse,EE=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function jc(){}jc.prototype.h=null;function mp(a){return a.h||(a.h=a.i())}function gp(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qc(){Le.call(this,"d")}P(qc,Le);function $c(){Le.call(this,"c")}P($c,Le);var Dn={},_p=null;function lo(){return _p=_p||new Me}Dn.La="serverreachability";function yp(a){Le.call(this,Dn.La,a)}P(yp,Le);function yi(a){let l=lo();$e(l,new yp(l))}Dn.STAT_EVENT="statevent";function vp(a,l){Le.call(this,Dn.STAT_EVENT,a),this.stat=l}P(vp,Le);function ze(a){let l=lo();$e(l,new vp(l,a))}Dn.Ma="timingevent";function Ip(a,l){Le.call(this,Dn.Ma,a),this.size=l}P(Ip,Le);function vi(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function wE(a,l,d,p,A,C){a.info(function(){if(a.g)if(C)for(var k="",ce=C.split("&"),Pe=0;Pe<ce.length;Pe++){var ie=ce[Pe].split("=");if(1<ie.length){var Ve=ie[0];ie=ie[1];var Ue=Ve.split("_");k=2<=Ue.length&&Ue[1]=="type"?k+(Ve+"="+ie+"&"):k+(Ve+"=redacted&")}}else k=null;else k=C;return"XMLHTTP REQ ("+p+") [attempt "+A+"]: "+l+`
`+d+`
`+k})}function TE(a,l,d,p,A,C,k){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+A+"]: "+l+`
`+d+`
`+C+" "+k})}function lr(a,l,d,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+RE(a,d)+(p?" "+p:"")})}function AE(a,l){a.info(function(){return"TIMEOUT: "+l})}Ii.prototype.info=function(){};function RE(a,l){if(!a.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var A=p[1];if(Array.isArray(A)&&!(1>A.length)){var C=A[0];if(C!="noop"&&C!="stop"&&C!="close")for(var k=1;k<A.length;k++)A[k]=""}}}}return Bc(d)}catch{return l}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ep={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zc;function fo(){}P(fo,jc),fo.prototype.g=function(){return new XMLHttpRequest},fo.prototype.i=function(){return{}},zc=new fo;function tn(a,l,d,p){this.j=a,this.i=l,this.l=d,this.R=p||1,this.U=new gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wp}function wp(){this.i=null,this.g="",this.h=!1}var Tp={},Gc={};function Wc(a,l,d){a.L=1,a.v=_o(Ut(l)),a.m=d,a.P=!0,Ap(a,null)}function Ap(a,l){a.F=Date.now(),po(a),a.A=Ut(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Up(d.i,"t",p),a.C=0,d=a.j.J,a.h=new wp,a.g=nm(a.j,d?l:null,!a.m),0<a.O&&(a.M=new vE(_(a.Y,a,a.g),a.O)),l=a.U,d=a.g,p=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(fp[0]=A.toString()),A=fp);for(var C=0;C<A.length;C++){var k=op(d,A[C],p||l.handleEvent,!1,l.h||l);if(!k)break;l.g[k.key]=k}l=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),yi(),wE(a.i,a.u,a.A,a.l,a.R,a.m)}tn.prototype.ca=function(a){a=a.target;let l=this.M;l&&Ft(a)==3?l.j():this.Y(a)},tn.prototype.Y=function(a){try{if(a==this.g)e:{let Ue=Ft(this.g);var l=this.g.Ba();let fr=this.g.Z();if(!(3>Ue)&&(Ue!=3||this.g&&(this.h.h||this.g.oa()||Gp(this.g)))){this.J||Ue!=4||l==7||(l==8||0>=fr?yi(3):yi(2)),Hc(this);var d=this.g.Z();this.X=d;t:if(Rp(this)){var p=Gp(this.g);a="";var A=p.length,C=Ft(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),Ei(this);var k="";break t}this.h.i=new c.TextDecoder}for(l=0;l<A;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==A-1)});p.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=d==200,TE(this.i,this.u,this.A,this.l,this.R,Ue,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Pe=this.g;if((ce=Pe.g?Pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ce)){var ie=ce;break t}}ie=null}if(d=ie)lr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kc(this,d);else{this.o=!1,this.s=3,ze(12),Nn(this),Ei(this);break e}}if(this.P){d=!0;let ht;for(;!this.J&&this.C<k.length;)if(ht=SE(this,k),ht==Gc){Ue==4&&(this.s=4,ze(14),d=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Tp){this.s=4,ze(15),lr(this.i,this.l,k,"[Invalid Chunk]"),d=!1;break}else lr(this.i,this.l,ht,null),Kc(this,ht);if(Rp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||k.length!=0||this.h.h||(this.s=1,ze(16),d=!1),this.o=this.o&&d,!d)lr(this.i,this.l,k,"[Invalid Chunked Response]"),Nn(this),Ei(this);else if(0<k.length&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.ba&&!Ve.M&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),eu(Ve),Ve.M=!0,ze(11))}}else lr(this.i,this.l,k,null),Kc(this,k);Ue==4&&Nn(this),this.o&&!this.J&&(Ue==4?Xp(this.j,this):(this.o=!1,po(this)))}else $E(this.g),d==400&&0<k.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),Nn(this),Ei(this)}}}catch{}finally{}};function Rp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function SE(a,l){var d=a.C,p=l.indexOf(`
`,d);return p==-1?Gc:(d=Number(l.substring(d,p)),isNaN(d)?Tp:(p+=1,p+d>l.length?Gc:(l=l.slice(p,p+d),a.C=p+d,l)))}tn.prototype.cancel=function(){this.J=!0,Nn(this)};function po(a){a.S=Date.now()+a.I,Sp(a,a.I)}function Sp(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vi(_(a.ba,a),l)}function Hc(a){a.B&&(c.clearTimeout(a.B),a.B=null)}tn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(AE(this.i,this.A),this.L!=2&&(yi(),ze(17)),Nn(this),this.s=2,Ei(this)):Sp(this,this.S-a)};function Ei(a){a.j.G==0||a.J||Xp(a.j,a)}function Nn(a){Hc(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,pp(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Kc(a,l){try{var d=a.j;if(d.G!=0&&(d.g==a||Qc(d.h,a))){if(!a.K&&Qc(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var A=p;if(A[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)wo(d),Io(d);else break e;Zc(d),ze(18)}}else d.za=A[1],0<d.za-d.T&&37500>A[2]&&d.F&&d.v==0&&!d.C&&(d.C=vi(_(d.Za,d),6e3));if(1>=Pp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else kn(d,11)}else if((a.K||d.g==a)&&wo(d),!B(l))for(A=d.Da.g.parse(l),l=0;l<A.length;l++){let ie=A[l];if(d.T=ie[0],ie=ie[1],d.G==2)if(ie[0]=="c"){d.K=ie[1],d.ia=ie[2];let Ve=ie[3];Ve!=null&&(d.la=Ve,d.j.info("VER="+d.la));let Ue=ie[4];Ue!=null&&(d.Aa=Ue,d.j.info("SVER="+d.Aa));let fr=ie[5];fr!=null&&typeof fr=="number"&&0<fr&&(p=1.5*fr,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let ht=a.g;if(ht){let Ao=ht.g?ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var C=p.h;C.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Jc(C,C.h),C.h=null))}if(p.D){let tu=ht.g?ht.g.getResponseHeader("X-HTTP-Session-Id"):null;tu&&(p.ya=tu,ue(p.I,p.D,tu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var k=a;if(p.qa=tm(p,p.J?p.ia:null,p.W),k.K){Dp(p.h,k);var ce=k,Pe=p.L;Pe&&(ce.I=Pe),ce.B&&(Hc(ce),po(ce)),p.g=k}else Jp(p);0<d.i.length&&Eo(d)}else ie[0]!="stop"&&ie[0]!="close"||kn(d,7);else d.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?kn(d,7):Xc(d):ie[0]!="noop"&&d.l&&d.l.ta(ie),d.v=0)}}yi(4)}catch{}}var bE=class{constructor(a,l){this.g=a,this.map=l}};function bp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Pp(a){return a.h?1:a.g?a.g.size:0}function Qc(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Jc(a,l){a.g?a.g.add(l):a.h=l}function Dp(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}bp.prototype.cancel=function(){if(this.i=Np(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Np(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let d of a.g.values())l=l.concat(d.D);return l}return D(a.i)}function CE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],d=a.length,p=0;p<d;p++)l.push(a[p]);return l}l=[],d=0;for(p in a)l[d++]=a[p];return l}function PE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var d=0;d<a;d++)l.push(d);return l}l=[],d=0;for(let p in a)l[d++]=p;return l}}}function Op(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var d=PE(a),p=CE(a),A=p.length,C=0;C<A;C++)l.call(void 0,p[C],d&&d[C],a)}var kp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DE(a,l){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),A=null;if(0<=p){var C=a[d].substring(0,p);A=a[d].substring(p+1)}else C=a[d];l(C,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function On(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof On){this.h=a.h,mo(this,a.j),this.o=a.o,this.g=a.g,go(this,a.s),this.l=a.l;var l=a.i,d=new Ai;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),xp(this,d),this.m=a.m}else a&&(l=String(a).match(kp))?(this.h=!1,mo(this,l[1]||"",!0),this.o=wi(l[2]||""),this.g=wi(l[3]||"",!0),go(this,l[4]),this.l=wi(l[5]||"",!0),xp(this,l[6]||"",!0),this.m=wi(l[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}On.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Ti(l,Lp,!0),":");var d=this.g;return(d||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ti(l,Lp,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ti(d,d.charAt(0)=="/"?kE:OE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ti(d,LE)),a.join("")};function Ut(a){return new On(a)}function mo(a,l,d){a.j=d?wi(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function go(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function xp(a,l,d){l instanceof Ai?(a.i=l,ME(a.i,a.h)):(d||(l=Ti(l,xE)),a.i=new Ai(l,a.h))}function ue(a,l,d){a.i.set(l,d)}function _o(a){return ue(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function wi(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ti(a,l,d){return typeof a=="string"?(a=encodeURI(a).replace(l,NE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function NE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Lp=/[#\/\?@]/g,OE=/[#\?:]/g,kE=/[#\?]/g,xE=/[#\?@]/g,LE=/#/g;function Ai(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function nn(a){a.g||(a.g=new Map,a.h=0,a.i&&DE(a.i,function(l,d){a.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=Ai.prototype,n.add=function(a,l){nn(this),this.i=null,a=hr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(l),this.h+=1,this};function Mp(a,l){nn(a),l=hr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Vp(a,l){return nn(a),l=hr(a,l),a.g.has(l)}n.forEach=function(a,l){nn(this),this.g.forEach(function(d,p){d.forEach(function(A){a.call(l,A,p,this)},this)},this)},n.na=function(){nn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let p=0;p<l.length;p++){let A=a[p];for(let C=0;C<A.length;C++)d.push(l[p])}return d},n.V=function(a){nn(this);let l=[];if(typeof a=="string")Vp(this,a)&&(l=l.concat(this.g.get(hr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)l=l.concat(a[d])}return l},n.set=function(a,l){return nn(this),this.i=null,a=hr(this,a),Vp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Up(a,l,d){Mp(a,l),0<d.length&&(a.i=null,a.g.set(hr(a,l),D(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var p=l[d];let C=encodeURIComponent(String(p)),k=this.V(p);for(p=0;p<k.length;p++){var A=C;k[p]!==""&&(A+="="+encodeURIComponent(String(k[p]))),a.push(A)}}return this.i=a.join("&")};function hr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function ME(a,l){l&&!a.j&&(nn(a),a.i=null,a.g.forEach(function(d,p){var A=p.toLowerCase();p!=A&&(Mp(this,p),Up(this,A,d))},a)),a.j=l}function VE(a,l){let d=new Ii;if(c.Image){let p=new Image;p.onload=R(rn,d,"TestLoadImage: loaded",!0,l,p),p.onerror=R(rn,d,"TestLoadImage: error",!1,l,p),p.onabort=R(rn,d,"TestLoadImage: abort",!1,l,p),p.ontimeout=R(rn,d,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function UE(a,l){let d=new Ii,p=new AbortController,A=setTimeout(()=>{p.abort(),rn(d,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(A),C.ok?rn(d,"TestPingServer: ok",!0,l):rn(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(A),rn(d,"TestPingServer: error",!1,l)})}function rn(a,l,d,p,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),p(d)}catch{}}function FE(){this.g=new EE}function BE(a,l,d){let p=d||"";try{Op(a,function(A,C){let k=A;h(A)&&(k=Bc(A)),l.push(p+C+"="+encodeURIComponent(k))})}catch(A){throw l.push(p+"type="+encodeURIComponent("_badmap")),A}}function Ri(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Ri,jc),Ri.prototype.g=function(){return new yo(this.l,this.j)},Ri.prototype.i=function(a){return function(){return a}}({});function yo(a,l){Me.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(yo,Me),n=yo.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,bi(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Si(this):bi(this),this.readyState==3&&Fp(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Si(this))},n.Qa=function(a){this.g&&(this.response=a,Si(this))},n.ga=function(){this.g&&Si(this)};function Si(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bi(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=l.next();return a.join(`\r
`)};function bi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Bp(a){let l="";return H(a,function(d,p){l+=p,l+=":",l+=d,l+=`\r
`}),l}function Yc(a,l,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Bp(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):ue(a,l,d))}function me(a){Me.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(me,Me);var jE=/^https?$/i,qE=["POST","PUT"];n=me.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zc.g(),this.v=this.o?mp(this.o):mp(zc),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){jp(this,C);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var A in p)d.set(A,p[A]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())d.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(C=>C.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(qE,l,void 0))||p||A||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,k]of d)this.g.setRequestHeader(C,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zp(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){jp(this,C)}};function jp(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,qp(a),vo(a)}function qp(a){a.A||(a.A=!0,$e(a,"complete"),$e(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,$e(this,"complete"),$e(this,"abort"),vo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$p(this):this.bb())},n.bb=function(){$p(this)};function $p(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ft(a)!=4||a.Z()!=2)){if(a.u&&Ft(a)==4)hp(a.Ea,0,a);else if($e(a,"readystatechange"),Ft(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var p;if(p=k===0){var A=String(a.D).match(kp)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),p=!jE.test(A?A.toLowerCase():"")}d=p}if(d)$e(a,"complete"),$e(a,"success");else{a.m=6;try{var C=2<Ft(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",qp(a)}}finally{vo(a)}}}}function vo(a,l){if(a.g){zp(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||$e(a,"ready");try{d.onreadystatechange=p}catch{}}}function zp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Ft(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Ft(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),IE(l)}};function Gp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function $E(a){let l={};a=(a.g&&2<=Ft(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(B(a[p]))continue;var d=T(a[p]);let A=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let C=l[A]||[];l[A]=C,C.push(d)}w(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(a,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||l}function Wp(a){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,a),this.cb=Ci("retryDelaySeedMs",1e4,a),this.Wa=Ci("forwardChannelMaxRetries",2,a),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new bp(a&&a.concurrentRequestLimit),this.Da=new FE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Wp.prototype,n.la=8,n.G=1,n.connect=function(a,l,d,p){ze(0),this.W=a,this.H=l||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=tm(this,null,this.W),Eo(this)};function Xc(a){if(Hp(a),a.G==3){var l=a.U++,d=Ut(a.I);if(ue(d,"SID",a.K),ue(d,"RID",l),ue(d,"TYPE","terminate"),Pi(a,d),l=new tn(a,a.j,l),l.L=2,l.v=_o(Ut(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=l.v,d=!0),d||(l.g=nm(l.j,null),l.g.ea(l.v)),l.F=Date.now(),po(l)}em(a)}function Io(a){a.g&&(eu(a),a.g.cancel(),a.g=null)}function Hp(a){Io(a),a.u&&(c.clearTimeout(a.u),a.u=null),wo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Eo(a){if(!Cp(a.h)&&!a.s){a.s=!0;var l=a.Ga;di||sp(),fi||(di(),fi=!0),Nc.add(l,a),a.B=0}}function zE(a,l){return Pp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vi(_(a.Ga,a,l),Zp(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new tn(this,this.j,a),C=this.o;if(this.S&&(C?(C=g(C),E(C,this.S)):C=this.S),this.m!==null||this.O||(A.H=C,C=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=Qp(this,A,l),d=Ut(this.I),ue(d,"RID",a),ue(d,"CVER",22),this.D&&ue(d,"X-HTTP-Session-Id",this.D),Pi(this,d),C&&(this.O?l="headers="+encodeURIComponent(String(Bp(C)))+"&"+l:this.m&&Yc(d,this.m,C)),Jc(this.h,A),this.Ua&&ue(d,"TYPE","init"),this.P?(ue(d,"$req",l),ue(d,"SID","null"),A.T=!0,Wc(A,d,null)):Wc(A,d,l),this.G=2}}else this.G==3&&(a?Kp(this,a):this.i.length==0||Cp(this.h)||Kp(this))};function Kp(a,l){var d;l?d=l.l:d=a.U++;let p=Ut(a.I);ue(p,"SID",a.K),ue(p,"RID",d),ue(p,"AID",a.T),Pi(a,p),a.m&&a.o&&Yc(p,a.m,a.o),d=new tn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Qp(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Jc(a.h,d),Wc(d,p,l)}function Pi(a,l){a.H&&H(a.H,function(d,p){ue(l,p,d)}),a.l&&Op({},function(d,p){ue(l,p,d)})}function Qp(a,l,d){d=Math.min(a.i.length,d);var p=a.l?_(a.l.Na,a.l,a):null;e:{var A=a.i;let C=-1;for(;;){let k=["count="+d];C==-1?0<d?(C=A[0].g,k.push("ofs="+C)):C=0:k.push("ofs="+C);let ce=!0;for(let Pe=0;Pe<d;Pe++){let ie=A[Pe].g,Ve=A[Pe].map;if(ie-=C,0>ie)C=Math.max(0,A[Pe].g-100),ce=!1;else try{BE(Ve,k,"req"+ie+"_")}catch{p&&p(Ve)}}if(ce){p=k.join("&");break e}}}return a=a.i.splice(0,d),l.D=a,p}function Jp(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;di||sp(),fi||(di(),fi=!0),Nc.add(l,a),a.v=0}}function Zc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vi(_(a.Fa,a),Zp(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vi(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),Io(this),Yp(this))};function eu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Yp(a){a.g=new tn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Ut(a.qa);ue(l,"RID","rpc"),ue(l,"SID",a.K),ue(l,"AID",a.T),ue(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&ue(l,"TO",a.ja),ue(l,"TYPE","xmlhttp"),Pi(a,l),a.m&&a.o&&Yc(l,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=_o(Ut(l)),d.m=null,d.P=!0,Ap(d,a)}n.Za=function(){this.C!=null&&(this.C=null,Io(this),Zc(this),ze(19))};function wo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Xp(a,l){var d=null;if(a.g==l){wo(a),eu(a),a.g=null;var p=2}else if(Qc(a.h,l))d=l.D,Dp(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var A=a.B;p=lo(),$e(p,new Ip(p,d)),Eo(a)}else Jp(a);else if(A=l.s,A==3||A==0&&0<l.X||!(p==1&&zE(a,l)||p==2&&Zc(a)))switch(d&&0<d.length&&(l=a.h,l.i=l.i.concat(d)),A){case 1:kn(a,5);break;case 4:kn(a,10);break;case 3:kn(a,6);break;default:kn(a,2)}}}function Zp(a,l){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*l}function kn(a,l){if(a.j.info("Error code "+l),l==2){var d=_(a.fb,a),p=a.Xa;let A=!p;p=new On(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mo(p,"https"),_o(p),A?VE(p.toString(),d):UE(p.toString(),d)}else ze(2);a.G=0,a.l&&a.l.sa(l),em(a),Hp(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function em(a){if(a.G=0,a.ka=[],a.l){let l=Np(a.h);(l.length!=0||a.i.length!=0)&&(b(a.ka,l),b(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function tm(a,l,d){var p=d instanceof On?Ut(d):new On(d);if(p.g!="")l&&(p.g=l+"."+p.g),go(p,p.s);else{var A=c.location;p=A.protocol,l=l?l+"."+A.hostname:A.hostname,A=+A.port;var C=new On(null);p&&mo(C,p),l&&(C.g=l),A&&go(C,A),d&&(C.l=d),p=C}return d=a.D,l=a.ya,d&&l&&ue(p,d,l),ue(p,"VER",a.la),Pi(a,p),p}function nm(a,l,d){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new me(new Ri({eb:d})):new me(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rm(){}n=rm.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function To(){}To.prototype.g=function(a,l){return new Ye(a,l)};function Ye(a,l){Me.call(this),this.g=new Wp(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!B(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!B(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new dr(this)}P(Ye,Me),Ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ye.prototype.close=function(){Xc(this.g)},Ye.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Bc(a),a=d);l.i.push(new bE(l.Ya++,a)),l.G==3&&Eo(l)},Ye.prototype.N=function(){this.g.l=null,delete this.j,Xc(this.g),delete this.g,Ye.aa.N.call(this)};function im(a){qc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let d in l){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}P(im,qc);function sm(){$c.call(this),this.status=1}P(sm,$c);function dr(a){this.g=a}P(dr,rm),dr.prototype.ua=function(){$e(this.g,"a")},dr.prototype.ta=function(a){$e(this.g,new im(a))},dr.prototype.sa=function(a){$e(this.g,new sm)},dr.prototype.ra=function(){$e(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,Ye.prototype.send=Ye.prototype.o,Ye.prototype.open=Ye.prototype.m,Ye.prototype.close=Ye.prototype.close,kh=Qt.createWebChannelTransport=function(){return new To},Oh=Qt.getStatEventTarget=function(){return lo()},Nh=Qt.Event=Dn,La=Qt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,Rs=Qt.ErrorCode=ho,Ep.COMPLETE="complete",Dh=Qt.EventType=Ep,gp.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Ur=Qt.WebChannel=gp,$0=Qt.FetchXmlHttpFactory=Ri,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,Ph=Qt.XhrIo=me}).apply(typeof xa<"u"?xa:typeof self<"u"?self:typeof window<"u"?window:{});var qy="@firebase/firestore";var Ce=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");var ii="10.14.0";var Zn=new gn("@firebase/firestore");function Ss(){return Zn.logLevel}function U(n,...e){if(Zn.logLevel<=X.DEBUG){let t=e.map(gf);Zn.debug(`Firestore (${ii}): ${n}`,...t)}}function Yt(n,...e){if(Zn.logLevel<=X.ERROR){let t=e.map(gf);Zn.error(`Firestore (${ii}): ${n}`,...t)}}function Gr(n,...e){if(Zn.logLevel<=X.WARN){let t=e.map(gf);Zn.warn(`Firestore (${ii}): ${n}`,...t)}}function gf(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${ii}) INTERNAL ASSERTION FAILED: `+n;throw Yt(e),new Error(e)}function ae(n,e){n||z()}function W(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ge{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ba=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ce.UNAUTHENTICATED))}shutdown(){}},Fh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Bh=class{constructor(e){this.t=e,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ae(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new Ba(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new Ce(e)}},jh=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},qh=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$h=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ae(this.o===void 0);let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ae(typeof t.token=="string"),this.R=t.token,new $h(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function z0(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ja=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=z0(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function Wr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ke=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ke(0,0))}static max(){return new n(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var qa=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},fe=class n extends qa{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},G0=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class n extends qa{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return G0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(fe.fromString(e))}static fromName(e){return new n(fe.fromString(e).popFirst(5))}static empty(){return new n(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new fe(e.slice()))}};var Gh=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Gh.UNKNOWN_ID=-1;function W0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new ke(t+1,0):new ke(t,r));return new er(i,q.empty(),e)}function H0(n){return new er(n.readTime,n.key,-1)}var er=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),q.empty(),-1)}static max(){return new n(K.max(),q.empty(),-1)}};function K0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var Q0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ks(n){return I(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==Q0)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let h=u;t(e[h]).next(f=>{o[h]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function J0(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qs(n){return n.name==="IndexedDbTransactionError"}var Tv=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function yc(n){return n==null}function Os(n){return n===0&&1/n==-1/0}function Y0(n){return typeof n=="number"&&Number.isInteger(n)&&!Os(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var X0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ax=[...X0,"documentOverlays"],Z0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eC=Z0,tC=[...eC,"indexConfiguration","indexState","indexEntries"];var Rx=[...tC,"globals"];function $y(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ar(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Av(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _e=class n{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qr(this.root,e,this.comparator,!1)}getReverseIterator(){return new qr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qr(this.root,e,this.comparator,!0)}},qr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class n{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $a(this.data.getIterator())}getIteratorFrom(e){return new $a(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$a=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ut=class n{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new n([])}unionWith(e){let t=new je(st.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var za=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new za("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var nC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xt(n){if(ae(!!n),typeof n=="string"){let e=0,t=nC.exec(n);if(ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:de(n.seconds),nanos:de(n.nanos)}}function de(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sn(n){return typeof n=="string"?qe.fromBase64String(n):qe.fromUint8Array(n)}function _f(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function yf(n){let e=n.mapValue.fields.__previous_value__;return _f(e)?yf(e):e}function ks(n){let e=Xt(n.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}var Hh=class{constructor(e,t,r,i,s,o,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}},Ga=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function tr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_f(n)?4:Sv(n)?9007199254740991:Rv(n)?10:11:z()}function kt(n,e){if(n===e)return!0;let t=tr(n);if(t!==tr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ks(n).isEqual(ks(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Xt(i.timestampValue),c=Xt(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Sn(i.bytesValue).isEqual(Sn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return de(i.geoPointValue.latitude)===de(s.geoPointValue.latitude)&&de(i.geoPointValue.longitude)===de(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return de(i.integerValue)===de(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=de(i.doubleValue),c=de(s.doubleValue);return o===c?Os(o)===Os(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Wr(n.arrayValue.values||[],e.arrayValue.values||[],kt);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if($y(o)!==$y(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!kt(o[u],c[u])))return!1;return!0}(n,e);default:return z()}}function xs(n,e){return(n.values||[]).find(t=>kt(t,e))!==void 0}function Hr(n,e){if(n===e)return 0;let t=tr(n),r=tr(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=de(s.integerValue||s.doubleValue),u=de(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return zy(n.timestampValue,e.timestampValue);case 4:return zy(ks(n),ks(e));case 5:return se(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Sn(s),u=Sn(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){let f=se(c[h],u[h]);if(f!==0)return f}return se(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=se(de(s.latitude),de(o.latitude));return c!==0?c:se(de(s.longitude),de(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Gy(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,h,f;let m=s.fields||{},_=o.fields||{},R=(c=m.value)===null||c===void 0?void 0:c.arrayValue,P=(u=_.value)===null||u===void 0?void 0:u.arrayValue,D=se(((h=R?.values)===null||h===void 0?void 0:h.length)||0,((f=P?.values)===null||f===void 0?void 0:f.length)||0);return D!==0?D:Gy(R,P)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ma.mapValue&&o===Ma.mapValue)return 0;if(s===Ma.mapValue)return 1;if(o===Ma.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){let _=se(u[m],f[m]);if(_!==0)return _;let R=Hr(c[u[m]],h[f[m]]);if(R!==0)return R}return se(u.length,f.length)}(n.mapValue,e.mapValue);default:throw z()}}function zy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=Xt(n),r=Xt(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function Gy(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Hr(t[i],r[i]);if(s)return s}return se(t.length,r.length)}function Kr(n){return Kh(n)}function Kh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Xt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Sn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Kh(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Kh(t.fields[o])}`;return i+"}"}(n.mapValue):z()}function Wy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qh(n){return!!n&&"integerValue"in n}function vf(n){return!!n&&"arrayValue"in n}function Hy(n){return!!n&&"nullValue"in n}function Ky(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ua(n){return!!n&&"mapValue"in n}function Rv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Cs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ar(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var it=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ua(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cs(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Cs(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ua(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ua(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ar(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Cs(this.value))}};function bv(n){let e=[];return ar(n.fields,(t,r)=>{let i=new st([t]);if(Ua(r)){let s=bv(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ut(e)}var _t=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),it.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),it.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),it.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Qy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),t.key):r=Hr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Jy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kt(n.position[t],e.position[t]))return!1;return!0}var Jr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Wa=class{},Re=class n extends Wa{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Yh(e,t,r):t==="array-contains"?new ed(e,r):t==="in"?new td(e,r):t==="not-in"?new nd(e,r):t==="array-contains-any"?new rd(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Xh(e,r):new Zh(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Hr(t,this.value)):t!==null&&tr(this.value)===tr(t)&&this.matchesComparison(Hr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yt=class n extends Wa{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Cv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Cv(n){return n.op==="and"}function Pv(n){return iC(n)&&Cv(n)}function iC(n){for(let e of n.filters)if(e instanceof yt)return!1;return!0}function Jh(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+Kr(n.value);if(Pv(n))return n.filters.map(e=>Jh(e)).join(",");{let e=n.filters.map(t=>Jh(t)).join(",");return`${n.op}(${e})`}}function Dv(n,e){return n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&kt(r.value,i.value)}(n,e):n instanceof yt?function(r,i){return i instanceof yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&Dv(o,i.filters[c]),!0):!1}(n,e):void z()}function Nv(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${Kr(t.value)}`}(n):n instanceof yt?function(t){return t.op.toString()+" {"+t.getFilters().map(Nv).join(" ,")+"}"}(n):"Filter"}var Yh=class extends Re{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},Xh=class extends Re{constructor(e,t){super(e,"in",t),this.keys=Ov("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Zh=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=Ov("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Ov(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var ed=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vf(t)&&xs(t.arrayValue,this.value)}},td=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xs(this.value.arrayValue,t)}},nd=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!xs(this.value.arrayValue,t)}},rd=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xs(this.value.arrayValue,r))}};var id=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Yy(n,e=null,t=[],r=[],i=null,s=null,o=null){return new id(n,e,t,r,i,s,o)}function If(n){let e=W(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kr(r)).join(",")),e.ue=t}return e.ue}function Ef(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Dv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jy(n.startAt,e.startAt)&&Jy(n.endAt,e.endAt)}function sd(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var nr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sC(n,e,t,r,i,s,o,c){return new nr(n,e,t,r,i,s,o,c)}function vc(n){return new nr(n)}function Xy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kv(n){return n.collectionGroup!==null}function Ps(n){let e=W(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new je(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Jr(s,r))}),t.has(st.keyField().canonicalString())||e.ce.push(new Jr(st.keyField(),r))}return e.ce}function Nt(n){let e=W(n);return e.le||(e.le=oC(e,Ps(n))),e.le}function oC(n,e){if(n.limitType==="F")return Yy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Jr(i.field,s)});let t=n.endAt?new Qr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qr(n.startAt.position,n.startAt.inclusive):null;return Yy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function od(n,e){let t=n.filters.concat([e]);return new nr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ad(n,e,t){return new nr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ic(n,e){return Ef(Nt(n),Nt(e))&&n.limitType===e.limitType}function xv(n){return`${If(Nt(n))}|lt:${n.limitType}`}function Fr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Nv(i)).join(", ")}]`),yc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Kr(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Kr(i)).join(",")),`Target(${r})`}(Nt(n))}; limitType=${n.limitType})`}function Ec(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ps(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let h=Qy(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,Ps(r),i)||r.endAt&&!function(o,c,u){let h=Qy(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,Ps(r),i))}(n,e)}function aC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Lv(n){return(e,t)=>{let r=!1;for(let i of Ps(n)){let s=cC(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cC(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),h=c.data.field(s);return u!==null&&h!==null?Hr(u,h):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var bn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ar(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Av(this.inner)}size(){return this.innerSize}};var uC=new _e(q.comparator);function Zt(){return uC}var Mv=new _e(q.comparator);function bs(...n){let e=Mv;for(let t of n)e=e.insert(t.key,t);return e}function Vv(n){let e=Mv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jn(){return Ds()}function Uv(){return Ds()}function Ds(){return new bn(n=>n.toString(),(n,e)=>n.isEqual(e))}var lC=new _e(q.comparator),hC=new je(q.comparator);function Z(...n){let e=hC;for(let t of n)e=e.add(t);return e}var dC=new je(se);function fC(){return dC}function wf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Os(e)?"-0":e}}function Fv(n){return{integerValue:""+n}}function pC(n,e){return Y0(e)?Fv(e):wf(n,e)}var Yr=class{constructor(){this._=void 0}};function mC(n,e,t){return n instanceof Xr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_f(s)&&(s=yf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof rr?jv(n,e):n instanceof ir?qv(n,e):function(i,s){let o=Bv(i,s),c=Zy(o)+Zy(i.Pe);return Qh(o)&&Qh(i.Pe)?Fv(c):wf(i.serializer,c)}(n,e)}function gC(n,e,t){return n instanceof rr?jv(n,e):n instanceof ir?qv(n,e):t}function Bv(n,e){return n instanceof Zr?function(r){return Qh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Xr=class extends Yr{},rr=class extends Yr{constructor(e){super(),this.elements=e}};function jv(n,e){let t=$v(e);for(let r of n.elements)t.some(i=>kt(i,r))||t.push(r);return{arrayValue:{values:t}}}var ir=class extends Yr{constructor(e){super(),this.elements=e}};function qv(n,e){let t=$v(e);for(let r of n.elements)t=t.filter(i=>!kt(i,r));return{arrayValue:{values:t}}}var Zr=class extends Yr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Zy(n){return de(n.integerValue||n.doubleValue)}function $v(n){return vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _C(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof rr&&i instanceof rr||r instanceof ir&&i instanceof ir?Wr(r.elements,i.elements,kt):r instanceof Zr&&i instanceof Zr?kt(r.Pe,i.Pe):r instanceof Xr&&i instanceof Xr}(n.transform,e.transform)}var cd=class{constructor(e,t){this.version=e,this.transformResults=t}},Jt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fa(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ei=class{};function zv(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ls(n.key,Jt.none()):new sr(n.key,n.data,Jt.none());{let t=n.data,r=it.empty(),i=new je(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xt(n.key,r,new ut(i.toArray()),Jt.none())}}function yC(n,e,t){n instanceof sr?function(i,s,o){let c=i.value.clone(),u=tv(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof xt?function(i,s,o){if(!Fa(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=tv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Gv(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ns(n,e,t,r){return n instanceof sr?function(s,o,c,u){if(!Fa(s.precondition,o))return c;let h=s.value.clone(),f=nv(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof xt?function(s,o,c,u){if(!Fa(s.precondition,o))return c;let h=nv(s.fieldTransforms,u,o),f=o.data;return f.setAll(Gv(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(s,o,c){return Fa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function vC(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Bv(r.transform,i||null);s!=null&&(t===null&&(t=it.empty()),t.set(r.field,s))}return t||null}function ev(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wr(r,i,(s,o)=>_C(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var sr=class extends ei{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xt=class extends ei{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Gv(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function tv(n,e,t){let r=new Map;ae(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,gC(o,c,t[i]))}return r}function nv(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,mC(s,o,e))}return r}var Ls=class extends ei{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ud=class extends ei{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ld=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&yC(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ns(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ns(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Uv();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=zv(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&Wr(this.mutations,e.mutations,(t,r)=>ev(t,r))&&Wr(this.baseMutations,e.baseMutations,(t,r)=>ev(t,r))}},hd=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ae(e.mutations.length===r.length);let i=function(){return lC}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var dd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fd=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Te,te;function IC(n){switch(n){default:return z();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function Wv(n){if(n===void 0)return Yt("GRPC error has no .code"),N.UNKNOWN;switch(n){case Te.OK:return N.OK;case Te.CANCELLED:return N.CANCELLED;case Te.UNKNOWN:return N.UNKNOWN;case Te.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Te.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Te.INTERNAL:return N.INTERNAL;case Te.UNAVAILABLE:return N.UNAVAILABLE;case Te.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Te.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Te.NOT_FOUND:return N.NOT_FOUND;case Te.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Te.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Te.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Te.ABORTED:return N.ABORTED;case Te.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Te.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Te.DATA_LOSS:return N.DATA_LOSS;default:return z()}}(te=Te||(Te={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var rv=null;function EC(){return new TextEncoder}var wC=new An([4294967295,4294967295],0);function iv(n){let e=EC().encode(n),t=new Ch;return t.update(e),new Uint8Array(t.digest())}function sv(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new An([t,r],0),new An([i,s],0)]}var pd=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yn(`Invalid padding: ${t}`);if(r<0)throw new Yn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yn(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=An.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(An.fromNumber(r)));return i.compare(wC)===1&&(i=new An([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=iv(e),[r,i]=sv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=iv(e),[r,i]=sv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Yn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ha=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ms.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new _e(se),Zt(),Z())}},Ms=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Z(),Z(),Z())}};var $r=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ka=class{constructor(e,t){this.targetId=e,this.me=t}},Qa=class{constructor(e,t,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ja=class{constructor(){this.fe=0,this.ge=av(),this.pe=qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Z(),t=Z(),r=Z();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Ms(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=av()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},md=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zt(),this.qe=ov(),this.Qe=new _e(se)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(sd(s))if(r===0){let o=new q(s.path);this.Ue(t,o,_t.newNoDocument(o,K.min()))}else ae(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}rv?.et(function(f,m,_,R,P){var D,b,M,B,x,j;let re={localCacheCount:f,existenceFilterCount:m.count,databaseId:_.database,projectId:_.projectId},H=m.unchangedNames;return H&&(re.bloomFilter={applied:P===0,hashCount:(D=H?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(B=(M=(b=H?.bits)===null||b===void 0?void 0:b.bitmap)===null||M===void 0?void 0:M.length)!==null&&B!==void 0?B:0,padding:(j=(x=H?.bits)===null||x===void 0?void 0:x.padding)!==null&&j!==void 0?j:0,mightContain:w=>{var g;return(g=R?.mightContain(w))!==null&&g!==void 0&&g}}),re}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=Sn(r).toUint8Array()}catch(u){if(u instanceof za)return Gr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new pd(o,i,s)}catch(u){return Gr(u instanceof Yn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&sd(c.target)){let u=new q(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,_t.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Z();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ha(e,t,this.Qe,this.ke,r);return this.ke=Zt(),this.qe=ov(),this.Qe=new _e(se),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ja,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new je(se),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ja),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function ov(){return new _e(q.comparator)}function av(){return new _e(q.comparator)}var TC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RC={and:"AND",or:"OR"},gd=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _d(n,e){return n.useProto3Json||yc(e)?e:{value:e}}function Ya(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SC(n,e){return Ya(n,e.toTimestamp())}function Ot(n){return ae(!!n),K.fromTimestamp(function(t){let r=Xt(t);return new ke(r.seconds,r.nanos)}(n))}function Tf(n,e){return yd(n,e).canonicalString()}function yd(n,e){let t=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Kv(n){let e=fe.fromString(n);return ae(Zv(e)),e}function vd(n,e){return Tf(n.databaseId,e.path)}function xh(n,e){let t=Kv(e);if(t.get(1)!==n.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(Jv(t))}function Qv(n,e){return Tf(n.databaseId,e)}function bC(n){let e=Kv(n);return e.length===4?fe.emptyPath():Jv(e)}function Id(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jv(n){return ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function cv(n,e,t){return{name:vd(n,e),fields:t.value.mapValue.fields}}function CC(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(ae(f===void 0||typeof f=="string"),qe.fromBase64String(f||"")):(ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array),qe.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?N.UNKNOWN:Wv(h.code);return new L(f,h.message||"")}(o);t=new Qa(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xh(n,r.document.name),s=Ot(r.document.updateTime),o=r.document.createTime?Ot(r.document.createTime):K.min(),c=new it({mapValue:{fields:r.document.fields}}),u=_t.newFoundDocument(i,s,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];t=new $r(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xh(n,r.document),s=r.readTime?Ot(r.readTime):K.min(),o=_t.newNoDocument(i,s),c=r.removedTargetIds||[];t=new $r([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xh(n,r.document),s=r.removedTargetIds||[];t=new $r([],s,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new fd(i,s),c=r.targetId;t=new Ka(c,o)}}return t}function PC(n,e){let t;if(e instanceof sr)t={update:cv(n,e.key,e.value)};else if(e instanceof Ls)t={delete:vd(n,e.key)};else if(e instanceof xt)t={update:cv(n,e.key,e.data),updateMask:UC(e.fieldMask)};else{if(!(e instanceof ud))return z();t={verify:vd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Xr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof rr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ir)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:SC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(n,e.precondition)),t}function DC(n,e){return n&&n.length>0?(ae(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Ot(i.updateTime):Ot(s);return o.isEqual(K.min())&&(o=Ot(s)),new cd(o,i.transformResults||[])}(t,e))):[]}function NC(n,e){return{documents:[Qv(n,e.path)]}}function OC(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Qv(n,i);let s=function(h){if(h.length!==0)return Xv(yt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:Br(_.field),direction:LC(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=_d(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:i}}function kC(n){let e=bC(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ae(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){let _=Yv(m);return _ instanceof yt&&Pv(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(_=>function(P){return new Jr(jr(P.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(m){let _;return _=typeof m=="object"?m.value:m,yc(_)?null:_}(t.limit));let u=null;t.startAt&&(u=function(m){let _=!!m.before,R=m.values||[];return new Qr(R,_)}(t.startAt));let h=null;return t.endAt&&(h=function(m){let _=!m.before,R=m.values||[];return new Qr(R,_)}(t.endAt)),sC(e,i,o,s,c,"F",u,h)}function xC(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Yv(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=jr(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=jr(t.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=jr(t.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=jr(t.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(jr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yt.create(t.compositeFilter.filters.map(r=>Yv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function LC(n){return TC[n]}function MC(n){return AC[n]}function VC(n){return RC[n]}function Br(n){return{fieldPath:n.canonicalString()}}function jr(n){return st.fromServerFormat(n.fieldPath)}function Xv(n){return n instanceof Re?function(t){if(t.op==="=="){if(Ky(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ky(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NOT_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Br(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(t.field),op:MC(t.op),value:t.value}}}(n):n instanceof yt?function(t){let r=t.getFilters().map(i=>Xv(i));return r.length===1?r[0]:{compositeFilter:{op:VC(t.op),filters:r}}}(n):z()}function UC(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zv(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Vs=class n{constructor(e,t,r,i,s=K.min(),o=K.min(),c=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ed=class{constructor(e){this.ct=e}};function FC(n){let e=kC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ad(e,e.limit,"L"):e}var Xa=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(de(e.integerValue));else if("doubleValue"in e){let r=de(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Os(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Xt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Sn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Sv(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Rv(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(de(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Xa.vt=new Xa;var wd=class{constructor(){this.un=new Td}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(er.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(er.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Td=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(fe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(fe.comparator)).toArray()}};var bx=new Uint8Array(0);var Pt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(41943040,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);var Us=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Ad=class{constructor(){this.changes=new bn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Rd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ns(r.mutation,i,ut.empty(),ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Z()){let i=Jn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=bs();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Jn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Z()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Zt(),o=Ds(),c=function(){return Ds()}();return t.forEach((u,h)=>{let f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof xt)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Ns(f.mutation,h,f.mutation.getFieldMask(),ke.now())):o.set(h.key,ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var m;return c.set(h,new Rd(f,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Ds(),i=new _e((o,c)=>o-c),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let h=t.get(u);if(h===null)return;let f=r.get(u)||ut.empty();f=c.applyToLocalView(h,f),r.set(u,f);let m=(i.get(c.batchId)||Z()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),h=u.key,f=u.value,m=Uv();f.forEach(_=>{if(!s.has(_)){let R=zv(t.get(_),r.get(_));R!==null&&m.set(_,R),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Jn()),c=-1,u=s;return o.next(h=>O.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Z())).next(f=>({batchId:c,changes:Vv(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=bs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=bs();return this.indexManager.getCollectionParents(e,s).next(c=>O.forEach(c,u=>{let h=function(m,_){return new nr(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,_t.newInvalidDocument(f)))});let c=bs();return o.forEach((u,h)=>{let f=s.get(u);f!==void 0&&Ns(f.mutation,h,ut.empty(),ke.now()),Ec(t,h)&&(c=c.insert(u,h))}),c})}};var bd=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ot(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:FC(i.bundledQuery),readTime:Ot(i.readTime)}}(t)),O.resolve()}};var Cd=class{constructor(){this.overlays=new _e(q.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Jn();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Jn(),s=t.length+1,o=new q(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new _e((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Jn(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=Jn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=i)););return O.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dd(t,r));let s=this.Ir.get(t);s===void 0&&(s=Z(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Pd=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Fs=class{constructor(){this.Tr=new je(Ae.Er),this.dr=new je(Ae.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ae(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ae(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new fe([])),r=new Ae(t,e),i=new Ae(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new fe([])),r=new Ae(t,e),i=new Ae(t,e+1),s=Z();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ae(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ae=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||se(e.wr,t.wr)}static Ar(e,t){return se(e.wr,t.wr)||q.comparator(e.key,t.key)}};var Dd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new je(Ae.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ld(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Ae(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ae(t,0),i=new Ae(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(se);return t.forEach(i=>{let s=new Ae(i,0),o=new Ae(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new Ae(new q(s),0),c=new je(se);return this.br.forEachWhile(u=>{let h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)},o),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let s=new Ae(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ae(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Nd=class{constructor(e){this.Mr=e,this.docs=function(){return new _e(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=Zt();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_t.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Zt(),o=t.path,c=new q(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||K0(H0(f),r)<=0||(i.has(f.key)||Ec(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Od(this)}getSize(e){return O.resolve(this.size)}},Od=class extends Ad{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var kd=class{constructor(e){this.persistence=e,this.Nr=new bn(t=>If(t),Ef),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fs,this.targetCount=0,this.kr=Us.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Us(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var xd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Tv(0),this.Kr=!1,this.Kr=!0,this.$r=new Pd,this.referenceDelegate=e(this),this.Ur=new kd(this),this.indexManager=new wd,this.remoteDocumentCache=function(i){return new Nd(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ed(t),this.Gr=new bd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Dd(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new Ld(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Ld=class extends Wh{constructor(e){super(),this.currentSequenceNumber=e}},Md=class n{constructor(e){this.persistence=e,this.Jr=new Fs,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,K.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Vd=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Z(),i=Z();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Ud=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Fd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return k_()?8:J0(be())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Ud;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ss()<=X.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Fr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ss()<=X.DEBUG&&U("QueryEngine","Query:",Fr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ss()<=X.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Fr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nt(t))):O.resolve())}Yi(e,t){if(Xy(t))return O.resolve(null);let r=Nt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ad(t,null,"F"),r=Nt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Z(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let h=this.ts(t,c);return this.ns(t,h,o,u.readTime)?this.Yi(e,ad(t,null,"F")):this.rs(e,h,t,u)}))})))}Zi(e,t,r,i){return Xy(t)||i.isEqual(K.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?O.resolve(null):(Ss()<=X.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fr(t)),this.rs(e,o,t,W0(i,-1)).next(c=>c))})}ts(e,t){let r=new je(Lv(e));return t.forEach((i,s)=>{Ec(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Ss()<=X.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Fr(t)),this.Ji.getDocumentsMatchingQuery(e,t,er.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Bd=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new _e(se),this._s=new bn(s=>If(s),Ef),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function BC(n,e,t,r){return new Bd(n,e,t,r)}function eI(n,e){return I(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=Z();for(let h of i){o.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})})}function jC(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){let m=h.batch,_=m.keys(),R=O.resolve();return _.forEach(P=>{R=R.next(()=>f.getEntry(u,P)).next(D=>{let b=h.docVersions.get(P);ae(b!==null),D.version.compareTo(b)<0&&(m.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Z();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tI(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function qC(n,e){let t=W(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,m)=>{let _=i.get(m);if(!_)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,m)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?R=R.withResumeToken(qe.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(m,R),function(D,b,M){return D.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(_,R,f)&&c.push(t.Ur.updateTargetData(s,R))});let u=Zt(),h=Z();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push($C(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(K.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.os=i,s))}function $C(n,e,t){let r=Z(),i=Z();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Zt();return t.forEach((c,u)=>{let h=s.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):U("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function zC(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GC(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Vs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function jd(n,e,t){return I(this,null,function*(){let r=W(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qs(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function uv(n,e,t){let r=W(n),i=K.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){let m=W(u),_=m._s.get(f);return _!==void 0?O.resolve(m.os.get(_)):m.Ur.getTargetData(h,f)}(r,o,Nt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:K.min(),t?s:Z())).next(c=>(WC(r,aC(e),c),{documents:c,Ts:s})))}function WC(n,e,t){let r=n.us.get(e)||K.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Za=class{constructor(){this.activeTargetIds=fC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qd=class{constructor(){this.so=new Za,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Za,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $d=class{_o(e){}shutdown(){}};var ec=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Va=null;function Lh(){return Va===null?Va=function(){return 268435456+Math.round(2147483648*Math.random())}():Va++,"0x"+Va.toString(16)}var HC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var zd=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Be="WebChannelConnection",Gd=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=Lh(),u=this.xo(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,u,h,i).then(f=>(U("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Gr("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ii}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=HC[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Lh();return new Promise((o,c)=>{let u=new Ph;u.setWithCredentials(!0),u.listenOnce(Dh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rs.NO_ERROR:let f=u.getResponseJson();U(Be,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Rs.TIMEOUT:U(Be,`RPC '${e}' ${s} timed out`),c(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Rs.HTTP_ERROR:let m=u.getStatus();if(U(Be,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let R=_?.error;if(R&&R.status&&R.message){let P=function(b){let M=b.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(M)>=0?M:N.UNKNOWN}(R.status);c(new L(P,R.message))}else c(new L(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(N.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{U(Be,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);U(Be,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}Bo(e,t,r){let i=Lh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kh(),c=Oh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=s.join("");U(Be,`Creating RPC '${e}' stream ${i}: ${f}`,u);let m=o.createWebChannel(f,u),_=!1,R=!1,P=new zd({Io:b=>{R?U(Be,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(_||(U(Be,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),U(Be,`RPC '${e}' stream ${i} sending:`,b),m.send(b))},To:()=>m.close()}),D=(b,M,B)=>{b.listen(M,x=>{try{B(x)}catch(j){setTimeout(()=>{throw j},0)}})};return D(m,Ur.EventType.OPEN,()=>{R||(U(Be,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),D(m,Ur.EventType.CLOSE,()=>{R||(R=!0,U(Be,`RPC '${e}' stream ${i} transport closed`),P.So())}),D(m,Ur.EventType.ERROR,b=>{R||(R=!0,Gr(Be,`RPC '${e}' stream ${i} transport errored:`,b),P.So(new L(N.UNAVAILABLE,"The operation could not be completed")))}),D(m,Ur.EventType.MESSAGE,b=>{var M;if(!R){let B=b.data[0];ae(!!B);let x=B,j=x.error||((M=x[0])===null||M===void 0?void 0:M.error);if(j){U(Be,`RPC '${e}' stream ${i} received error:`,j);let re=j.status,H=function(y){let E=Te[y];if(E!==void 0)return Wv(E)}(re),w=j.message;H===void 0&&(H=N.INTERNAL,w="Unknown error status: "+re+" with message "+j.message),R=!0,P.So(new L(H,w)),m.close()}else U(Be,`RPC '${e}' stream ${i} received:`,B),P.bo(B)}}),D(c,Nh.STAT_EVENT,b=>{b.stat===La.PROXY?U(Be,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===La.NOPROXY&&U(Be,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}};function Mh(){return typeof document<"u"?document:null}function wc(n){return new gd(n,!0)}var tc=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var nc=class{constructor(e,t,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return I(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return I(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return I(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Yt(t.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>I(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Wd=class extends nc{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CC(this.serializer,e),r=function(s){if(!("targetChange"in s))return K.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?Ot(o.readTime):K.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Id(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=sd(u)?{documents:NC(s,u)}:{query:OC(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Hv(s,o.resumeToken);let h=_d(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(K.min())>0){c.readTime=Ya(s,o.snapshotVersion.toTimestamp());let h=_d(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let r=xC(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Id(this.serializer),t.removeTarget=e,this.a_(t)}},Hd=class extends nc{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=DC(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Id(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>PC(this.serializer,r))};this.a_(t)}};var Kd=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,yd(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,yd(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Qd=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yt(t),this.D_=!1):U("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Jd=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>I(this,null,function*(){cr(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(u){return I(this,null,function*(){let h=W(u);h.L_.add(4),yield Js(h),h.q_.set("Unknown"),h.L_.delete(4),yield Tc(h)})}(this))}))}),this.q_=new Qd(r,i)}};function Tc(n){return I(this,null,function*(){if(cr(n))for(let e of n.B_)yield e(!0)})}function Js(n){return I(this,null,function*(){for(let e of n.B_)yield e(!1)})}function nI(n,e){let t=W(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),bf(t)?Sf(t):si(t).r_()&&Rf(t,e))}function Af(n,e){let t=W(n),r=si(t);t.N_.delete(e),r.r_()&&rI(t,e),t.N_.size===0&&(r.r_()?r.o_():cr(t)&&t.q_.set("Unknown"))}function Rf(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}si(n).A_(e)}function rI(n,e){n.Q_.xe(e),si(n).R_(e)}function Sf(n){n.Q_=new md({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),si(n).start(),n.q_.v_()}function bf(n){return cr(n)&&!si(n).n_()&&n.N_.size>0}function cr(n){return W(n).L_.size===0}function iI(n){n.Q_=void 0}function KC(n){return I(this,null,function*(){n.q_.set("Online")})}function QC(n){return I(this,null,function*(){n.N_.forEach((e,t)=>{Rf(n,e)})})}function JC(n,e){return I(this,null,function*(){iI(n),bf(n)?(n.q_.M_(e),Sf(n)):n.q_.set("Unknown")})}function YC(n,e,t){return I(this,null,function*(){if(n.q_.set("Online"),e instanceof Qa&&e.state===2&&e.cause)try{yield function(i,s){return I(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rc(n,r)}else if(e instanceof $r?n.Q_.Ke(e):e instanceof Ka?n.Q_.He(e):n.Q_.We(e),!t.isEqual(K.min()))try{let r=yield tI(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(qe.EMPTY_BYTE_STRING,f.snapshotVersion)),rI(s,u);let m=new Vs(f.target,u,h,f.sequenceNumber);Rf(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield rc(n,r)}})}function rc(n,e,t){return I(this,null,function*(){if(!Qs(e))throw e;n.L_.add(1),yield Js(n),n.q_.set("Offline"),t||(t=()=>tI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Tc(n)}))})}function sI(n,e){return e().catch(t=>rc(n,t,e))}function Ac(n){return I(this,null,function*(){let e=W(n),t=Cn(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XC(e);)try{let i=yield zC(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,ZC(e,i)}catch(i){yield rc(e,i)}oI(e)&&aI(e)})}function XC(n){return cr(n)&&n.O_.length<10}function ZC(n,e){n.O_.push(e);let t=Cn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function oI(n){return cr(n)&&!Cn(n).n_()&&n.O_.length>0}function aI(n){Cn(n).start()}function eP(n){return I(this,null,function*(){Cn(n).p_()})}function tP(n){return I(this,null,function*(){let e=Cn(n);for(let t of n.O_)e.m_(t.mutations)})}function nP(n,e,t){return I(this,null,function*(){let r=n.O_.shift(),i=hd.from(r,e,t);yield sI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ac(n)})}function rP(n,e){return I(this,null,function*(){e&&Cn(n).V_&&(yield function(r,i){return I(this,null,function*(){if(function(o){return IC(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Cn(r).s_(),yield sI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ac(r)}})}(n,e)),oI(n)&&aI(n)})}function lv(n,e){return I(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=cr(t);t.L_.add(3),yield Js(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Tc(t)})}function iP(n,e){return I(this,null,function*(){let t=W(n);e?(t.L_.delete(2),yield Tc(t)):e||(t.L_.add(2),yield Js(t),t.q_.set("Unknown"))})}function si(n){return n.K_||(n.K_=function(t,r,i){let s=W(t);return s.w_(),new Wd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:KC.bind(null,n),Ro:QC.bind(null,n),mo:JC.bind(null,n),d_:YC.bind(null,n)}),n.B_.push(e=>I(this,null,function*(){e?(n.K_.s_(),bf(n)?Sf(n):n.q_.set("Unknown")):(yield n.K_.stop(),iI(n))}))),n.K_}function Cn(n){return n.U_||(n.U_=function(t,r,i){let s=W(t);return s.w_(),new Hd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eP.bind(null,n),mo:rP.bind(null,n),f_:tP.bind(null,n),g_:nP.bind(null,n)}),n.B_.push(e=>I(this,null,function*(){e?(n.U_.s_(),yield Ac(n)):(yield n.U_.stop(),n.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Yd=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Cf(n,e){if(Yt("AsyncQueue",`${e}: ${n}`),Qs(n))return new L(N.UNAVAILABLE,`${e}: ${n}`);throw n}var ic=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=bs(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sc=class{constructor(){this.W_=new _e(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ti=class n{constructor(e,t,r,i,s,o,c,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,ic.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Xd=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Zd=class{constructor(){this.queries=hv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=W(t),s=i.queries;i.queries=hv(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function hv(){return new bn(n=>xv(n),Ic)}function Pf(n,e){return I(this,null,function*(){let t=W(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Xd,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=Cf(o,`Initialization of query '${Fr(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Nf(t)})}function Df(n,e){return I(this,null,function*(){let t=W(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function sP(n,e){let t=W(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Nf(t)}function oP(n,e,t){let r=W(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Nf(n){n.Y_.forEach(e=>{e.next()})}var ef,dv;(dv=ef||(ef={})).ea="default",dv.Cache="cache";var Bs=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ti(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ti.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ef.Cache}};var oc=class{constructor(e){this.key=e}},ac=class{constructor(e){this.key=e}},tf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Z(),this.mutatedKeys=Z(),this.Aa=Lv(e),this.Ra=new ic(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new sc,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{let _=i.get(f),R=Ec(this.query,m)?m:null,P=!!_&&this.mutatedKeys.has(_.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),b=!1;_&&R?_.data.isEqual(R.data)?P!==D&&(r.track({type:3,doc:R}),b=!0):this.ga(_,R)||(r.track({type:2,doc:R}),b=!0,(u&&this.Aa(R,u)>0||h&&this.Aa(R,h)<0)&&(c=!0)):!_&&R?(r.track({type:0,doc:R}),b=!0):_&&!R&&(r.track({type:1,doc:_}),b=!0,(u||h)&&(c=!0)),b&&(R?(o=o.add(R),s=D?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,m)=>function(R,P){let D=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return D(R)-D(P)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new ti(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Z(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ac(r))}),this.da.forEach(r=>{e.has(r)||t.push(new oc(r))}),t}ba(e){this.Ta=e.Ts,this.da=Z();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ti.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},nf=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},rf=class{constructor(e){this.key=e,this.va=!1}},sf=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bn(c=>xv(c),Ic),this.Ma=new Map,this.xa=new Set,this.Oa=new _e(q.comparator),this.Na=new Map,this.La=new Fs,this.Ba={},this.ka=new Map,this.qa=Us.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function aP(n,e,t=!0){return I(this,null,function*(){let r=fI(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield cI(r,e,t,!0),i})}function cP(n,e){return I(this,null,function*(){let t=fI(n);yield cI(t,e,!0,!1)})}function cI(n,e,t,r){return I(this,null,function*(){let i=yield GC(n.localStore,Nt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield uP(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&nI(n.remoteStore,i),c})}function uP(n,e,t,r,i){return I(this,null,function*(){n.Ka=(m,_,R)=>function(D,b,M,B){return I(this,null,function*(){let x=b.view.ma(M);x.ns&&(x=yield uv(D.localStore,b.query,!1).then(({documents:w})=>b.view.ma(w,x)));let j=B&&B.targetChanges.get(b.targetId),re=B&&B.targetMismatches.get(b.targetId)!=null,H=b.view.applyChanges(x,D.isPrimaryClient,j,re);return pv(D,b.targetId,H.wa),H.snapshot})}(n,m,_,R);let s=yield uv(n.localStore,e,!0),o=new tf(e,s.Ts),c=o.ma(s.documents),u=Ms.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(c,n.isPrimaryClient,u);pv(n,t,h.wa);let f=new nf(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function lP(n,e,t){return I(this,null,function*(){let r=W(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ic(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Af(r.remoteStore,i.targetId),of(r,i.targetId)}).catch(Ks))):(of(r,i.targetId),yield jd(r.localStore,i.targetId,!0))})}function hP(n,e){return I(this,null,function*(){let t=W(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Af(t.remoteStore,r.targetId))})}function dP(n,e,t){return I(this,null,function*(){let r=vP(n);try{let i=yield function(o,c){let u=W(o),h=ke.now(),f=c.reduce((R,P)=>R.add(P.key),Z()),m,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=Zt(),D=Z();return u.cs.getEntries(R,f).next(b=>{P=b,P.forEach((M,B)=>{B.isValidDocument()||(D=D.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,P)).next(b=>{m=b;let M=[];for(let B of c){let x=vC(B,m.get(B.key).overlayedDocument);x!=null&&M.push(new xt(B.key,x,bv(x.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,M,c)}).next(b=>{_=b;let M=b.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(R,b.batchId,M)})}).then(()=>({batchId:_.batchId,changes:Vv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new _e(se)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,t),yield Ys(r,i.changes),yield Ac(r.remoteStore)}catch(i){let s=Cf(i,"Failed to persist write");t.reject(s)}})}function uI(n,e){return I(this,null,function*(){let t=W(n);try{let r=yield qC(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ae(o.va):i.removedDocuments.size>0&&(ae(o.va),o.va=!1))}),yield Ys(t,r,e)}catch(r){yield Ks(r)}})}function fv(n,e,t){let r=W(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=W(o);u.onlineState=c;let h=!1;u.queries.forEach((f,m)=>{for(let _ of m.j_)_.Z_(c)&&(h=!0)}),h&&Nf(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fP(n,e,t){return I(this,null,function*(){let r=W(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new _e(q.comparator);o=o.insert(s,_t.newNoDocument(s,K.min()));let c=Z().add(s),u=new Ha(K.min(),new Map,new _e(se),o,c);yield uI(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Of(r)}else yield jd(r.localStore,e,!1).then(()=>of(r,e,t)).catch(Ks)})}function pP(n,e){return I(this,null,function*(){let t=W(n),r=e.batch.batchId;try{let i=yield jC(t.localStore,e);hI(t,r,null),lI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ys(t,i)}catch(i){yield Ks(i)}})}function mP(n,e,t){return I(this,null,function*(){let r=W(n);try{let i=yield function(o,c){let u=W(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(m=>(ae(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);hI(r,e,t),lI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ys(r,i)}catch(i){yield Ks(i)}})}function lI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function hI(n,e,t){let r=W(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function of(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||dI(n,r)})}function dI(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Af(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Of(n))}function pv(n,e,t){for(let r of t)r instanceof oc?(n.La.addReference(r.key,e),gP(n,r)):r instanceof ac?(U("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||dI(n,r.key)):z()}function gP(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(U("SyncEngine","New document in limbo: "+t),n.xa.add(r),Of(n))}function Of(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(fe.fromString(e)),r=n.qa.next();n.Na.set(r,new rf(t)),n.Oa=n.Oa.insert(t,r),nI(n.remoteStore,new Vs(Nt(vc(t.path)),r,"TargetPurposeLimboResolution",Tv.oe))}}function Ys(n,e,t){return I(this,null,function*(){let r=W(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){let m=h?!h.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);let m=Vd.Wi(u.targetId,h);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,h){return I(this,null,function*(){let f=W(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,_=>O.forEach(_.$i,R=>f.persistence.referenceDelegate.addReference(m,_.targetId,R)).next(()=>O.forEach(_.Ui,R=>f.persistence.referenceDelegate.removeReference(m,_.targetId,R)))))}catch(m){if(!Qs(m))throw m;U("LocalStore","Failed to update sequence numbers: "+m)}for(let m of h){let _=m.targetId;if(!m.fromCache){let R=f.os.get(_),P=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(_,D)}}})}(r.localStore,s))})}function _P(n,e){return I(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield eI(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new L(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ys(t,r.hs)}})}function yP(n,e){let t=W(n),r=t.Na.get(e);if(r&&r.va)return Z().add(r.key);{let i=Z(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function fI(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fP.bind(null,e),e.Ca.d_=sP.bind(null,e.eventManager),e.Ca.$a=oP.bind(null,e.eventManager),e}function vP(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mP.bind(null,e),e}var mv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return I(this,null,function*(){this.serializer=wc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return BC(this.persistence,new Fd,t.initialUser,this.serializer)}Ga(t){return new xd(Md.Zr,this.serializer)}Wa(t){return new qd}terminate(){return I(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var IP=(()=>{class n{initialize(t,r){return I(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_P.bind(null,this.syncEngine),yield iP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Zd}()}createDatastore(t){let r=wc(t.databaseInfo.databaseId),i=function(o){return new Gd(o)}(t.databaseInfo);return function(o,c,u,h){return new Kd(o,c,u,h)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,u){return new Jd(i,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>fv(this.syncEngine,r,0),function(){return ec.D()?new ec:new $d}())}createSyncEngine(t,r){return function(s,o,c,u,h,f,m){let _=new sf(s,o,c,u,h,f);return m&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var t,r;yield function(s){return I(this,null,function*(){let o=W(s);U("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Js(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var js=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var af=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ce.UNAUTHENTICATED,this.clientId=ja.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>I(this,null,function*(){U("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Cf(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vh(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield eI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function gv(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield EP(n);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lv(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lv(e.remoteStore,i)),n._onlineComponents=e})}function EP(n){return I(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Gr("Error using user provided cache. Falling back to memory cache: "+t),yield Vh(n,new mv)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield Vh(n,new mv);return n._offlineComponents})}function pI(n){return I(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield gv(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield gv(n,new IP))),n._onlineComponents})}function wP(n){return pI(n).then(e=>e.syncEngine)}function cc(n){return I(this,null,function*(){let e=yield pI(n),t=e.eventManager;return t.onListen=aP.bind(null,e.syncEngine),t.onUnlisten=lP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hP.bind(null,e.syncEngine),t})}function TP(n,e,t={}){let r=new gt;return n.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(s,o,c,u,h){let f=new js({next:_=>{f.Za(),o.enqueueAndForget(()=>Df(s,m));let R=_.docs.has(c);!R&&_.fromCache?h.reject(new L(N.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?h.reject(new L(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new Bs(vc(c.path),f,{includeMetadataChanges:!0,_a:!0});return Pf(s,m)}(yield cc(n),n.asyncQueue,e,t,r)})),r.promise}function AP(n,e,t={}){let r=new gt;return n.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(s,o,c,u,h){let f=new js({next:_=>{f.Za(),o.enqueueAndForget(()=>Df(s,m)),_.fromCache&&u.source==="server"?h.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new Bs(c,f,{includeMetadataChanges:!0,_a:!0});return Pf(s,m)}(yield cc(n),n.asyncQueue,e,t,r)})),r.promise}function mI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _v=new Map;function gI(n,e,t){if(!t)throw new L(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RP(n,e,t,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yv(n){if(!q.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vv(n){if(q.isDocumentKey(n))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function lt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Rc(n);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var uc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ni=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uc({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Uh;switch(r.type){case"firstParty":return new qh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=_v.get(t);r&&(U("ComponentProvider","Removing Datastore"),_v.delete(t),r.terminate())}(this),Promise.resolve()}};function _I(n,e,t,r={}){var i;let s=(n=lt(n,ni))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ce.MOCK_USER;else{c=ha(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ce(h)}n._authCredentials=new Fh(new Ba(c,u))}}var or=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},We=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Rn=class n extends or{constructor(e,t,r){super(e,t,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function yI(n,e,...t){if(n=ge(n),gI("collection","path",e),n instanceof ni){let r=fe.fromString(e,...t);return vv(r),new Rn(n,null,r)}{if(!(n instanceof We||n instanceof Rn))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(fe.fromString(e,...t));return vv(r),new Rn(n.firestore,null,r)}}function kf(n,e,...t){if(n=ge(n),arguments.length===1&&(e=ja.newId()),gI("doc","path",e),n instanceof ni){let r=fe.fromString(e,...t);return yv(r),new We(n,null,new q(r))}{if(!(n instanceof We||n instanceof Rn))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(fe.fromString(e,...t));return yv(r),new We(n.firestore,n instanceof Rn?n.converter:null,new q(r))}}var lc=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tc(this,"async_queue_retry"),this.Vu=()=>{let r=Mh();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Mh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Mh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new gt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return I(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qs(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Yt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Yd.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return I(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Iv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Lt=class extends ni{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lc,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lc(e),this._firestoreClient=void 0,yield e}})}};function vI(n,e){let t=typeof n=="object"?n:yn(),r=typeof n=="string"?n:e||"(default)",i=qn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=la("firestore");s&&_I(i,...s)}return i}function Sc(n){if(n._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SP(n),n._firestoreClient}function SP(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,h,f){return new Hh(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,mI(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new af(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var qs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(qe.fromBase64String(e))}catch(t){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ri=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $s=class{constructor(e){this._methodName=e}};var zs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var Gs=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var bP=/^__.*__$/,cf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xt(e,this.data,this.fieldMask,t,this.fieldTransforms):new sr(e,this.data,t,this.fieldTransforms)}},hc=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function II(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var uf=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(II(this.Cu)&&bP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},lf=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wc(e)}Qu(e,t,r,i=!1){return new uf({Cu:e,methodName:t,qu:r,path:st.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xf(n){let e=n._freezeSettings(),t=wc(n._databaseId);return new lf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CP(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Lf("Data must be an object, but it was:",o,r);let c=EI(r,o),u,h;if(s.merge)u=new ut(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let m of s.mergeFields){let _=hf(e,m,t);if(!o.contains(_))throw new L(N.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);TI(f,_)||f.push(_)}u=new ut(f),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new cf(new it(c),u,h)}var dc=class n extends $s{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function PP(n,e,t,r){let i=n.Qu(1,e,t);Lf("Data must be an object, but it was:",i,r);let s=[],o=it.empty();ar(r,(u,h)=>{let f=Mf(e,u,t);h=ge(h);let m=i.Nu(f);if(h instanceof dc)s.push(f);else{let _=Xs(h,m);_!=null&&(s.push(f),o.set(f,_))}});let c=new ut(s);return new hc(o,c,i.fieldTransforms)}function DP(n,e,t,r,i,s){let o=n.Qu(1,e,t),c=[hf(e,r,t)],u=[i];if(s.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(hf(e,s[_])),u.push(s[_+1]);let h=[],f=it.empty();for(let _=c.length-1;_>=0;--_)if(!TI(h,c[_])){let R=c[_],P=u[_];P=ge(P);let D=o.Nu(R);if(P instanceof dc)h.push(R);else{let b=Xs(P,D);b!=null&&(h.push(R),f.set(R,b))}}let m=new ut(h);return new hc(f,m,o.fieldTransforms)}function NP(n,e,t,r=!1){return Xs(t,n.Qu(r?4:3,e))}function Xs(n,e){if(wI(n=ge(n)))return Lf("Unsupported field value:",e,n),EI(n,e);if(n instanceof $s)return function(r,i){if(!II(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=Xs(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ke.fromDate(r);return{timestampValue:Ya(i.serializer,s)}}if(r instanceof ke){let s=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ya(i.serializer,s)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:Hv(i.serializer,r._byteString)};if(r instanceof We){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gs)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return wf(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Rc(r)}`)}(n,e)}function EI(n,e){let t={};return Av(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ar(n,(r,i)=>{let s=Xs(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function wI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof zs||n instanceof qs||n instanceof We||n instanceof $s||n instanceof Gs)}function Lf(n,e,t){if(!wI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Rc(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function hf(n,e,t){if((e=ge(e))instanceof ri)return e._internalPath;if(typeof e=="string")return Mf(n,e);throw fc("Field path arguments must be of type string or ",n,!1,void 0,t)}var OP=new RegExp("[~\\*/\\[\\]]");function Mf(n,e,t){if(e.search(OP)>=0)throw fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ri(...e.split("."))._internalPath}catch{throw fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fc(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new L(N.INVALID_ARGUMENT,c+n+u)}function TI(n,e){return n.some(t=>t.isEqual(e))}var pc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new df(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},df=class extends pc{data(){return super.data()}};function Vf(n,e){return typeof e=="string"?Mf(n,e):e instanceof ri?e._internalPath:e._delegate._internalPath}function AI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ws=class{},ff=class extends Ws{};function RI(n,e,...t){let r=[];e instanceof Ws&&r.push(e),r=r.concat(t),function(s){let o=s.filter(u=>u instanceof pf).length,c=s.filter(u=>u instanceof mc).length;if(o>1||o>0&&c>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var mc=class n extends ff{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bI(e._query,t),new or(e.firestore,e.converter,od(e._query,t))}_parse(e){let t=xf(e.firestore);return function(s,o,c,u,h,f,m){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wv(m,f);let R=[];for(let P of m)R.push(Ev(u,s,P));_={arrayValue:{values:R}}}else _=Ev(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wv(m,f),_=NP(c,o,m,f==="in"||f==="not-in");return Re.create(h,f,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function SI(n,e,t){let r=e,i=Vf("where",n);return mc._create(i,r,t)}var pf=class n extends Ws{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)bI(o,u),o=od(o,u)}(e._query,t),new or(e.firestore,e.converter,od(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Ev(n,e,t){if(typeof(t=ge(t))=="string"){if(t==="")throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kv(e)&&t.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(fe.fromString(t));if(!q.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wy(n,new q(r))}if(t instanceof We)return Wy(n,t._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rc(t)}.`)}function wv(n,e){if(!Array.isArray(n)||n.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var mf=class{convertValue(e,t="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return de(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ar(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>de(o.doubleValue));return new Gs(s)}convertGeoPoint(e){return new zs(de(e.latitude),de(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=yf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ks(e));default:return null}}convertTimestamp(e){let t=Xt(e);return new ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=fe.fromString(e);ae(Zv(r));let i=new Ga(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(t)||Yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function kP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Xn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gc=class extends pc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Vf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},zr=class extends gc{data(e={}){return super.data(e)}},_c=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zr(this._firestore,this._userDataWriter,r.key,r,new Xn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new zr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new zr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:xP(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function xP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function CI(n){n=lt(n,We);let e=lt(n.firestore,Lt);return TP(Sc(e),n._key).then(t=>kI(e,n,t))}var Hs=class extends mf{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}};function PI(n){n=lt(n,or);let e=lt(n.firestore,Lt),t=Sc(e),r=new Hs(e);return AI(n._query),AP(t,n._query).then(i=>new _c(e,r,n,i))}function DI(n,e,t,...r){n=lt(n,We);let i=lt(n.firestore,Lt),s=xf(i),o;return o=typeof(e=ge(e))=="string"||e instanceof ri?DP(s,"updateDoc",n._key,e,t,r):PP(s,"updateDoc",n._key,e),Ff(i,[o.toMutation(n._key,Jt.exists(!0))])}function NI(n){return Ff(lt(n.firestore,Lt),[new Ls(n._key,Jt.none())])}function OI(n,e){let t=lt(n.firestore,Lt),r=kf(n),i=kP(n.converter,e);return Ff(t,[CP(xf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function Uf(n,...e){var t,r,i;n=ge(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Iv(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Iv(e[o])){let m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,h,f;if(n instanceof We)h=lt(n.firestore,Lt),f=vc(n._key.path),u={next:m=>{e[o]&&e[o](kI(h,n,m))},error:e[o+1],complete:e[o+2]};else{let m=lt(n,or);h=lt(m.firestore,Lt),f=m._query;let _=new Hs(h);u={next:R=>{e[o]&&e[o](new _c(h,_,m,R))},error:e[o+1],complete:e[o+2]},AI(n._query)}return function(_,R,P,D){let b=new js(D),M=new Bs(R,b,P);return _.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return Pf(yield cc(_),M)})),()=>{b.Za(),_.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return Df(yield cc(_),M)}))}}(Sc(h),f,c,u)}function Ff(n,e){return function(r,i){let s=new gt;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return dP(yield wP(r),i,s)})),s.promise}(Sc(n),e)}function kI(n,e,t){let r=t.docs.get(e._key),i=new Hs(n);return new gc(n,i,e._key,r,new Xn(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ii=i})(bt),St(new Qe("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Lt(new Bh(r.getProvider("auth-internal")),new zh(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),he(qy,"4.7.3",e),he(qy,"4.7.3","esm2017")})();var bc=function(){return bc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},bc.apply(this,arguments)};var VP={includeMetadataChanges:!1};function xI(n,e){return e===void 0&&(e=VP),new on(function(t){var r=Uf(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function LI(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:bc(bc({},r),(t={},t[e.idField]=n.id,t))}function MI(n){return xI(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function VI(n,e){return e===void 0&&(e={}),MI(n).pipe(ee(function(t){return t.map(function(r){return LI(r,e)})}))}var Zs=class{constructor(e){return e}},UI="firestore",Bf=class{constructor(){return zn(UI)}};var jf=new ne("angularfire2.firestore-instances");function UP(n,e){let t=Lr(UI,n,e);return t&&new Zs(t)}function FP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zs(r)}}var BP={provide:Bf,deps:[[new Ie,jf]]},jP={provide:Zs,useFactory:UP,deps:[[new Ie,jf],mt]};function tM(n,...e){return he("angularfire",Gt.full,"fst"),He([jP,BP,{provide:jf,useFactory:FP(n),multi:!0,deps:[Ee,dt,In,Wt,[new Ie,Qn],[new Ie,vn],...e]}])}var nM=we(VI,!0);var rM=we(OI,!0);var iM=we(yI,!0);var sM=we(NI,!0);var oM=we(kf,!0);var aM=we(CI,!0);var cM=we(PI,!0);var uM=we(vI,!0);var lM=we(RI,!0);var hM=we(DI,!0);var dM=we(SI,!0);var WI="firebasestorage.googleapis.com",HI="storageBucket",qP=2*60*1e3,$P=10*60*1e3,zP=1e3;var ye=class n extends Ge{constructor(e,t,r=0){super(qf(e),`Firebase Storage: ${t} (${qf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},pe=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(pe||{});function qf(n){return"storage/"+n}function Yf(){let n="An unknown error occurred, please check the error payload for server response.";return new ye(pe.UNKNOWN,n)}function GP(n){return new ye(pe.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function WP(n){return new ye(pe.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HP(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ye(pe.UNAUTHENTICATED,n)}function KP(){return new ye(pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function QP(n){return new ye(pe.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KI(){return new ye(pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QI(){return new ye(pe.CANCELED,"User canceled the upload/download.")}function JP(n){return new ye(pe.INVALID_URL,"Invalid URL '"+n+"'.")}function YP(n){return new ye(pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function XP(){return new ye(pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HI+"' property when initializing the app?")}function JI(){return new ye(pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZP(){return new ye(pe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function eD(n){return new ye(pe.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zf(n){return new ye(pe.INVALID_ARGUMENT,n)}function YI(){return new ye(pe.APP_DELETED,"The Firebase app was deleted.")}function tD(n){return new ye(pe.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function no(n,e){return new ye(pe.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function eo(n){throw new ye(pe.INTERNAL_ERROR,"Internal error: "+n)}var vt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw YP(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function h(j){j.path_=decodeURIComponent(j.path)}let f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${m}/${f}/b/${i}/o${_}`,"i"),P={bucket:1,path:3},D=t===WI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",M=new RegExp(`^https?://${D}/${i}/${b}`,"i"),x=[{regex:c,indices:u,postModify:s},{regex:R,indices:P,postModify:h},{regex:M,indices:{bucket:1,path:2},postModify:h}];for(let j=0;j<x.length;j++){let re=x[j],H=re.regex.exec(e);if(H){let w=H[re.indices.bucket],g=H[re.indices.path];g||(g=""),r=new n(w,g),re.postModify(r);break}}if(r==null)throw JP(e);return r}},Gf=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function nD(n,e,t){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let h=!1;function f(...b){h||(h=!0,e.apply(null,b))}function m(b){i=setTimeout(()=>{i=null,n(R,u())},b)}function _(){s&&clearTimeout(s)}function R(b,...M){if(h){_();return}if(b){_(),f.call(null,b,...M);return}if(u()||o){_(),f.call(null,b,...M);return}r<64&&(r*=2);let x;c===1?(c=2,x=0):x=(r+Math.random())*1e3,m(x)}let P=!1;function D(b){P||(P=!0,_(),!h&&(i!==null?(b||(c=2),clearTimeout(i),m(0)):b||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,D(!0)},t),D}function rD(n){n(!1)}function iD(n){return n!==void 0}function sD(n){return typeof n=="function"}function oD(n){return typeof n=="object"&&!Array.isArray(n)}function Xf(n){return typeof n=="string"||n instanceof String}function FI(n){return Zf()&&n instanceof Blob}function Zf(){return typeof Blob<"u"}function BI(n,e,t,r){if(r<e)throw zf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw zf(`Invalid value for '${n}'. Expected ${t} or less.`)}function ep(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function aD(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ci=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ci||{});function XI(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var Wf=class{constructor(e,t,r,i,s,o,c,u,h,f,m,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ai(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===ci.NO_ERROR,u=s.getStatus();if(!c||XI(u,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===ci.ABORT;r(!1,new ai(!1,null,f));return}let h=this.successCodes_.indexOf(u)!==-1;r(!0,new ai(h,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(c,c.getResponse());iD(u)?s(u):s()}catch(u){o(u)}else if(c!==null){let u=Yf();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){let u=this.appDelete_?YI():QI();o(u)}else{let u=KI();o(u)}};this.canceled_?t(!1,new ai(!1,null,!0)):this.backoffId_=nD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ai=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function cD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function uD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function hD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dD(n,e,t,r,i,s,o=!0){let c=aD(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return lD(h,e),cD(h,t),uD(h,s),hD(h,r),new Wf(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function fD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pD(...n){let e=fD();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Zf())return new Blob(n);throw new ye(pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function gD(n){if(typeof atob>"u")throw eD("base-64");return atob(n)}var Mt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ro=class{constructor(e,t){this.data=e,this.contentType=t||null}};function _D(n,e){switch(n){case Mt.RAW:return new ro(ZI(e));case Mt.BASE64:case Mt.BASE64URL:return new ro(eE(n,e));case Mt.DATA_URL:return new ro(vD(e),ID(e))}throw Yf()}function ZI(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function yD(n){let e;try{e=decodeURIComponent(n)}catch{throw no(Mt.DATA_URL,"Malformed data URL.")}return ZI(e)}function eE(n,e){switch(n){case Mt.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw no(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mt.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw no(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=gD(e)}catch(i){throw i.message.includes("polyfill")?i:no(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Pc=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw no(Mt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=ED(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function vD(n){let e=new Pc(n);return e.base64?eE(Mt.BASE64,e.rest):yD(e.rest)}function ID(n){return new Pc(n).contentType}function ED(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Dc=class n{constructor(e,t){let r=0,i="";FI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(FI(this.data_)){let r=this.data_,i=mD(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(Zf()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(pD.apply(null,t))}else{let t=e.map(o=>Xf(o)?_D(Mt.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new n(i,!0)}}uploadData(){return this.data_}};function wD(n){let e;try{e=JSON.parse(n)}catch{return null}return oD(e)?e:null}function TD(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function AD(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function tE(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function RD(n,e){return e}var xe=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||RD}},Cc=null;function SD(n){return!Xf(n)||n.length<2?n:tE(n)}function bD(){if(Cc)return Cc;let n=[];n.push(new xe("bucket")),n.push(new xe("generation")),n.push(new xe("metageneration")),n.push(new xe("name","fullPath",!0));function e(s,o){return SD(o)}let t=new xe("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new xe("size");return i.xform=r,n.push(i),n.push(new xe("timeCreated")),n.push(new xe("updated")),n.push(new xe("md5Hash",null,!0)),n.push(new xe("cacheControl",null,!0)),n.push(new xe("contentDisposition",null,!0)),n.push(new xe("contentEncoding",null,!0)),n.push(new xe("contentLanguage",null,!0)),n.push(new xe("contentType",null,!0)),n.push(new xe("metadata","customMetadata",!0)),Cc=n,Cc}function CD(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new vt(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function PD(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return CD(r,n),r}function DD(n,e,t){let r=wD(e);return r===null?null:PD(n,r,t)}function nE(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var ur=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Pn(n){if(!n)throw Yf()}function tp(n,e){function t(r,i){let s=DD(n,i,e);return Pn(s!==null),s}return t}function so(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=KP():i=HP():t.getStatus()===402?i=WP(n.bucket):t.getStatus()===403?i=QP(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ND(n){let e=so(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=GP(n.path)),s.serverResponse=i.serverResponse,s}return t}function OD(n,e,t){let r=e.fullServerUrl(),i=ep(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new ur(i,s,tp(n,t),o);return c.errorHandler=ND(e),c}function kD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function rE(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=kD(null,e)),r}function xD(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let x="";for(let j=0;j<2;j++)x=x+Math.random().toString().slice(2);return x}let u=c();o["Content-Type"]="multipart/related; boundary="+u;let h=rE(e,r,i),f=nE(h,t),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+u+"--",R=Dc.getBlob(m,r,_);if(R===null)throw JI();let P={name:h.fullPath},D=ep(s,n.host,n._protocol),b="POST",M=n.maxUploadRetryTime,B=new ur(D,b,tp(n,t),M);return B.urlParams=P,B.headers=o,B.body=R.uploadData(),B.errorHandler=so(e),B}var ui=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function np(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Pn(!1)}return Pn(!!t&&(e||["active"]).indexOf(t)!==-1),t}function LD(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o=rE(e,r,i),c={name:o.fullPath},u=ep(s,n.host,n._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=nE(o,t),_=n.maxUploadRetryTime;function R(D){np(D);let b;try{b=D.getResponseHeader("X-Goog-Upload-URL")}catch{Pn(!1)}return Pn(Xf(b)),b}let P=new ur(u,h,R,_);return P.urlParams=c,P.headers=f,P.body=m,P.errorHandler=so(e),P}function MD(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function s(h){let f=np(h,["active","final"]),m=null;try{m=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pn(!1)}m||Pn(!1);let _=Number(m);return Pn(!isNaN(_)),new ui(_,r.size(),f==="final")}let o="POST",c=n.maxUploadRetryTime,u=new ur(t,o,s,c);return u.headers=i,u.errorHandler=so(e),u}var jI=256*1024;function VD(n,e,t,r,i,s,o,c){let u=new ui(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw ZP();let h=u.total-u.current,f=h;i>0&&(f=Math.min(f,i));let m=u.current,_=m+f,R="";f===0?R="finalize":h===f?R="upload, finalize":R="upload";let P={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${u.current}`},D=r.slice(m,_);if(D===null)throw JI();function b(j,re){let H=np(j,["active","final"]),w=u.current+f,g=r.size(),y;return H==="final"?y=tp(e,s)(j,re):y=null,new ui(w,g,H==="final",y)}let M="POST",B=e.maxUploadRetryTime,x=new ur(t,M,b,B);return x.headers=P,x.body=D.uploadData(),x.progressCallback=c||null,x.errorHandler=so(n),x}var Je={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $f(n){switch(n){case"running":case"pausing":case"canceling":return Je.RUNNING;case"paused":return Je.PAUSED;case"success":return Je.SUCCESS;case"canceled":return Je.CANCELED;case"error":return Je.ERROR;default:return Je.ERROR}}var Hf=class{constructor(e,t,r){if(sD(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function oi(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var qI=null,Kf=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw eo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Qf=class extends Kf{initXhr(){this.xhr_.responseType="text"}};function to(){return qI?qI():new Qf}var Jf=class{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=bD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(pe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(XI(i.status,[]))if(s)i=KI();else{this.sleepTime=Math.max(this.sleepTime*2,zP),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(pe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=LD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=MD(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,to,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=jI*this._chunkMultiplier,t=new ui(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=VD(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}let c=this._ref.storage._makeRequest(o,to,i,s,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=OD(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,to,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=xD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=QI(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=$f(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let s=new Hf(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch($f(this._state)){case Je.SUCCESS:oi(this._resolve.bind(null,this.snapshot))();break;case Je.CANCELED:case Je.ERROR:let t=this._reject;oi(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($f(this._state)){case Je.RUNNING:case Je.PAUSED:e.next&&oi(e.next.bind(e,this.snapshot))();break;case Je.SUCCESS:e.complete&&oi(e.complete.bind(e))();break;case Je.CANCELED:case Je.ERROR:e.error&&oi(e.error.bind(e,this._error))();break;default:e.error&&oi(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var li=class n{constructor(e,t){this._service=e,t instanceof vt?this._location=t:this._location=vt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new vt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tE(this._location.path)}get storage(){return this._service}get parent(){let e=TD(this._location.path);if(e===null)return null;let t=new vt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tD(e)}};function UD(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Jf(n,new Dc(e),t)}function FD(n,e){let t=AD(n._location.path,e),r=new vt(n._location.bucket,t);return new li(n.storage,r)}function BD(n){return/^[A-Za-z]+:\/\//.test(n)}function jD(n,e){return new li(n,e)}function iE(n,e){if(n instanceof io){let t=n;if(t._bucket==null)throw XP();let r=new li(t,t._bucket);return e!=null?iE(r,e):r}else return e!==void 0?FD(n,e):n}function qD(n,e){if(e&&BD(e)){if(n instanceof io)return jD(n,e);throw zf("To use ref(service, url), the first argument must be a Storage instance.")}else return iE(n,e)}function $I(n,e){let t=e?.[HI];return t==null?null:vt.makeFromBucketSpec(t,n)}function $D(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:ha(i,n.app.options.projectId))}var io=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=WI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qP,this._maxUploadRetryTime=$P,this._requests=new Set,i!=null?this._bucket=vt.makeFromBucketSpec(i,this._host):this._bucket=$I(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vt.makeFromBucketSpec(this._url,e):this._bucket=$I(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return I(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return I(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new li(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Gf(YI());{let o=dD(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return I(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},zI="@firebase/storage",GI="0.13.2";var sE="storage";function oE(n,e,t){return n=ge(n),UD(n,e,t)}function aE(n,e){return n=ge(n),qD(n,e)}function cE(n=yn(),e){n=ge(n);let r=qn(n,sE).getImmediate({identifier:e}),i=la("storage");return i&&uE(r,...i),r}function uE(n,e,t,r={}){$D(n,e,t,r)}function zD(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new io(t,r,i,e,bt)}function GD(){St(new Qe(sE,zD,"PUBLIC").setMultipleInstances(!0)),he(zI,GI,""),he(zI,GI,"esm2017")}GD();var oo=class{constructor(e){return e}},lE="storage",rp=class{constructor(){return zn(lE)}};var ip=new ne("angularfire2.storage-instances");function WD(n,e){let t=Lr(lE,n,e);return t&&new oo(t)}function HD(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oo(r)}}var KD={provide:rp,deps:[[new Ie,ip]]},QD={provide:oo,useFactory:WD,deps:[[new Ie,ip],mt]};function BM(n,...e){return he("angularfire",Gt.full,"gcs"),He([QD,KD,{provide:ip,useFactory:HD(n),multi:!0,deps:[Ee,dt,In,Wt,[new Ie,Qn],[new Ie,vn],...e]}])}var jM=we(cE,!0);var qM=we(aE,!0);var $M=we(oE,!0);export{ZE as a,oN as b,wg as c,DN as d,$w as e,NN as f,pn as g,ET as h,At as i,Ug as j,JN as k,YN as l,MA as m,XN as n,Oe as o,tO as p,nO as q,GA as r,fO as s,pO as t,mO as u,gO as v,_O as w,yO as x,vO as y,IO as z,EO as A,lk as B,hk as C,ux as D,lx as E,Zs as F,tM as G,nM as H,rM as I,iM as J,sM as K,oM as L,aM as M,cM as N,uM as O,lM as P,hM as Q,dM as R,oo as S,BM as T,jM as U,qM as V,$M as W};
